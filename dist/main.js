!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=12)}([function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return f}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},function(t,e,n){"use strict";var r,i,o=n(0),s=n(2),a=n(5),u=n(4),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.b("app","Firebase",c),f=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),l=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var f=h.value;this._addComponent(f)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){l.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void l.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.c)(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(a){var u,c,f=a.name;if(n.has(f))return l.debug("There were multiple attempts to register component "+f+"."),"PUBLIC"===a.type?r[f]:null;if(n.set(f,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[f])throw h.create("invalid-app-argument",{appName:f});return t[f]()};void 0!==a.serviceProps&&Object(s.f)(p,a.serviceProps),r[f]=p,t.prototype[f]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,f);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),v=d.next();!v.done;v=d.next()){var y=v.value;e[y]._addComponent(a)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[f]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(Object(s.h)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&l.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var m=d;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",e),t.registerVersion("fire-js","")}(m),e.a=m},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return v})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return y}));var r=n(0),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function h(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function l(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return u().indexOf("Electron/")>=0}function v(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return u().indexOf("MSAppHost/")>=0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return Object(r.c)(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?b(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new g(i,a,r);return u},t}();function b(t,e){return t.replace(w,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function E(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}).call(this,n(6))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return rr})),n.d(e,"b",(function(){return or})),n.d(e,"c",(function(){return ir})),n.d(e,"d",(function(){return sr})),n.d(e,"e",(function(){return ar})),n.d(e,"f",(function(){return ur})),n.d(e,"g",(function(){return er})),n.d(e,"h",(function(){return nr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a=a||{},u=s||self;function c(){}function h(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var l="closure_uid_"+(1e9*Math.random()>>>0),p=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:v).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function m(){return Date.now()}function b(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,l)&&t[l]||(t[l]=++p)})(this)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function _(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var A,k=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function S(t,e){return t<e?-1:t>e?1:0}t:{var j=u.navigator;if(j){var x=j.userAgent;if(x){A=x;break t}}A=""}function C(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function D(t){var e={};for(var n in t)e[n]=t[n];return e}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<P.length;o++)n=P[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function L(t){return L[" "](t),t}L[" "]=c;var M,U,V=N(A,"Opera"),F=N(A,"Trident")||N(A,"MSIE"),q=N(A,"Edge"),B=q||F,z=N(A,"Gecko")&&!(N(A.toLowerCase(),"webkit")&&!N(A,"Edge"))&&!(N(A,"Trident")||N(A,"MSIE"))&&!N(A,"Edge"),G=N(A.toLowerCase(),"webkit")&&!N(A,"Edge");function K(){var t=u.document;return t?t.documentMode:void 0}t:{var H="",W=(U=A,z?/rv:([^\);]+)(\)|;)/.exec(U):q?/Edge\/([\d\.]+)/.exec(U):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):G?/WebKit\/(\S+)/.exec(U):V?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(W&&(H=W?W[1]:""),F){var X=K();if(null!=X&&X>parseFloat(H)){M=String(X);break t}}M=H}var Y,J={};function $(t){return function(t,e){var n=J;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=k(String(M)).split("."),r=k(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=S(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||S(0==s[2].length,0==a[2].length)||S(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&F){var Q=K();Y=Q||(parseInt(M,10)||void 0)}else Y=void 0;var Z=Y,tt=!F||9<=Number(Z),et=F&&!$("9"),nt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{L(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},b(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var st="closure_listenable_"+(1e6*Math.random()|0),at=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ht(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ht.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=lt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ut(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Tt(r),e&&e[st]?e.wa(n,r,f(i)?!!i.capture:!!i,o):yt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[st]?t.va(e,n,f(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i;if(s&&!tt)return null;var a=It(t);if(a||(t[pt]=a=new ht(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=wt,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=It(e))?(ft(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function mt(t){return t in dt?dt[t]:dt[t]="on"+t}function bt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function wt(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return bt(t,e=new it(e,this))}return bt(t,new it(e,this))}function It(t){return(t=t[pt])instanceof ht?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function _t(){w.call(this),this.c=new ht(this),this.J=this,this.C=null}function Ot(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var i=e;R(e=new rt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=At(s,r,!0,e)&&i}if(i=At(s=e.a=t,r,!0,e)&&i,i=At(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=At(s=e.a=n[o],r,!1,e)&&i}function At(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ft(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}b(_t,w),_t.prototype[st]=!0,(o=_t.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=f(i)?!!i.capture:!!i,r=Tt(r),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=lt(s=e.a[n],r,i,o))&&(ct(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=It(e))&&(n=e.a[n.toString()],e=-1,n&&(e=lt(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},o.G=function(){if(_t.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ct(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=u.JSON.stringify;function Nt(){this.b=this.a=null}var St,jt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ct}),(function(t){t.reset()}));function xt(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ct(){this.next=this.b=this.a=null}function Dt(t){u.setTimeout((function(){throw t}),0)}function Pt(t,e){St||function(){var t=u.Promise.resolve(void 0);St=function(){t.then(Mt)}}(),Rt||(St(),Rt=!0),Lt.add(t,e)}Nt.prototype.add=function(t,e){var n=jt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ct.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ct.prototype.reset=function(){this.next=this.b=this.a=null};var Rt=!1,Lt=new Nt;function Mt(){for(var t;t=xt();){try{t.a.call(t.b)}catch(t){Dt(t)}var e=jt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Rt=!1}function Ut(t,e){_t.call(this),this.b=t||1,this.a=e||u,this.f=y(this.Za,this),this.g=m()}function Vt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ft(t,e,n){if("function"==typeof t)n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function qt(t){t.a=Ft((function(){t.a=null,t.c&&(t.c=!1,qt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}b(Ut,_t),(o=Ut.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var t=m()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ot(this,"tick"),this.aa&&(Vt(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=m())},o.G=function(){Ut.X.G.call(this),Vt(this),delete this.a};var Bt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(w);function zt(t){w.call(this),this.b=t,this.a={}}b(zt,w);var Gt=[];function Kt(t,e,n,r){Array.isArray(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ht(t){C(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Wt(){this.a=!0}function Xt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return kt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}zt.prototype.G=function(){zt.X.G.call(this),Ht(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.info=function(){};var Yt={},Jt=null;function $t(){return Jt=Jt||new _t}function Qt(t){rt.call(this,Yt.Fa,t)}function Zt(t){var e=$t();Ot(e,new Qt(e,t))}function te(t,e){rt.call(this,Yt.STAT_EVENT,t),this.stat=e}function ee(t){var e=$t();Ot(e,new te(e,t))}function ne(t){rt.call(this,Yt.Ga,t)}function re(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}Yt.Fa="serverreachability",b(Qt,rt),Yt.STAT_EVENT="statevent",b(te,rt),Yt.Ga="timingevent",b(ne,rt);var ie={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},oe={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function se(){}function ae(t){var e;return(e=t.a)||(e=t.a={}),e}function ue(){}se.prototype.a=null;var ce,he={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function fe(){rt.call(this,"d")}function le(){rt.call(this,"c")}function pe(){}function de(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new zt(this),this.P=ve,t=B?125:void 0,this.R=new Ut(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(fe,rt),b(le,rt),b(pe,se),ce=new pe;var ve=45e3,ye={},ge={};function me(t,e,n){t.H=1,t.i=Fe(Pe(e)),t.j=n,t.I=!0,be(t,null)}function be(t,e){t.u=m(),Ee(t),t.l=Pe(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ze(n.b,"t",r),t.D=0,t.a=Xn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Bt(y(t.Ca,t,t.a),t.O)),Kt(t.J,t.a,"readystatechange",t.Xa),e=t.B?D(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Zt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function we(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ie(t,n);if(i==ge){4==e&&(t.h=4,ee(14),r=!1),Xt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ee(15),Xt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Xt(t.c,t.f,i,null),ke(t,i)}4==e&&0==n.length&&(t.h=1,ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fn(e),e.F=!0,ee(11))):(Xt(t.c,t.f,n,"[Invalid Chunked Response]"),Ae(t),Oe(t))}function Ie(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function Ee(t){t.T=m()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=re(y(t.Va,t),e)}function _e(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Oe(t){0==t.g.v||t.A||zn(t.g,t)}function Ae(t){_e(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Vt(t.R),Ht(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ke(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),xn(n)}Vn(n),ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=re(y(n.Sa,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Kn(n,11)}else if((t.C||n.a==t)&&Bn(n),!O(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(N(h,"spdy")||N(h,"quic")||N(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(un(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,Ve(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=m()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Wn(u,u.C?u.ga:null,u.fa),p.C){cn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(_e(d),Ee(d)),u.a=p}else Un(u);0<n.g.length&&Pn(n)}else"stop"!=i[0]&&"close"!=i[0]||Kn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Kn(n,7):jn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Zt(4)}catch(t){}}function Ne(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)E(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=de.prototype).setTimeout=function(t){this.P=t},o.Xa=function(t){t=t.target;var e=this.F;e&&3==An(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=An(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!B&&!this.a.$())){this.A||4!=e||7==n||Zt(8==n||0>=r?3:2),_e(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ee(12),Ae(this),Oe(this);break t}Xt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ke(this,u)}this.I?(we(this,e,o),B&&this.b&&3==e&&(Kt(this.J,this.R,"tick",this.Wa),this.R.start())):(Xt(this.c,this.f,o,null),ke(this,o)),4==e&&Ae(this),this.b&&!this.A&&(4==e?zn(this.g,this):(this.b=!1,Ee(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ee(12)):(this.h=0,ee(13)),Ae(this),Oe(this)}}}catch(t){}},o.Wa=function(){if(this.a){var t=An(this.a),e=this.a.$();this.D<e.length&&(_e(this),we(this,t,e),this.b&&4!=t&&Ee(this))}},o.cancel=function(){this.A=!0,Ae(this)},o.Va=function(){this.o=null;var t=m();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Zt(3),ee(17)),Ae(this),this.h=2,Oe(this)):Te(this,this.T-t)},(o=Se.prototype).K=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return je(this),this.a.concat()},o.get=function(t,e){return xe(this.b,t)?this.b[t]:e},o.set=function(t,e){xe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ce=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function De(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof De){this.a=void 0!==e?e:t.a,Re(this,t.f),this.j=t.j,Le(this,t.c),Me(this,t.h),this.g=t.g,e=t.b;var n=new Ye;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),Ue(this,n),this.i=t.i}else t&&(n=String(t).match(Ce))?(this.a=!!e,Re(this,n[1]||"",!0),this.j=qe(n[2]||""),Le(this,n[3]||"",!0),Me(this,n[4]),this.g=qe(n[5]||"",!0),Ue(this,n[6]||"",!0),this.i=qe(n[7]||"")):(this.a=!!e,this.b=new Ye(null,this.a))}function Pe(t){return new De(t)}function Re(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.c=n?qe(e,!0):e}function Me(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ue(t,e,n){e instanceof Ye?(t.b=e,function(t,e){e&&!t.f&&(Je(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($e(this,e),Ze(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,We)),t.b=new Ye(e,t.a))}function Ve(t,e,n){t.b.set(e,n)}function Fe(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^m()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,Ge,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?He:Ke,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,Xe)),t.join("")};var Ge=/[#\/\?@]/g,Ke=/[#\?:]/g,He=/[#\?]/g,We=/[#\?@]/g,Xe=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Je(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $e(t,e){Je(t),e=tn(t,e),xe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function Qe(t,e){return Je(t),e=tn(t,e),xe(t.a.b,e)}function Ze(t,e,n){$e(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),_(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(o=Ye.prototype).add=function(t,e){Je(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Je(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Je(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Je(this);var e=[];if("string"==typeof t)Qe(this,t)&&(e=T(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},o.set=function(t,e){return Je(this),this.c=null,Qe(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var en=function(t,e){this.b=t,this.a=e};function nn(t){this.g=t||rn,u.PerformanceNavigationTiming?t=0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function hn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return _(t.c)}function fn(){}function ln(){this.a=new fn}function pn(t,e,n){var r=n||"";try{Ne(t,(function(t,n){var i=t;f(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nn.prototype.cancel=function(){var t,e;if(this.c=hn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},fn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},fn.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var vn=u.JSON.parse;function yn(t){_t.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}b(yn,_t);var gn="",mn=/^https?$/i,bn=["POST","PUT"];function wn(t){return"content-type"==t.toLowerCase()}function In(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,En(t),_n(t)}function En(t){t.u||(t.u=!0,Ot(t,"complete"),Ot(t,"error"))}function Tn(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=An(t)||2!=t.W()))if(t.l&&4==An(t))Ft(t.za,0,t);else if(Ot(t,"readystatechange"),4==An(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ce)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!mn.test(o?o.toLowerCase():"")}e=i}if(e)Ot(t,"complete"),Ot(t,"success");else{t.h=6;try{var c=2<An(t)?t.a.statusText:""}catch(n){c=""}t.f=c+" ["+t.W()+"]",En(t)}}finally{_n(t)}}}function _n(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function An(t){return t.a?t.a.readyState:0}function kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return C(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ve(t,e,n))}function Nn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.pa=0,this.g=[],this.c=new Wt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Nn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Nn("baseRetryDelayMs",5e3,t),this.Ra=Nn("retryDelaySeedMs",1e4,t),this.Ma=Nn("forwardChannelMaxRetries",2,t),this.ma=Nn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new ln,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function jn(t){if(Cn(t),3==t.v){var e=t.R++,n=Pe(t.B);Ve(n,"SID",t.J),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Ln(t,n),(e=new de(t,t.c,e,void 0)).H=2,e.i=Fe(Pe(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xn(e.g,null),e.a.ba(e.i)),e.u=m(),Ee(e)}Hn(t)}function xn(t){t.a&&(Fn(t),t.a.cancel(),t.a=null)}function Cn(t){xn(t),t.j&&(u.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Dn(t,e){t.g.push(new en(t.Oa++,e)),3==t.v&&Pn(t)}function Pn(t){on(t.b)||t.h||(t.h=!0,Pt(t.Ba,t),t.u=0)}function Rn(t,e){var n;n=e?e.f:t.R++;var r=Pe(t.B);Ve(r,"SID",t.J),Ve(r,"RID",n),Ve(r,"AID",t.P),Ln(t,r),t.i&&t.l&&kn(r,t.i,t.l),n=new de(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),me(n,r,e)}function Ln(t,e){t.f&&Ne({},(function(t,n){Ve(e,n,t)}))}function Mn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?y(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{pn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Un(t){t.a||t.j||(t.T=1,Pt(t.Aa,t),t.o=0)}function Vn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=re(y(t.Aa,t),Gn(t,t.o)),t.o++,!0)}function Fn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function qn(t){t.a=new de(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Pe(t.la);Ve(e,"RID","rpc"),Ve(e,"SID",t.J),Ve(e,"CI",t.H?"0":"1"),Ve(e,"AID",t.P),Ln(t,e),Ve(e,"TYPE","xmlhttp"),t.i&&t.l&&kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fe(Pe(e)),n.j=null,n.I=!0,be(n,t)}function Bn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function zn(t,e){var n=null;if(t.a==e){Bn(t),Fn(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=m()-e.u;var i=t.u;Ot(r=$t(),new ne(r,n,e,i)),Pn(t)}else Un(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=re(y(t.Ba,t,e),Gn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Vn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Kn(t,5);break;case 4:Kn(t,10);break;case 3:Kn(t,6);break;default:Kn(t,2)}}function Gn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Kn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=y(t.Ya,t);n||(n=new De("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Re(n,"https"),Fe(n)),function(t,e){var n=new Wt;if(u.Image){var r=new Image;r.onload=g(dn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=g(dn,n,r,"TestLoadImage: error",!1,e),r.onabort=g(dn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=g(dn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.v=0,t.f&&t.f.ra(e),Hn(t),Cn(t)}function Hn(t){t.v=0,t.I=-1,t.f&&(0==hn(t.b).length&&0==t.g.length||(t.b.c.length=0,_(t.g),t.g.length=0),t.f.qa())}function Wn(t,e,n){var r=function(t){return t instanceof De?Pe(t):new De(t,void 0)}(n);if(""!=r.c)e&&Le(r,e+"."+r.c),Me(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new De(null,void 0);return t&&Re(i,t),e&&Le(i,e),n&&Me(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&C(t.V,(function(t,e){Ve(r,e,t)})),e=t.A,n=t.na,e&&n&&Ve(r,e,n),Ve(r,"VER",t.ha),Ln(t,r),r}function Xn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Na)).F=t.C,e}function Yn(){}function Jn(){if(F&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function $n(t,e){_t.call(this),this.a=new Sn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new tr(this)}function Qn(t){fe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zn(){le.call(this),this.status=1}function tr(t){this.a=t}(o=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ae(this.H):ae(ce),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void In(this,t)}t=n||"";var i=new Se(this.headers);r&&Ne(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=wn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=I(bn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return F&&$(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=Ft(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){In(this,t)}},o.xa=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ot(this,"timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ot(this,"complete"),Ot(this,"abort"),_n(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_n(this,!0)),yn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?Tn(this):this.Ua())},o.Ua=function(){Tn(this)},o.W=function(){try{return 2<An(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=Sn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new de(this,this.c,t,void 0),r=this.l;if(this.O&&(r?R(r=D(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mn(this,n,e),Ve(i=Pe(this.B),"RID",t),Ve(i,"CVER",22),this.A&&Ve(i,"X-HTTP-Session-Id",this.A),Ln(this,i),this.i&&r&&kn(i,this.i,r),un(this.b,n),this.Ia&&Ve(i,"TYPE","init"),this.da?(Ve(i,"$req",e),Ve(i,"SID","null"),n.U=!0,me(n,i,null)):me(n,i,e),this.v=2}}else 3==this.v&&(t?Rn(this,t):0==this.g.length||on(this.b)||Rn(this))},o.Aa=function(){if(this.j=null,qn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=re(y(this.Ta,this),t)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ee(10),xn(this),qn(this))},o.Sa=function(){null!=this.m&&(this.m=null,xn(this),Vn(this),ee(19))},o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ee(2)):(this.c.info("Failed to ping google.com"),ee(1))},(o=Yn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},Jn.prototype.a=function(t,e){return new $n(t,e)},b($n,_t),$n.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ee(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Wn(t,null,t.fa),Pn(t)},$n.prototype.close=function(){jn(this.a)},$n.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Dn(this.a,e)}else this.l?((e={}).__data__=kt(t),Dn(this.a,e)):Dn(this.a,t)},$n.prototype.G=function(){this.a.f=null,delete this.f,jn(this.a),delete this.a,$n.X.G.call(this)},b(Qn,fe),b(Zn,le),b(tr,Yn),tr.prototype.ta=function(){Ot(this.a,"a")},tr.prototype.sa=function(t){Ot(this.a,new Qn(t))},tr.prototype.ra=function(t){Ot(this.a,new Zn(t))},tr.prototype.qa=function(){Ot(this.a,"b")},Jn.prototype.createWebChannel=Jn.prototype.a,$n.prototype.send=$n.prototype.h,$n.prototype.open=$n.prototype.g,$n.prototype.close=$n.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,oe.COMPLETE="complete",ue.EventType=he,he.OPEN="a",he.CLOSE="b",he.ERROR="c",he.MESSAGE="d",_t.prototype.listen=_t.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.W,yn.prototype.getResponseJson=yn.prototype.Pa,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=function(){return new Jn},nr=function(){return $t()},rr=ie,ir=oe,or=Yt,sr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ar=ue,ur=yn}).call(this,n(6))},function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return p}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(0),i=n(2),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[0],u=s[1],c=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(c);u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){},function(t,e){var n=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function r(t){function e(){return t&&t.maxLength>1?function(){var e,n=!1;for(;!n;)(e=r()).length<=t.maxLength&&(n=!0);return e}():r()}function r(){return n[i(n.length)]}function i(t){return Math.floor(Math.random()*t)}if(void 0===t)return e();"number"==typeof t&&(t={exactly:t}),t.exactly&&(t.min=t.exactly,t.max=t.exactly),"number"!=typeof t.wordsPerString&&(t.wordsPerString=1),"function"!=typeof t.formatter&&(t.formatter=t=>t),"string"!=typeof t.separator&&(t.separator=" ");for(var o=t.min+i(t.max+1-t.min),s=[],a="",u=0,c=0;c<o*t.wordsPerString;c++)u===t.wordsPerString-1?a+=t.formatter(e(),u):a+=t.formatter(e(),u)+t.separator,u++,(c+1)%t.wordsPerString==0&&(s.push(a),a="",u=0);return"string"==typeof t.join&&(s=s.join(t.join)),s}t.exports=r,r.wordList=n},function(t,e,n){"use strict";(function(t){var e=n(0),r=n(1),i=n(4),o=n(2),s=n(3),a=n(5),u=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},c=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),h=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();h.UNAUTHENTICATED=new h(null),h.l=new h("google-credentials-uid"),h._=new h("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f=new i.b("@firebase/firestore");function l(){return f.logLevel}function p(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i.a.DEBUG){var o=n.map(y);f.debug.apply(f,Object(e.g)(["Firestore (8.1.1): "+t],o))}}function d(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i.a.ERROR){var o=n.map(y);f.error.apply(f,Object(e.g)(["Firestore (8.1.1): "+t],o))}}function v(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(f.logLevel<=i.a.WARN){var o=n.map(y);f.warn.apply(f,Object(e.g)(["Firestore (8.1.1): "+t],o))}}function y(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function m(t,e){t||g()}function b(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(e.c)(n,t),n}(Error),E=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},T=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(h.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),_=function(){function t(t){var e=this;this.P=null,this.currentUser=h.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then((function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.V!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(m("string"==typeof n.accessToken),new E(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return m(null===t||"string"==typeof t),new h(t)},t}(),O=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=h._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),A=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new O(this.v,this.S))},t.prototype.A=function(t){t(h._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=k(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function S(t,e){return t<e?-1:t>e?1:0}function j(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function x(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new I(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new I(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new I(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new I(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?S(this.nanoseconds,t.nanoseconds):S(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),D=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new C(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),P=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return t=void 0===t?1:t,this.L(this.segments,this.offset+t,this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.prototype.J=function(){return this.H().join("/")},n.prototype.toString=function(){return this.J()},n.Y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new I(w.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new n(r)},n.X=function(){return new n([])},n}(P),L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.Z=function(t){return L.test(t)},n.prototype.J=function(){return this.H().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),n.Z(t)||(t="`"+t+"`"),t})).join(".")},n.prototype.toString=function(){return this.J()},n.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},n.et=function(){return new n(["__name__"])},n.nt=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new I(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new I(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new I(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new I(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.X=function(){return new n([])},n}(P),U=function(){function t(t){this.path=t}return t.st=function(e){return new t(R.Y(e))},t.it=function(e){return new t(R.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===R.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return R.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new R(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return null==t}function F(t){return 0===t&&1/t==-1/0}function q(t){return"number"==typeof t&&Number.isInteger(t)&&!F(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function z(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new B(t,e,n,r,i,o,s)}function G(t){var e=b(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.J()+t.op.toString()+Ut(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.J()+t.dir}(t)})).join(","),V(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vn(e.startAt)),e.endAt&&(n+="|ub:",n+=Vn(e.endAt)),e.ut=n}return e.ut}function K(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Gn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Pt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qn(t.startAt,e.startAt)&&qn(t.endAt,e.endAt)}function H(t){return U.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.at,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return S(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();W.lt=new W("");var X,Y,J=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=D.min()),void 0===o&&(o=D.min()),void 0===s&&(s=W.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),$=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t){switch(t){case w.OK:return g();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return g()}}function Z(t){if(void 0===t)return d("GRPC error has no .code"),w.UNKNOWN;switch(t){case X.OK:return w.OK;case X.CANCELLED:return w.CANCELLED;case X.UNKNOWN:return w.UNKNOWN;case X.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case X.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case X.INTERNAL:return w.INTERNAL;case X.UNAVAILABLE:return w.UNAVAILABLE;case X.UNAUTHENTICATED:return w.UNAUTHENTICATED;case X.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case X.NOT_FOUND:return w.NOT_FOUND;case X.ALREADY_EXISTS:return w.ALREADY_EXISTS;case X.PERMISSION_DENIED:return w.PERMISSION_DENIED;case X.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case X.ABORTED:return w.ABORTED;case X.OUT_OF_RANGE:return w.OUT_OF_RANGE;case X.UNIMPLEMENTED:return w.UNIMPLEMENTED;case X.DATA_LOSS:return w.DATA_LOSS;default:return g()}}(Y=X||(X={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tt=function(){function t(t,e){this.$=t,this.root=e||nt.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,nt.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,nt.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new et(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new et(this.root,t,this.$,!1)},t.prototype.vt=function(){return new et(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new et(this.root,t,this.$,!0)},t}(),et=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw g();if(this.right.Mt())throw g();var t=this.left.Qt();if(t!==this.right.Qt())throw g();return t+(this.Mt()?0:1)},t}();nt.EMPTY=null,nt.RED=!0,nt.It=!1,nt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new nt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rt=function(){function t(t){this.$=t,this.data=new tt(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt((function(e,n){return t(e),!1}))},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new it(this.data.yt())},t.prototype.Vt=function(t){return new it(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),it=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),ot=new tt(U.$);function st(){return ot}function at(){return st()}var ut=new tt(U.$);function ct(){return ut}var ht=new tt(U.$),ft=new rt(U.$);function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ft,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new rt(S);function dt(){return pt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt=function(){function t(t){this.$=t?function(e,n){return t(e,n)||U.$(e.key,n.key)}:function(t,e){return U.$(t.key,e.key)},this.Ht=ct(),this.Jt=new tt(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),yt=function(){function t(){this.Xt=new tt(U.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):g():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt((function(e,n){t.push(n)})),t},t}(),gt=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vt.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&_n(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),mt=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,bt.he(e,n)),new t(D.min(),r,dt(),st(),lt())},t}(),bt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(W.lt,n,lt(),lt(),lt())},t}(),wt=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},It=function(t,e){this.targetId=t,this.Te=e},Et=function(t,e,n,r){void 0===n&&(n=W.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Tt=function(){function t(){this.Ie=0,this.me=At(),this.Ae=W.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=lt(),e=lt(),n=lt();return this.me.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new bt(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=At()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),_t=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=st(),this.Me=Ot(),this.ke=new rt(S)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof hn?this.Le(r,t.Ee):t.Ee instanceof fn&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Be(s,t.key,t.Ee)}},t.prototype.qe=function(t){var e=this;this.Ue(t,(function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:g()}}))},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach((function(t,r){n.Ke(r)&&e(r)}))},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(H(i))if(0===n){var o=new U(i.path);this.Be(e,o,new fn(o,D.min()))}else m(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach((function(r,i){var o=e.Ge(i);if(o){if(r.le&&H(o.target)){var s=new U(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new fn(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}}));var r=lt();this.Me.forEach((function(t,n){var i=!0;n.Wt((function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new mt(t,n,this.ke,this.Oe,r);return this.Oe=st(),this.Me=Ot(),this.ke=new rt(S),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Tt,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new rt(S),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Tt),this.xe.Xe(t).forEach((function(n){e.Be(t,n,null)}))},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return new tt(U.$)}function At(){return new tt(U.$)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nt(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function St(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xt(t){var e=Vt(t.mapValue.fields.__local_write_time__.timestampValue);return new C(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jt(t)?4:10:g()}function Pt(t,e){var n=Dt(t);if(n!==Dt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xt(t).isEqual(xt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vt(t.timestampValue),r=Vt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return qt(t.bytesValue).isEqual(qt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ft(t.geoPointValue.latitude)===Ft(e.geoPointValue.latitude)&&Ft(t.geoPointValue.longitude)===Ft(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ft(t.integerValue)===Ft(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ft(t.doubleValue),r=Ft(e.doubleValue);return n===r?F(n)===F(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return j(t.arrayValue.values||[],e.arrayValue.values||[],Pt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(kt(n)!==kt(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pt(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function Rt(t,e){return void 0!==(t.values||[]).find((function(t){return Pt(t,e)}))}function Lt(t,e){var n=Dt(t),r=Dt(e);if(n!==r)return S(n,r);switch(n){case 0:return 0;case 1:return S(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ft(t.integerValue||t.doubleValue),r=Ft(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Mt(t.timestampValue,e.timestampValue);case 4:return Mt(xt(t),xt(e));case 5:return S(t.stringValue,e.stringValue);case 6:return function(t,e){var n=qt(t),r=qt(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=S(n[i],r[i]);if(0!==o)return o}return S(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=S(Ft(t.latitude),Ft(e.latitude));return 0!==n?n:S(Ft(t.longitude),Ft(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Lt(n[i],r[i]);if(o)return o}return S(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=S(r[s],o[s]);if(0!==a)return a;var u=Lt(n[r[s]],i[o[s]]);if(0!==u)return u}return S(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function Mt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return S(t,e);var n=Vt(t),r=Vt(e),i=S(n.seconds,r.seconds);return 0!==i?i:S(n.nanos,r.nanos)}function Ut(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Vt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?qt(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,U.it(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):g();var n,r}(t)}function Vt(t){if(m(!!t),"string"==typeof t){var e=0,n=Ct.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function qt(t){return"string"==typeof t?W.fromBase64String(t):W.fromUint8Array(t)}function Bt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function zt(t){return!!t&&"integerValue"in t}function Gt(t){return!!t&&"arrayValue"in t}function Kt(t){return!!t&&"nullValue"in t}function Ht(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wt(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt={asc:"ASCENDING",desc:"DESCENDING"},Yt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jt=function(t,e){this.t=t,this.tn=e};function $t(t){return{integerValue:""+t}}function Qt(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F(e)?"-0":e}}function Zt(t,e){return q(e)?$t(e):Qt(t,e)}function te(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ee(t,e){return t.tn?e.toBase64():e.toUint8Array()}function ne(t,e){return te(t,e.M())}function re(t){return m(!!t),D.N(function(t){var e=Vt(t);return new C(e.seconds,e.nanos)}(t))}function ie(t,e){return function(t){return new R(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function oe(t){var e=R.Y(t);return m(ke(e)),e}function se(t,e){return ie(t.t,e.path)}function ae(t,e){var n=oe(e);if(n.get(1)!==t.t.projectId)throw new I(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new I(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new U(fe(n))}function ue(t,e){return ie(t.t,e)}function ce(t){var e=oe(t);return 4===e.length?R.X():fe(e)}function he(t){return new R(["projects",t.t.projectId,"databases",t.t.database]).J()}function fe(t){return m(t.length>4&&"documents"===t.get(4)),t.B(5)}function le(t,e,n){return{name:se(t,e),fields:n.proto.mapValue.fields}}function pe(t,e){var n;if(e instanceof $e)n={update:le(t,e.key,e.value)};else if(e instanceof rn)n={delete:se(t,e.key)};else if(e instanceof Qe)n={update:le(t,e.key,e.data),updateMask:Ae(e.en)};else if(e instanceof tn)n={transform:{document:se(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ce)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof De)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Re)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Me)return{fieldPath:e.field.J(),increment:n.nn};throw g()}(0,t)}))}};else{if(!(e instanceof on))return g();n={verify:se(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ne(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.rn)),n}function de(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ze.updateTime(re(t.updateTime)):void 0!==t.exists?ze.exists(t.exists):ze.on()}(e.currentDocument):ze.on();if(e.update){e.update.name;var r=ae(t,e.update.name),i=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Fe(e.map((function(t){return M.nt(t)})))}(e.updateMask);return new Qe(r,i,o,n)}return new $e(r,i,n)}if(e.delete){var s=ae(t,e.delete);return new rn(s,n)}if(e.transform){var a=ae(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=new Ce;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new De(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Re(i)}else"increment"in e?n=new Me(t,e.increment):g();var o=M.nt(e.fieldPath);return new qe(o,n)}(t,e)}));return m(!0===n.exists),new tn(a,u)}if(e.verify){var c=ae(t,e.verify);return new on(c,n)}return g()}function ve(t,e){return{documents:[ue(t,e.path)]}}function ye(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ue(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ue(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ht(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NAN"}};if(Kt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ht(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NOT_NAN"}};if(Kt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ee(t.field),op:Ie(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ee(t.field),direction:we(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||V(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=me(e.startAt)),e.endAt&&(n.structuredQuery.endAt=me(e.endAt)),n}function ge(t){var e=ce(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Oe(e)]:void 0!==e.fieldFilter?[_e(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):g():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Bn(Te(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return V(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=be(n.startAt));var h=null;return n.endAt&&(h=be(n.endAt)),dn(e,i,a,s,u,"F",c,h)}function me(t){return{before:t.before,values:t.position}}function be(t){var e=!!t.before,n=t.values||[];return new Un(n,e)}function we(t){return Xt[t]}function Ie(t){return Yt[t]}function Ee(t){return{fieldPath:t.J()}}function Te(t){return M.nt(t.fieldPath)}function _e(t){return Sn.create(Te(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Oe(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Te(t.unaryFilter.field);return Sn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Te(t.unaryFilter.field);return Sn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Te(t.unaryFilter.field);return Sn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Te(t.unaryFilter.field);return Sn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function Ae(t){var e=[];return t.fields.forEach((function(t){return e.push(t.J())})),{fieldPaths:e}}function ke(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne=function(){this.cn=void 0};function Se(t,e,n){return t instanceof Ce?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof De?Pe(t,e):t instanceof Re?Le(t,e):function(t,e){var n=xe(t,e),r=Ue(n)+Ue(t.nn);return zt(n)&&zt(t.nn)?$t(r):Qt(t.serializer,r)}(t,e)}function je(t,e,n){return t instanceof De?Pe(t,e):t instanceof Re?Le(t,e):n}function xe(t,e){return t instanceof Me?zt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ce=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n}(Ne),De=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.c)(n,t),n}(Ne);function Pe(t,e){for(var n=Ve(e),r=function(t){n.some((function(e){return Pt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Re=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.c)(n,t),n}(Ne);function Le(t,e){for(var n=Ve(e),r=function(t){n=n.filter((function(e){return!Pt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Me=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(e.c)(n,t),n}(Ne);function Ue(t){return Ft(t.integerValue||t.doubleValue)}function Ve(t){return Gt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe=function(){function t(t){this.fields=t,t.sort(M.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return j(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),qe=function(t,e){this.field=t,this.transform=e},Be=function(t,e){this.version=t,this.transformResults=e},ze=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ge(t,e){return void 0!==t.updateTime?e instanceof hn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof hn}var Ke=function(){};function He(t,e,n){return t instanceof $e?function(t,e,n){return new hn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Qe?function(t,e,n){if(!Ge(t.rn,e))return new ln(t.key,n.version);var r=Ze(t,e);return new hn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof tn?function(t,e,n){if(m(null!=n.transformResults),!Ge(t.rn,e))return new ln(t.key,n.version);var r=en(t,e),i=function(t,e,n){var r=[];m(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof hn&&(a=e.field(o.field)),r.push(je(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=nn(t,r.data(),i);return new hn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new fn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function We(t,e,n,r){return t instanceof $e?function(t,e){if(!Ge(t.rn,e))return e;var n=Je(e);return new hn(t.key,n,t.value,{an:!0})}(t,e):t instanceof Qe?function(t,e){if(!Ge(t.rn,e))return e;var n=Je(e),r=Ze(t,e);return new hn(t.key,n,r,{an:!0})}(t,e):t instanceof tn?function(t,e,n,r){if(!Ge(t.rn,e))return e;var i=en(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof hn&&(c=n.field(a.field)),null===c&&r instanceof hn&&(c=r.field(a.field)),i.push(Se(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=nn(t,i.data(),o);return new hn(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return Ge(t.rn,e)?new fn(t.key,D.min()):e}(t,e)}function Xe(t,e){return t instanceof tn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof hn?e.field(o.field):void 0,a=xe(o.transform,s||null);null!=a&&(n=null==n?(new an).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function Ye(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||j(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof De&&e instanceof De||t instanceof Re&&e instanceof Re?j(t.elements,e.elements,Pt):t instanceof Me&&e instanceof Me?Pt(t.nn,e.nn):t instanceof Ce&&e instanceof Ce}(t.transform,e.transform)}(t,e)})))}function Je(t){return t instanceof hn?t.version:D.min()}var $e=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(e.c)(n,t),n}(Ke),Qe=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(e.c)(n,t),n}(Ke);function Ze(t,e){return function(t,e){var n=new an(e);return t.en.fields.forEach((function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.hn()}(t,e instanceof hn?e.data():sn.empty())}var tn=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=ze.exists(!0),r}return Object(e.c)(n,t),n}(Ke);function en(t,e){return e}function nn(t,e,n){for(var r=new an(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.hn()}var rn=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(e.c)(n,t),n}(Ke),on=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(e.c)(n,t),n}(Ke),sn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Wt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Pt(this.proto,t.proto)},t}(),an=function(){function t(t){void 0===t&&(t=sn.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Dt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(M.X(),this._n);return null!=t?new sn(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Wt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function un(t){var e=[];return Nt(t.fields||{},(function(t,n){var r=new M([t]);if(Wt(n)){var i=un(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Fe(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var cn=function(t,e){this.key=t,this.version=e},hn=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(e.c)(n,t),n.prototype.field=function(t){return this.wn.field(t)},n.prototype.data=function(){return this.wn},n.prototype.En=function(){return this.wn.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(cn),fn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(e.c)(n,t),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(cn),ln=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(cn),pn=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null,this.startAt,this.endAt};function dn(t,e,n,r,i,o,s,a){return new pn(t,e,n,r,i,o,s,a)}function vn(t){return new pn(t)}function yn(t){return!V(t.limit)&&"F"===t.limitType}function gn(t){return!V(t.limit)&&"L"===t.limitType}function mn(t){return t.Tn.length>0?t.Tn[0].field:null}function bn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function wn(t){return null!==t.collectionGroup}function In(t){var e=b(t);if(null===e.In){e.In=[];var n=bn(e),r=mn(e);if(null!==n&&null===r)n.tt()||e.In.push(new Bn(n)),e.In.push(new Bn(M.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new Bn(M.et(),u))}}}return e.In}function En(t){var e=b(t);if(!e.mn)if("F"===e.limitType)e.mn=z(e.path,e.collectionGroup,In(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=In(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Bn(o.field,s))}var a=e.endAt?new Un(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Un(e.startAt.position,!e.startAt.before):null;e.mn=z(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.mn}function Tn(t,e,n){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _n(t,e){return K(En(t),En(e))&&t.limitType===e.limitType}function On(t){return G(En(t))+"|lt:"+t.limitType}function An(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.J()+" "+e.op+" "+Ut(e.value);var e})).join(", ")+"]"),V(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vn(t.startAt)),t.endAt&&(e+=", endAt: "+Vn(t.endAt)),"Target("+e+")"}(En(t))+"; limitType="+t.limitType+")"}function kn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):U.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Fn(t.startAt,In(t),e)||t.endAt&&Fn(t.endAt,In(t),e))}(t,e)}function Nn(t){return function(e,n){for(var r=!1,i=0,o=In(t);i<o.length;i++){var s=o[i],a=zn(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var Sn=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(e.c)(n,t),n.create=function(t,e,r){return t.tt()?"in"===e||"not-in"===e?this.Rn(t,e,r):new jn(t,e,r):"array-contains"===e?new Pn(t,r):"in"===e?new Rn(t,r):"not-in"===e?new Ln(t,r):"array-contains-any"===e?new Mn(t,r):new n(t,e,r)},n.Rn=function(t,e,n){return"in"===e?new xn(t,n):new Cn(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Lt(e,this.value)):null!==e&&Dt(this.value)===Dt(e)&&this.Pn(Lt(e,this.value))},n.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},n.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},n}((function(){})),jn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=U.it(r.referenceValue),i}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=U.$(t.key,this.key);return this.Pn(e)},n}(Sn),xn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Dn("in",n),r}return Object(e.c)(n,t),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(Sn),Cn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Dn("not-in",n),r}return Object(e.c)(n,t),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(Sn);function Dn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return U.it(t.referenceValue)}))}var Pn=function(t){function n(e,n){return t.call(this,e,"array-contains",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return Gt(e)&&Rt(e.arrayValue,this.value)},n}(Sn),Rn=function(t){function n(e,n){return t.call(this,e,"in",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Rt(this.value.arrayValue,e)},n}(Sn),Ln=function(t){function n(e,n){return t.call(this,e,"not-in",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){if(Rt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Rt(this.value.arrayValue,e)},n}(Sn),Mn=function(t){function n(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Gt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Rt(e.value.arrayValue,t)}))},n}(Sn),Un=function(t,e){this.position=t,this.before=e};function Vn(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ut(t)})).join(",")}function Fn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?U.$(U.it(s.referenceValue),n.key):Lt(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pt(t.position[n],e.position[n]))return!1;return!0}var Bn=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zn(t,e,n){var r=t.field.tt()?U.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Lt(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Gn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=He(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=We(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=We(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&j(this.mutations,t.mutations,(function(t,e){return Ye(t,e)}))&&j(this.baseMutations,t.baseMutations,(function(t,e){return Ye(t,e)}))},t}(),Hn=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=ht,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Wn=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.Cn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Nt(this.Nn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.W=function(){return St(this.Nn)},t}(),Xn=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t((function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)}),(function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&g(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t((function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}}))},t.prototype.Ln=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn((function(){return e(n)})):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.qn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.qn(r)},t}(),Yn=function(){function t(){this.Qn=new Wn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:D.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Xn.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),Jn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){return new Jt(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Zn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tr=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach((function(t){return t()}))},t}(),er=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t}))},t.prototype.ls=function(t,e,n){var r=at();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)})),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next((function(e){return n.fs(t,e)}))},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next((function(r){var i=n.ls(t,e,r),o=st();return i.forEach((function(t,e){e||(e=new fn(t,D.min())),o=o.Tt(t,e)})),o}))},t.prototype.ws=function(t,e,n){return function(t){return U.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):wn(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new U(e)).next((function(t){var e=ct();return t instanceof hn&&(e=e.Tt(t.key,t)),e}))},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=ct();return this.os.As(t,i).next((function(s){return Xn.forEach(s,(function(s){var a=function(t,e){return new pn(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Tt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next((function(n){return r=n,o.rs.Rs(t,e)})).next((function(e){return i=e,o.Ps(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),f=We(u,h,h,o.gn);r=f instanceof hn?r.Tt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){kn(e,n)||(r=r.remove(t))})),r}))},t.prototype.Ps=function(t,e,n){for(var r=lt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Qe&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof hn&&(c=c.Tt(t,e))})),c}))},t}(),nr=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=lt(),i=lt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),rr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();rr.Ds=-1;var ir=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,(function(){return e.$s=Date.now(),t()})),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),or=function(){function n(t,e,r){this.name=t,this.version=e,this.Ws=r,12.2===n.js(Object(o.g)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return n.delete=function(t){return p("SimpleDb","Removing database:",t),fr(window.indexedDB.deleteDatabase(t)).Ln()},n.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(n.zs())return!0;var t=Object(o.g)(),e=n.js(t),r=0<e&&e<10,i=n.Hs(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},n.zs=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.Js)},n.Ys=function(t,e){return t.store(e)},n.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},n.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},n.prototype.Xs=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),n=this,[4,new Promise((function(e,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){n(new ar(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var r=e.target.error;"VersionError"===r.name?n(new I(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new ar(t,r))},i.onupgradeneeded=function(t){p("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;r.Ws.createOrUpgrade(e,i.transaction,t.oldVersion,r.version).next((function(){p("SimpleDb","Database upgrade to version "+r.version+" complete")}))}}))]);case 1:n.db=e.sent(),e.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return r.Zs(t)}),this.db)]}}))}))},n.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},n.prototype.runTransaction=function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(e.d)(this,(function(h){switch(h.label){case 0:o="readonly"===n,s=0,a=function(){var n,a,c,h,f;return Object(e.d)(this,(function(e){switch(e.label){case 0:++s,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,u.Xs(t)];case 2:return u.db=e.sent(),n=cr.open(u.db,t,o?"readonly":"readwrite",r),a=i(n).catch((function(t){return n.abort(t),Xn.reject(t)})).Ln(),c={},a.catch((function(){})),[4,n.ei];case 3:return[2,(c.value=(e.sent(),a),c)];case 4:return h=e.sent(),f="FirebaseError"!==h.name&&s<3,p("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},n.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},n}(),sr=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return fr(this.ni.delete())},t}(),ar=function(t){function n(e,n){var r=this;return(r=t.call(this,w.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(e.c)(n,t),n}(I);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new Jn,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new ar(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=pr(e.target.error);n.ci.reject(new ar(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ar(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hr(e)},t}(),hr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),fr(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),fr(this.store.add(t))},t.prototype.get=function(t){var e=this;return fr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),fr(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),fr(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.hi=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,(function(t,e,n){return n.delete()}))},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Xn((function(n,r){e.onerror=function(t){var e=pr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ai=function(t,e){var n=[];return new Xn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof Xn){var a=s.catch((function(t){return o.done(),Xn.reject(t)}));n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}})).next((function(){return Xn.qn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function fr(t){return new Xn((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=pr(t.target.error);n(e)}}))}var lr=!1;function pr(t){var e=or.js(Object(o.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new I("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lr||(lr=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return"undefined"!=typeof window?window:null}function vr(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new Jn,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch((function(t){}))}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout((function(){return e.Ai()}),t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new I(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri((function(){return null!==t.mi?(t.clearTimeout(),t.op().then((function(e){return t.Ti.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),gr=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new ir(this,"async_queue_retry"),this.Di=function(){var e=vr();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=vr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=vr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise((function(t){})):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri((function(){return e.gi.push(t),e.ki()}))},t.prototype.ki=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(0===this.gi.length)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return e.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!ur(t=e.sent()))throw t;return p("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs((function(){return n.ki()})),e.label=5;case 5:return[2]}}))}))},t.prototype.Fi=function(t){var e=this,n=this.Pi.then((function(){return e.vi=!0,t().catch((function(t){throw e.pi=t,e.vi=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.vi=!1,t}))}));return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=yr.Ii(this,t,e,n,(function(t){return r.$i(t)}));return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&g()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(e.b)(this,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then((function(){e.Vi.sort((function(t,e){return t.wi-e.wi}));for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()}))},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function mr(t,e){if(d("AsyncQueue",e+": "+t),ur(t))return new I(w.UNAVAILABLE,e+": "+t);throw t}function br(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=S(n,i);return 0===s?S(r,o):s}var wr=function(){function t(t){this.Ki=t,this.buffer=new rt(br),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();br(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ir={zi:!1,Hi:0,Ji:0,Yi:0},Er=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Er.nr=10,Er.sr=1e3,Er.ir=new Er(41943040,Er.nr,Er.sr),Er.rr=new Er(-1,0,0);var Tr=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var n=this,r=this.ur?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ar=this.di.Us("lru_garbage_collection",r,(function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:this.ar=null,this.ur=!0,e.label=1;case 1:return e.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return e.sent(),[3,7];case 3:return ur(n=e.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n),[3,6]):[3,4];case 4:return[4,Ji(n)];case 5:e.sent(),e.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return e.sent(),[2]}}))}))}))},t}(),_r=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Xn.resolve(rr.Ds);var r=new wr(e);return this.dr.Ue(t,(function(t){return r.Gi(t.sequenceNumber)})).next((function(){return n.dr.Ir(t,(function(t){return r.Gi(t)}))})).next((function(){return r.maxValue}))},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Xn.resolve(Ir)):this.Pr(t).next((function(r){return r<n.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),Ir):n.gr(t,e)}))},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,o,s,a,u,c,h=this,f=Date.now();return this.wr(t,this.params.Zi).next((function(e){return e>h.params.tr?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.tr+" from "+e),r=h.params.tr):r=e,s=Date.now(),h.Tr(t,r)})).next((function(r){return n=r,a=Date.now(),h.mr(t,n,e)})).next((function(e){return o=e,u=Date.now(),h.Ar(t,n)})).next((function(t){return c=Date.now(),l()<=i.a.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-f)+"ms"),Xn.resolve({zi:!0,Hi:r,Ji:o,Yi:t})}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=kr(e)),e=Ar(t.get(n),e);return kr(e)}function Ar(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function kr(t){return t+""}function Nr(t){var e=t.length;if(m(e>=2),2===e)return m(""===t.charAt(0)&&""===t.charAt(1)),R.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&g(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:g()}o=s+2}return new R(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr=function(t){this.yr=t};function jr(t,e){if(e.document)return function(t,e,n){var r=ae(t,e.name),i=re(e.updateTime),o=new sn({mapValue:{fields:e.fields}});return new hn(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=U.ct(e.noDocument.path),r=Rr(e.noDocument.readTime);return new fn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=U.ct(e.unknownDocument.path),o=Rr(e.unknownDocument.version);return new ln(i,o)}return g()}function xr(t,e,n){var r=Cr(n),i=e.key.path.q().H();if(e instanceof hn){var o=function(t,e){return{name:se(t,e.key),fields:e.En().mapValue.fields,updateTime:te(t,e.version.M())}}(t.yr,e),s=e.hasCommittedMutations;return new ui(null,null,o,s,r,i)}if(e instanceof fn){var a=e.key.path.H(),u=Pr(e.version),c=e.hasCommittedMutations;return new ui(null,new si(a,u),null,c,r,i)}if(e instanceof ln){var h=e.key.path.H(),f=Pr(e.version);return new ui(new ai(h,f),null,null,!0,r,i)}return g()}function Cr(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Dr(t){var e=new C(t[0],t[1]);return D.N(e)}function Pr(t){var e=t.M();return new ei(e.seconds,e.nanoseconds)}function Rr(t){var e=new C(t.seconds,t.nanoseconds);return D.N(e)}function Lr(t,e){var n=(e.baseMutations||[]).map((function(e){return de(t.yr,e)})),r=e.mutations.map((function(e){return de(t.yr,e)})),i=C.fromMillis(e.localWriteTimeMs);return new Kn(e.batchId,i,n,r)}function Mr(t){var e,n,r=Rr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Rr(t.lastLimboFreeSnapshotVersion):D.min();return void 0!==t.query.documents?(m(1===(n=t.query).documents.length),e=En(vn(ce(n.documents[0])))):e=function(t){return En(ge(t))}(t.query),new J(e,t.targetId,0,t.lastListenSequenceNumber,r,i,W.fromBase64String(t.resumeToken))}function Ur(t,e){var n,r=Pr(e.ft),i=Pr(e.lastLimboFreeSnapshotVersion);n=H(e.target)?ve(t.yr,e.target):ye(t.yr,e.target);var o=e.resumeToken.toBase64();return new hi(e.targetId,G(e.target),r,o,e.sequenceNumber,i,n)}function Vr(t){var e=ge({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Tn(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return m(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zr(t)._i({index:ii.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Sr=function(t,e,n,r){var i=this,o=Gr(t),s=zr(t);return s.add({}).next((function(a){m("number"==typeof a);for(var u=new Kn(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return pe(t.yr,e)})),i=n.mutations.map((function(e){return pe(t.yr,e)}));return new ii(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),h=[],f=new rt((function(t,e){return S(t.J(),e.J())})),l=0,p=r;l<p.length;l++){var d=p[l],v=oi.key(i.userId,d.key.path,a);f=f.add(d.key.path.q()),h.push(s.put(c)),h.push(o.put(v,oi.PLACEHOLDER))}return f.forEach((function(e){h.push(i.os.Dr(t,e))})),t.es((function(){i.pr[a]=u.keys()})),Xn.qn(h).next((function(){return u}))}))},t.prototype.Cr=function(t,e){var n=this;return zr(t).get(e).next((function(t){return t?(m(t.userId===n.userId),Lr(n.serializer,t)):null}))},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?Xn.resolve(this.pr[e]):this.Cr(t,e).next((function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null}))},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zr(t)._i({index:ii.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=Lr(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zr(t)._i({index:ii.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zr(t).ui(ii.userMutationsIndex,n).next((function(t){return t.map((function(t){return Lr(e.serializer,t)}))}))},t.prototype.us=function(t,e){var n=this,r=oi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gr(t)._i({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Nr(u);if(a===n.userId&&e.path.isEqual(h))return zr(t).get(c).next((function(t){if(!t)throw g();m(t.userId===n.userId),o.push(Lr(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ds=function(t,e){var n=this,r=new rt(S),i=[];return e.forEach((function(e){var o=oi.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gr(t)._i({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Nr(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Xn.qn(i).next((function(){return n.kr(t,r)}))},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=oi.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new rt(S);return Gr(t)._i({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Nr(u);s===n.userId&&r.j(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.kr(t,a)}))},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(zr(t).get(e).next((function(t){if(null===t)throw g();m(t.userId===n.userId),r.push(Lr(n.serializer,t))})))})),Xn.qn(i).next((function(){return r}))},t.prototype.$r=function(t,e){var n=this;return Br(t.Lr,this.userId,e).next((function(r){return t.es((function(){n.Br(e.batchId)})),Xn.forEach(r,(function(e){return n.Vr.qr(t,e)}))}))},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next((function(n){if(!n)return Xn.resolve();var r=IDBKeyRange.lowerBound(oi.prefixForUser(e.userId)),i=[];return Gr(t)._i({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Nr(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.Qr=function(t,e){return qr(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return Kr(t).get(this.userId).next((function(t){return t||new ri(e.userId,-1,"")}))},t}();function qr(t,e,n){var r=oi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gr(t)._i({range:o,li:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Br(t,e,n){var r=t.store(ii.store),i=t.store(oi.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){m(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=oi.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Xn.qn(o).next((function(){return c}))}function zr(t){return xi.Ys(t,ii.store)}function Gr(t){return xi.Ys(t,oi.store)}function Kr(t){return xi.Ys(t,ri.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return Yr(t).put(Jr(e),n)},t.prototype.Hn=function(t,e){var n=Yr(t),r=Jr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Wr(t,r)}))},t.prototype.Jn=function(t,e){var n=this;return Yr(t).get(Jr(e)).next((function(t){return n.jr(t)}))},t.prototype.Gr=function(t,e){var n=this;return Yr(t).get(Jr(e)).next((function(t){var e=n.jr(t);return e?{zn:e,size:$r(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=at();return this.zr(t,e,(function(t,e){var i=n.jr(e);r=r.Tt(t,i)})).next((function(){return r}))},t.prototype.Hr=function(t,e){var n=this,r=at(),i=new tt(U.$);return this.zr(t,e,(function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,$r(e))):(r=r.Tt(t,null),i=i.Tt(t,0))})).next((function(){return{Jr:r,Yr:i}}))},t.prototype.zr=function(t,e,n){if(e.W())return Xn.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return Yr(t)._i({range:r},(function(t,e,r){for(var s=U.ct(t);o&&U.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null}))},t.prototype.ws=function(t,e,n){var r=this,i=ct(),o=e.path.length+1,s={};if(n.isEqual(D.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=Cr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ui.collectionReadTimeIndex}return Yr(t)._i(s,(function(t,n,s){if(t.length===o){var a=jr(r.serializer,n);e.path.j(a.key.path)?a instanceof hn&&kn(e,a)&&(i=i.Tt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Xr=function(t){return new Wr(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Xr(t).get(ci.key).next((function(t){return m(!!t),t}))},t.prototype.Wr=function(t,e){return Xr(t).put(ci.key,e)},t.prototype.jr=function(t){if(t){var e=jr(this.serializer,t);return e instanceof fn&&e.version.isEqual(D.min())?null:e}return null},t}(),Wr=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new Wn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(e.c)(n,t),n.prototype.Zn=function(t){var e=this,n=[],r=0,i=new rt((function(t,e){return S(t.J(),e.J())}));return this.Qn.forEach((function(o,s){var a=e.so.get(o);if(s.zn){var u=xr(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=$r(u);r+=c-a,n.push(e.no.jn(t,o,u))}else if(r-=a,e.Zr){var h=xr(e.no.serializer,new fn(o,D.min()),e.Wn(o));n.push(e.no.jn(t,o,h))}else n.push(e.no.Hn(t,o))})),i.forEach((function(r){n.push(e.no.os.Dr(t,r))})),n.push(this.no.updateMetadata(t,r)),Xn.qn(n)},n.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next((function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)}))},n.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next((function(t){var e=t.Jr;return t.Yr.forEach((function(t,e){n.so.set(t,e)})),e}))},n}(Yn);function Xr(t){return xi.Ys(t,ci.store)}function Yr(t){return xi.Ys(t,ui.store)}function Jr(t){return t.path.H()}function $r(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr=function(){function t(){this.io=new Zr}return t.prototype.Dr=function(t,e){return this.io.add(e),Xn.resolve()},t.prototype.As=function(t,e){return Xn.resolve(this.io.getEntries(e))},t}(),Zr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new rt(R.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rt(R.$)).H()},t}(),ti=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new cr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ni.store)}(t),function(t){t.createObjectStore(ri.store,{keyPath:ri.keyPath}),t.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0}),t.createObjectStore(oi.store)}(t),di(t),function(t){t.createObjectStore(ui.store)}(t));var s=Xn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fi.store),t.deleteObjectStore(hi.store),t.deleteObjectStore(li.store)}(t),di(t)),s=s.next((function(){return function(t){var e=t.store(li.store),n=new li(0,0,D.min().M(),0);return e.put(li.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ii.store).ui().next((function(n){t.deleteObjectStore(ii.store),t.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0});var r=e.store(ii.store),i=n.map((function(t){return r.put(t)}));return Xn.qn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(vi.store,{keyPath:vi.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ci.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ui.store);e.createIndex(ui.readTimeIndex,ui.readTimeIndexPath,{unique:!1}),e.createIndex(ui.collectionReadTimeIndex,ui.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(yi.store,{keyPath:yi.keyPath})}(t),function(t){t.createObjectStore(gi.store,{keyPath:gi.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(ui.store)._i((function(t,n){e+=$r(n)})).next((function(){var n=new ci(e);return t.store(ci.store).put(ci.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ri.store),r=t.store(ii.store);return n.ui().next((function(n){return Xn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(ii.userMutationsIndex,i).next((function(r){return Xn.forEach(r,(function(r){m(r.userId===n.userId);var i=Lr(e.serializer,r);return Br(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(fi.store),n=t.store(ui.store);return t.store(li.store).get(li.key).next((function(t){var r=[];return n._i((function(n,i){var o=new R(n),s=function(t){return[0,Or(t)]}(o);r.push(e.get(s).next((function(n){return n?Xn.resolve():function(n){return e.put(new fi(0,Or(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Xn.qn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(pi.store,{keyPath:pi.keyPath});var n=e.store(pi.store),r=new Zr,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:Or(i)})}};return e.store(ui.store)._i({li:!0},(function(t,e){var n=new R(t);return i(n.q())})).next((function(){return e.store(oi.store)._i({li:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Nr(n));return i(r.q())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(hi.store);return n._i((function(t,r){var i=Mr(r),o=Ur(e.serializer,i);return n.put(o)}))},t}(),ei=function(t,e){this.seconds=t,this.nanoseconds=e},ni=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ni.store="owner",ni.key="owner";var ri=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ri.store="mutationQueues",ri.keyPath="userId";var ii=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ii.store="mutations",ii.keyPath="batchId",ii.userMutationsIndex="userMutationsIndex",ii.userMutationsKeyPath=["userId","batchId"];var oi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Or(e)]},t.key=function(t,e,n){return[t,Or(e),n]},t}();oi.store="documentMutations",oi.PLACEHOLDER=new oi;var si=function(t,e){this.path=t,this.readTime=e},ai=function(t,e){this.path=t,this.version=e},ui=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ui.store="remoteDocuments",ui.readTimeIndex="readTimeIndex",ui.readTimeIndexPath="readTime",ui.collectionReadTimeIndex="collectionReadTimeIndex",ui.collectionReadTimeIndexPath=["parentPath","readTime"];var ci=function(t){this.byteSize=t};ci.store="remoteDocumentGlobal",ci.key="remoteDocumentGlobalKey";var hi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hi.store="targets",hi.keyPath="targetId",hi.queryTargetsIndexName="queryTargetsIndex",hi.queryTargetsKeyPath=["canonicalId","targetId"];var fi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};fi.store="targetDocuments",fi.keyPath=["targetId","path"],fi.documentTargetsIndex="documentTargetsIndex",fi.documentTargetsKeyPath=["path","targetId"];var li=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};li.key="targetGlobalKey",li.store="targetGlobal";var pi=function(t,e){this.collectionId=t,this.parent=e};function di(t){t.createObjectStore(fi.store,{keyPath:fi.keyPath}).createIndex(fi.documentTargetsIndex,fi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hi.store,{keyPath:hi.keyPath}).createIndex(hi.queryTargetsIndexName,hi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(li.store)}pi.store="collectionParents",pi.keyPath=["collectionId","parent"];var vi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};vi.store="clientMetadata",vi.keyPath="clientId";var yi=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};yi.store="bundles",yi.keyPath="bundleId";var gi=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};gi.store="namedQueries",gi.keyPath="name";var mi=Object(e.g)(Object(e.g)(Object(e.g)(Object(e.g)([ri.store,ii.store,oi.store,ui.store,hi.store,ni.store,li.store,fi.store],[vi.store]),[ci.store]),[pi.store]),[yi.store,gi.store]),bi=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return wi(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Rr(e.createTime),version:e.version};var e}))},t.prototype.oo=function(t,e){return wi(t).put({bundleId:(n=e).id,createTime:Pr(re(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return Ii(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Vr(e.bundledQuery),readTime:Rr(e.readTime)};var e}))},t.prototype.uo=function(t,e){return Ii(t).put(function(t){return{name:t.name,readTime:Pr(re(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){return xi.Ys(t,yi.store)}function Ii(t){return xi.Ys(t,gi.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ei=function(){function t(){this.ao=new Zr}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es((function(){n.ao.add(e)}));var o={collectionId:r,parent:Or(i)};return Ti(t).put(o)}return Xn.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[x(e),""],!1,!0);return Ti(t).ui(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Nr(o.parent))}return n}))},t}();function Ti(t){return xi.Ys(t,pi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),Oi=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next((function(n){var r=new _i(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.To=function(t){return this.wo(t).next((function(t){return D.N(new C(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Io=function(t){return this.wo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)}))},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next((function(){return n.wo(t).next((function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)}))}))},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next((function(){return Ai(t).delete(e.targetId)})).next((function(){return n.wo(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)}))},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Ai(t)._i((function(s,a){var u=Mr(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Vo(t,u)))})).next((function(){return Xn.qn(o)})).next((function(){return i}))},t.prototype.Ue=function(t,e){return Ai(t)._i((function(t,n){var r=Mr(n);e(r)}))},t.prototype.wo=function(t){return ki(t).get(li.key).next((function(t){return m(null!==t),t}))},t.prototype.Eo=function(t,e){return ki(t).put(li.key,e)},t.prototype.Ro=function(t,e){return Ai(t).put(Ur(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next((function(t){return t.targetCount}))},t.prototype.bo=function(t,e){var n=G(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ai(t)._i({range:r,index:hi.queryTargetsIndexName},(function(t,n,r){var o=Mr(n);K(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.So=function(t,e,n){var r=this,i=[],o=Ni(t);return e.forEach((function(e){var s=Or(e.path);i.push(o.put(new fi(n,s))),i.push(r.Vr.Do(t,n,e))})),Xn.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=Ni(t);return Xn.forEach(e,(function(e){var o=Or(e.path);return Xn.qn([i.delete([n,o]),r.Vr.No(t,n,e)])}))},t.prototype.po=function(t,e){var n=Ni(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ni(t),i=lt();return r._i({range:n,li:!0},(function(t,e,n){var r=Nr(t[1]),o=new U(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Qr=function(t,e){var n=Or(e.path),r=IDBKeyRange.bound([n],[x(n)],!1,!0),i=0;return Ni(t)._i({index:fi.documentTargetsIndex,li:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ze=function(t,e){return Ai(t).get(e).next((function(t){return t?Mr(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t){return xi.Ys(t,hi.store)}function ki(t){return xi.Ys(t,li.store)}function Ni(t){return xi.Ys(t,fi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ji=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(e.c)(n,t),n}(tr),xi=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Oo=c,this.Mo=h,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new I(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new Pi(this,i),this.Ko=n+"main",this.serializer=new Sr(u),this.Wo=new or(this.Ko,11,new ti(this.serializer)),this.jo=new Oi(this.Vr,this.serializer),this.os=new Ei,this.ss=function(t,e){return new Hr(t,e)}(this.serializer,this.os),this.Go=new bi(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===h&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof ji)return or.Ys(t.Lr,e);throw g()},t.prototype.start=function(){var t=this;return this.Ho().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new I(w.FAILED_PRECONDITION,Si);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.jo.Io(e)}))})).then((function(e){t.ko=new rr(e,t.Oo)})).then((function(){t.$o=!0})).catch((function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)}))},t.prototype.Zo=function(t){var n=this;return this.Qo=function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return this.lr?[2,t(r)]:[2]}))}))},t(this.isPrimary)},t.prototype.tc=function(t){var n=this;this.Wo.ti((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.ec=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Di(e).put(new vi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nc(e).next((function(e){e||(t.isPrimary=!1,t.Cs.Mi((function(){return t.Qo(!1)})))}))})).next((function(){return t.sc(e)})).next((function(n){return t.isPrimary&&!n?t.ic(e).next((function(){return!1})):!!n&&t.rc(e).next((function(){return!0}))}))})).catch((function(e){if(ur(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Cs.Mi((function(){return t.Qo(e)})),t.isPrimary=e}))},t.prototype.nc=function(t){var e=this;return Ci(t).get(ni.key).next((function(t){return Xn.resolve(e.oc(t))}))},t.prototype.cc=function(t){return Di(t).delete(this.clientId)},t.prototype.uc=function(){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o,s=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Ys(e,vi.store);return n.ui().next((function(t){var e=s.hc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Xn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(n=e.sent(),this.zo)for(r=0,i=n;r<i.length;r++)o=i[r],this.zo.removeItem(this.lc(o.clientId));e.label=2;case 2:return[2]}}))}))},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,(function(){return t.Ho().then((function(){return t.uc()})).then((function(){return t.Xo()}))}))},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?Xn.resolve(!0):Ci(t).get(ni.key).next((function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new I(w.FAILED_PRECONDITION,Si);return!1}}return!(!e.networkEnabled||!e.inForeground)||Di(t).ui().next((function(t){return void 0===e.hc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.fc=function(){return Object(e.b)(this,void 0,void 0,(function(){var t=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[ni.store,vi.store],(function(e){var n=new ji(e,rr.Ds);return t.ic(n).next((function(){return t.cc(n)}))}))];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}}))}))},t.prototype.hc=function(t,e){var n=this;return t.filter((function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)}))},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Di(e).ui().next((function(e){return t.hc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Fr.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;p("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wo.runTransaction(t,o,mi,(function(o){return i=new ji(o,r.ko?r.ko.next():rr.Ds),"readwrite-primary"===e?r.nc(i).next((function(t){return!!t||r.sc(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Cs.Mi((function(){return r.Qo(!1)})),new I(w.FAILED_PRECONDITION,Zn);return n(i)})).next((function(t){return r.rc(i).next((function(){return t}))})):r.yc(i).next((function(){return n(i)}))})).then((function(t){return i.ns(),t}))},t.prototype.yc=function(t){var e=this;return Ci(t).get(ni.key).next((function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new I(w.FAILED_PRECONDITION,Si)}))},t.prototype.rc=function(t){var e=new ni(this.clientId,this.allowTabSynchronization,Date.now());return Ci(t).put(ni.key,e)},t.Gs=function(){return or.Gs()},t.prototype.ic=function(t){var e=this,n=Ci(t);return n.get(ni.key).next((function(t){return e.oc(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(ni.key)):Xn.resolve()}))},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()}))},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri((function(){return e.fc()}))},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ci(t){return xi.Ys(t,ni.store)}function Di(t){return xi.Ys(t,vi.store)}var Pi=function(){function t(t,e){this.db=t,this.cr=new _r(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Vc=function(t){var e=0;return this.Ir(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,(function(t,n){return e(n)}))},t.prototype.Do=function(t,e,n){return Ri(t,n)},t.prototype.No=function(t,e,n){return Ri(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return Ri(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return Kr(t).fi((function(r){return qr(t,r,e).next((function(t){return t&&(n=!0),Xn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,(function(s,a){if(a<=e){var u=n.bc(t,s).next((function(e){if(!e)return o++,r.Jn(t,s).next((function(){return r.Hn(s),Ni(t).delete([0,Or(s.path)])}))}));i.push(u)}})).next((function(){return Xn.qn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return Ri(t,e)},t.prototype.vc=function(t,e){var n,r=Ni(t),i=rr.Ds;return r._i({index:fi.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==rr.Ds&&e(new U(Nr(n)),i),i=a,n=s):i=rr.Ds})).next((function(){i!==rr.Ds&&e(new U(Nr(n)),i)}))},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function Ri(t,e){return Ni(t).put(function(t,e){return new fi(0,Or(t.path),e)}(e,t.Fo))}function Li(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mi=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new tt(S),this.Nc=new Wn((function(t){return G(t)}),K),this.xc=D.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new er(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Rr(n,e.Cc)}))},t}();function Ui(t,e,n,r){return new Mi(t,e,n,r)}function Vi(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=b(t),i=r.rs,o=r.Oc,[4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.rs.Mr(t).next((function(s){return e=s,i=r.persistence.mc(n),o=new er(r.Fc,i,r.persistence.Pc()),i.Mr(t)})).next((function(n){for(var r=[],i=[],s=lt(),a=0,u=e;a<u.length;a++){var c=u[a];r.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=n;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o._s(t,s).next((function(t){return{kc:t,$c:r,Lc:i}}))}))}))];case 1:return s=e.sent(),[2,(r.rs=i,r.Oc=o,r.Dc.Mc(r.Oc),s)]}}))}))}function Fi(t,e){var n=b(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Xn.resolve();return o.forEach((function(t){s=s.next((function(){return r.Jn(e,t)})).next((function(e){var o=e,s=n.Sn.get(t);m(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)}))})),s.next((function(){return t.rs.$r(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}function qi(t){var e=b(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.jo.To(t)}))}function Bi(t,e){var n=b(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.jo.Co(t,e.de,o).next((function(){return n.jo.So(t,e._e,o)})));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return m(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.jo.yo(t,c))}}}));var a=st();if(e.ce.forEach((function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))})),s.push(function(t,e,n,r,i){var o=lt();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=st();return n.forEach((function(n,o){var s=t.get(n),a=r;o instanceof fn&&o.version.isEqual(D.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.ce,r).next((function(t){a=t}))),!r.isEqual(D.min())){var u=n.jo.To(t).next((function(e){return n.jo.mo(t,t.Fo,r)}));s.push(u)}return Xn.qn(s).next((function(){return o.apply(t)})).next((function(){return n.Oc.fs(t,a)}))})).then((function(t){return n.Cc=i,t}))}function zi(t,e){var n=b(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)}))}function Gi(t,e){var n=b(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.jo.bo(t,e).next((function(i){return i?(r=i,Xn.resolve(r)):n.jo.fo(t).next((function(i){return r=new J(e,i,0,t.Fo),n.jo.Ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t}))}function Ki(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=b(t),o=i.Cc.get(n),s=r?"readwrite":"readwrite-primary",e.label=1;case 1:return e.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.Vr.removeTarget(t,o)}))];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:if(!ur(a=e.sent()))throw a;return p("LocalStore","Failed to update sequence numbers for target "+n+": "+a),[3,5];case 5:return i.Cc=i.Cc.remove(n),i.Nc.delete(o.target),[2]}}))}))}function Hi(t,e,n){var r=b(t),i=D.min(),o=lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=b(t),i=r.Nc.get(n);return void 0!==i?Xn.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,En(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Dc.ws(t,e,n?i:D.min(),n?o:lt())})).next((function(t){return{documents:t,Bc:o}}))}))}function Wi(t,e){var n=b(t),r=b(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ze(t,e).next((function(t){return t?t.target:null}))}))}function Xi(t){var e=b(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=b(t),i=st(),o=Cr(n),s=Yr(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:ui.readTimeIndex,range:a},(function(t,e){var n=jr(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime})).next((function(){return{qc:i,readTime:Dr(o)}}))}(e.Fc,t,e.xc)})).then((function(t){var n=t.qc,r=t.readTime;return e.xc=r,n}))}function Yi(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){return[2,(n=b(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Yr(t),n=D.min();return e._i({index:ui.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Dr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){n.xc=t}))]}))}))}function Ji(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){if(t.code!==w.FAILED_PRECONDITION||t.message!==Zn)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new ir(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,(function(){return t.Xc()})))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){return this.zc()?[2,this.close(0)]:[2]}))}))},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(d(n.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):n&&n.code===w.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then((function(e){t.Wc===n&&t.iu(e)}),(function(n){e((function(){var e=new I(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)}))}))},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu((function(){n((function(){return e.state=2,e.listener.cu()}))})),this.stream.nu((function(t){n((function(){return e.ru(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs((function(){return Object(e.b)(t,void 0,void 0,(function(){return Object(e.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.ru=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri((function(){return e.Wc===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qi=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(e.c)(n,t),n.prototype.ou=function(t){return this.Qc.uu("Listen",t)},n.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(m(void 0===e||"string"==typeof e),W.fromBase64String(e||"")):(m(void 0===e||e instanceof Uint8Array),W.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?w.UNKNOWN:Z(t.code);return new I(e,t.message||"")}(s);n=new Et(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=ae(t,u.document.name),h=re(u.document.updateTime),f=new sn({mapValue:{fields:u.document.fields}}),l=new hn(c,h,f,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new wt(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=ae(t,v.document),b=v.readTime?re(v.readTime):D.min(),E=new fn(y,b),T=v.removedTargetIds||[];n=new wt([],T,E.key,E)}else if("documentRemove"in e){e.documentRemove;var _=e.documentRemove;_.document;var O=ae(t,_.document),A=_.removedTargetIds||[];n=new wt([],A,O,null)}else{if(!("filter"in e))return g();e.filter;var k=e.filter;k.targetId;var N=k.count||0,S=new $(N),j=k.targetId;n=new It(j,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return D.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?D.min():e.readTime?re(e.readTime):D.min()}(t);return this.listener.au(e,n)},n.prototype.hu=function(t){var e={};e.database=he(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=H(r)?{documents:ve(t,r)}:{query:ye(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=ee(t,e.resumeToken):e.ft.F(D.min())>0&&(n.readTime=te(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Zc(e)},n.prototype.lu=function(t){var e={};e.database=he(this.serializer),e.removeTarget=t,this.Zc(e)},n}($i),Zi=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),n.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},n.prototype.eu=function(){this._u&&this.du([])},n.prototype.ou=function(t){return this.Qc.uu("Write",t)},n.prototype.onMessage=function(t){if(m(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(m(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?re(t.updateTime):re(e);n.isEqual(D.min())&&(n=re(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Be(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=re(t.commitTime);return this.listener.wu(n,e)}return m(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},n.prototype.Tu=function(){var t={};t.database=he(this.serializer),this.Zc(t)},n.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return pe(e.serializer,t)}))};this.Zc(n)},n}($i),to=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(e.c)(n,t),n.prototype.mu=function(){if(this.Iu)throw new I(w.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Au(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Ru(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.terminate=function(){this.Iu=!1},n}((function(){})),eo=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,(function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()})))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(d(e),this.Vu=!1):p("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),no=function(t,n,r,i,o){var s=this;this.Cu=t,this.Nu=n,this.di=r,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=o,this.$u.Lu((function(t){r.Ri((function(){return Object(e.b)(s,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return fo(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(n=b(t)).Mu.add(4),[4,io(n)];case 1:return e.sent(),n.Bu.set("Unknown"),n.Mu.delete(4),[4,ro(n)];case 2:return e.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Bu=new eo(r,i)};function ro(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(!fo(t))return[3,4];n=0,r=t.ku,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!0)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function io(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:n=0,r=t.ku,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!1)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function oo(t,e){var n=b(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),ho(n)?co(n):ko(n).zc()&&ao(n,e))}function so(t,e){var n=b(t),r=ko(n);n.Ou.delete(e),r.zc()&&uo(n,e),0===n.Ou.size&&(r.zc()?r.Yc():fo(n)&&n.Bu.set("Unknown"))}function ao(t,e){t.qu.De(e.targetId),ko(t).hu(e)}function uo(t,e){t.qu.De(e),ko(t).lu(e)}function co(t){t.qu=new _t({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),ko(t).start(),t.Bu.pu()}function ho(t){return fo(t)&&!ko(t).Gc()&&t.Ou.size>0}function fo(t){return 0===b(t).Mu.size}function lo(t){t.qu=void 0}function po(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return t.Ou.forEach((function(e,n){ao(t,e)})),[2]}))}))}function vo(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return lo(t),ho(t)?(t.Bu.Su(n),co(t)):t.Bu.set("Unknown"),[2]}))}))}function yo(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s;return Object(e.d)(this,(function(a){switch(a.label){case 0:if(t.Bu.set("Online"),!(n instanceof Et&&2===n.state&&n.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=n.cause,i=0,o=n.targetIds,e.label=1;case 1:return i<o.length?(s=o[i],t.Ou.has(s)?[4,t.xu.Uu(s,r)]:[3,3]):[3,5];case 2:e.sent(),t.Ou.delete(s),t.qu.removeTarget(s),e.label=3;case 3:e.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,n)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),p("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),[4,go(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(n instanceof wt?t.qu.$e(n):n instanceof It?t.qu.je(n):t.qu.qe(n),r.isEqual(D.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,qi(t.Cu)];case 8:return o=a.sent(),r.F(o)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach((function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}})),n.oe.forEach((function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt(W.lt,n.ft)),uo(t,e);var r=new J(n.target,e,1,n.sequenceNumber);ao(t,r)}})),t.xu.Qu(n)}(t,r)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,go(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function go(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:if(!ur(n))throw n;return t.Mu.add(1),[4,io(t)];case 1:return o.sent(),t.Bu.set("Offline"),r||(r=function(){return qi(t.Cu)}),t.di.Mi((function(){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return e.sent(),t.Mu.delete(1),[4,ro(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function mo(t,e){return e().catch((function(n){return go(t,n,e)}))}function bo(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:n=b(t),r=No(n),i=n.Fu.length>0?n.Fu[n.Fu.length-1].batchId:-1,e.label=1;case 1:if(!function(t){return fo(t)&&t.Fu.length<10}(n))return[3,7];e.label=2;case 2:return e.trys.push([2,4,,6]),[4,zi(n.Cu,i)];case 3:return null===(o=e.sent())?(0===n.Fu.length&&r.Yc(),[3,7]):(i=o.batchId,function(t,e){t.Fu.push(e);var n=No(t);n.zc()&&n.fu&&n.du(e.mutations)}(n,o),[3,6]);case 4:return s=e.sent(),[4,go(n,s)];case 5:return e.sent(),[3,6];case 6:return[3,1];case 7:return wo(n)&&Io(n),[2]}}))}))}function wo(t){return fo(t)&&!No(t).Gc()&&t.Fu.length>0}function Io(t){No(t).start()}function Eo(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return No(t).Tu(),[2]}))}))}function To(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(e.d)(this,(function(e){for(n=No(t),r=0,i=t.Fu;r<i.length;r++)o=i[r],n.du(o.mutations);return[2]}))}))}function _o(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return i=t.Fu.shift(),o=Hn.from(i,n,r),[4,mo(t,(function(){return t.xu.Ku(o)}))];case 1:return e.sent(),[4,bo(t)];case 2:return e.sent(),[2]}}))}))}function Oo(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(r){switch(r.label){case 0:return n&&No(t).fu?[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return Q(i=n.code)&&i!==w.ABORTED?(r=t.Fu.shift(),No(t).Jc(),[4,mo(t,(function(){return t.xu.Wu(r.batchId,n)}))]):[3,3];case 1:return e.sent(),[4,bo(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}(t,n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return wo(t)&&Io(t),[2]}}))}))}function Ao(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=b(t),n?(r.Mu.delete(2),[4,ro(r)]):[3,2];case 1:return e.sent(),[3,5];case 2:return n?[3,4]:(r.Mu.add(2),[4,io(r)]);case 3:e.sent(),r.Bu.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))}function ko(t){var n=this;return t.ju||(t.ju=function(t,e,n){var r=b(t);return r.mu(),new Qi(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:po.bind(null,t),nu:vo.bind(null,t),au:yo.bind(null,t)}),t.ku.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return r?(t.ju.Jc(),ho(t)?co(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),lo(t),e.label=3;case 3:return[2]}}))}))}))),t.ju}function No(t){var n=this;return t.Gu||(t.Gu=function(t,e,n){var r=b(t);return r.mu(),new Zi(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:Eo.bind(null,t),nu:Oo.bind(null,t),Eu:To.bind(null,t),wu:_o.bind(null,t)}),t.ku.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return r?(t.Gu.Jc(),[4,bo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(p("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}}))}))}))),t.Gu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var So=function(){this.zu=void 0,this.listeners=[]},jo=function(){this.queries=new Wn((function(t){return On(t)}),_n),this.onlineState="Unknown",this.Hu=new Set};function xo(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(r=b(t),i=n.query,o=!1,(s=r.queries.get(i))||(o=!0,s=new So),!o)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),a=s,[4,r.Ju(i)];case 2:return a.zu=e.sent(),[3,4];case 3:return u=e.sent(),c=mr(u,"Initialization of query '"+An(n.query)+"' failed"),[2,void n.onError(c)];case 4:return r.queries.set(i,s),s.listeners.push(n),n.Yu(r.onlineState),s.zu&&n.Xu(s.zu)&&Ro(r),[2]}}))}))}function Co(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(e.d)(this,(function(e){return r=b(t),i=n.query,o=!1,(s=r.queries.get(i))&&(a=s.listeners.indexOf(n))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(r.queries.delete(i),r.Zu(i))]:[2]}))}))}function Do(t,e){for(var n=b(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Xu(s)&&(r=!0);u.zu=s}}r&&Ro(n)}function Po(t,e,n){var r=b(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ro(t){t.Hu.forEach((function(t){t.next()}))}var Lo=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gt(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.oa&&n||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){if(t.docChanges.length>0)return!0;var e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.ne&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=gt.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),Mo=function(){function t(){this.ca=new rt(Uo.ua),this.aa=new rt(Uo.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new Uo(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach((function(t){return n.Do(t,e)}))},t.prototype.No=function(t,e){this._a(new Uo(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach((function(t){return n.No(t,e)}))},t.prototype.da=function(t){var e=this,n=new U(new R([])),r=new Uo(n,t),i=new Uo(n,t+1),o=[];return this.aa.Kt([r,i],(function(t){e._a(t),o.push(t.key)})),o},t.prototype.wa=function(){var t=this;this.ca.forEach((function(e){return t._a(e)}))},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new U(new R([])),n=new Uo(e,t),r=new Uo(e,t+1),i=lt();return this.aa.Kt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Qr=function(t){var e=new Uo(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Uo=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return U.$(t.key,e.key)||S(t.Ta,e.Ta)},t.ha=function(t,e){return S(t.Ta,e.Ta)||U.$(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t,e){return"firestore_clients_"+t+"_"+e}function Fo(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function qo(t,e){return"firestore_targets_"+t+"_"+e}var Bo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new I(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new I(r.error.code,r.error.message)),i?new t(e,r.state,o):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Go=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=dt(),s=0;i&&s<r.activeTargetIds.length;++s)i=q(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ko=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ho=function(){function t(){this.activeTargetIds=dt()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Wo=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new tt(S),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=Vo(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new Ho),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,h,f,l=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,this.ga.Ic()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Pa&&(o=this.getItem(Vo(this.persistenceKey,i)))&&(s=Go.Ia(i,o))&&(this.pa=this.pa.Tt(s.clientId,s));for(this.Oa(),(a=this.storage.getItem(this.xa))&&(u=this.Ma(a))&&this.ka(u),c=0,h=this.va;c<h.length;c++)f=h[c],this.Va(f);return this.va=[],this.window.addEventListener("unload",(function(){return l.fc()})),this.lr=!0,[2]}}))}))},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(qo(this.persistenceKey,t));if(n){var r=zo.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(qo(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach((function(t){r.Ka(t)})),this.currentUser=t,n.forEach((function(t){r.qa(t)}))},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(p("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ba)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi((function(){return Object(e.b)(n,void 0,void 0,(function(){var t,n,i,o,s,a;return Object(e.d)(this,(function(e){if(this.lr){if(null!==r.key)if(this.Da.test(r.key)){if(null==r.newValue)return t=this.sh(r.key),[2,this.ih(t,null)];if(n=this.rh(r.key,r.newValue))return[2,this.ih(n.clientId,n)]}else if(this.Ca.test(r.key)){if(null!==r.newValue&&(i=this.oh(r.key,r.newValue)))return[2,this.uh(i)]}else if(this.Na.test(r.key)){if(null!==r.newValue&&(o=this.ah(r.key,r.newValue)))return[2,this.hh(o)]}else if(r.key===this.xa){if(null!==r.newValue&&(s=this.Ma(r.newValue)))return[2,this.ka(s)]}else if(r.key===this.Sa)(a=function(t){var e=rr.Ds;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(r.newValue))!==rr.Ds&&this.ps(a);else if(r.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(r);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new Bo(this.currentUser,t,e,n),i=Fo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=Fo(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){var e={clientId:this.Pa,onlineState:t};this.storage.setItem(this.xa,JSON.stringify(e))},t.prototype.Ya=function(t,e,n){var r=qo(this.persistenceKey,t),i=new zo(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Go.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bo.Ia(new h(i),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return zo.Ia(r,e)},t.prototype.Ma=function(t){return Ko.Ia(t)},t.prototype.uh=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.ga.dh(s,a).then((function(){n.pa=r}))},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=dt();return t.forEach((function(t,n){e=e.Gt(n.activeTargetIds)})),e},t}(),Xo=function(){function t(){this.wh=new Ho,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Ho,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),Yo=function(t){this.key=t},Jo=function(t){this.key=t},$o=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=lt(),this.ee=lt(),this.Ah=Nn(t),this.Rh=new vt(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new yt,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,a=!1,u=yn(this.query)&&i.size===this.query.limit?i.last():null,c=gn(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt((function(t,e){var h=i.get(t),f=e instanceof hn?e:null;f&&(f=kn(n.query,f)?f:null);var l=!!h&&n.ee.has(h.key),p=!!f&&(f.an||n.ee.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Vh(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.Ah(f,u)>0||c&&n.Ah(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),yn(this.query)||gn(this.query))for(;s.size>this.query.limit;){var h=yn(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Rh:s,yh:r,ph:a,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.le?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new gt(this.query,t.Rh,i,o,t.ee,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new yt,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach((function(t){return e.Th=e.Th.add(t)})),t.fe.forEach((function(t){})),t.de.forEach((function(t){return e.Th=e.Th.delete(t)})),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=lt(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new Jo(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new Yo(t))})),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=lt();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return gt.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),Qo=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Zo=function(t){this.key=t,this.Fh=!1},ts=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Wn((function(t){return On(t)}),_n),this.qh=new Map,this.Uh=[],this.Qh=new tt(U.$),this.Kh=new Map,this.Wh=new Mo,this.jh={},this.Gh=new Map,this.zh=_i._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function es(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=js(t),(s=r.Bh.get(n))?(i=s.targetId,r.kh.Wa(i),o=s.view.xh(),[3,4]):[3,1];case 1:return[4,Gi(r.Cu,En(n))];case 2:return a=e.sent(),u=r.kh.Wa(a.targetId),i=a.targetId,[4,ns(r,n,i,"current"===u)];case 3:o=e.sent(),r.Jh&&oo(r.Oh,a),e.label=4;case 4:return[2,o]}}))}))}function ns(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,a,u,c,h;return Object(e.d)(this,(function(f){switch(f.label){case 0:return t.Yh=function(n,r,i){return function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(o=n.view.gh(r)).ph?[4,Hi(t.Cu,n.query,!1).then((function(t){var e=t.documents;return n.view.gh(e,o)}))]:[3,2];case 1:o=e.sent(),e.label=2;case 2:return s=i&&i.re.get(n.targetId),a=n.view.Zn(o,t.Jh,s),[2,(vs(t,n.targetId,a.Dh),a.snapshot)]}}))}))}(t,n,r,i)},[4,Hi(t.Cu,n,!0)];case 1:return o=f.sent(),s=new $o(n,o.Bc),a=s.gh(o.documents),u=bt.he(r,i&&"Offline"!==t.onlineState),c=s.Zn(a,t.Jh,u),vs(t,r,c.Dh),h=new Qo(n,r,s),[2,(t.Bh.set(n,h),t.qh.has(r)?t.qh.get(r).push(n):t.qh.set(r,[n]),c.snapshot)]}}))}))}function rs(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=b(t),i=r.Bh.get(n),(o=r.qh.get(i.targetId)).length>1?[2,(r.qh.set(i.targetId,o.filter((function(t){return!_n(t,n)}))),void r.Bh.delete(n))]:r.Jh?(r.kh.Ga(i.targetId),r.kh.Ba(i.targetId)?[3,2]:[4,Ki(r.Cu,i.targetId,!1).then((function(){r.kh.Ha(i.targetId),so(r.Oh,i.targetId),ps(r,i.targetId)})).catch(Ji)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return ps(r,i.targetId),[4,Ki(r.Cu,i.targetId,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}}))}))}function is(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=xs(t),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,function(t,e){var n,r=b(t),i=C.now(),o=e.reduce((function(t,e){return t.add(e.key)}),lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Oc._s(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Xe(c,n.get(c.key));null!=h&&s.push(new Qe(c.key,h,un(h.proto.mapValue),ze.exists(!0)))}return r.rs.Sr(t,i,s,e)}))})).then((function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}}))}(i.Cu,n)];case 2:return o=e.sent(),i.kh.qa(o.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new tt(S)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(i,o.batchId,r),[4,ms(i,o.Qn)];case 3:return e.sent(),[4,bo(i.Oh)];case 4:return e.sent(),[3,6];case 5:return s=e.sent(),a=mr(s,"Failed to persist write"),r.reject(a),[3,6];case 6:return[2]}}))}))}function os(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=b(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Bi(r.Cu,n)];case 2:return i=e.sent(),n.re.forEach((function(t,e){var n=r.Kh.get(e);n&&(m(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?n.Fh=!0:t.fe.size>0?m(n.Fh):t.de.size>0&&(m(n.Fh),n.Fh=!1))})),[4,ms(r,i,n)];case 3:return e.sent(),[3,6];case 4:return[4,Ji(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function ss(t,e,n){var r=b(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=b(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)})),r&&Ro(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function as(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(i=b(t)).kh.Ja(n,"rejected",r),o=i.Kh.get(n),(s=o&&o.key)?(a=(a=new tt(U.$)).Tt(s,new fn(s,D.min())),u=lt().add(s),c=new mt(D.min(),new Map,new rt(S),a,u),[4,os(i,c)]):[3,2];case 1:return e.sent(),i.Qh=i.Qh.remove(s),i.Kh.delete(n),gs(i),[3,4];case 2:return[4,Ki(i.Cu,n,!1).then((function(){return ps(i,n,r)})).catch(Ji)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}function us(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=b(t),i=n.batch.batchId,e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Fi(r.Cu,n)];case 2:return o=e.sent(),ls(r,i,null),fs(r,i),r.kh.Qa(i,"acknowledged"),[4,ms(r,o)];case 3:return e.sent(),[3,6];case 4:return[4,Ji(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function cs(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=b(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.rs.Cr(t,e).next((function(e){return m(null!==e),r=e.keys(),n.rs.$r(t,e)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}(i.Cu,n)];case 2:return o=e.sent(),ls(i,n,r),fs(i,n),i.kh.Qa(n,"rejected",r),[4,ms(i,o)];case 3:return e.sent(),[3,6];case 4:return[4,Ji(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function hs(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:fo((r=b(t)).Oh)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(t){var e=b(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.rs.Or(t)}))}(r.Cu)];case 2:return-1===(i=e.sent())?[2,void n.resolve()]:((o=r.Gh.get(i)||[]).push(n),r.Gh.set(i,o),[3,4]);case 3:return s=e.sent(),a=mr(s,"Initialization of waitForPendingWrites() operation failed"),n.reject(a),[3,4];case 4:return[2]}}))}))}function fs(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function ls(t,e,n){var r=b(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function ps(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach((function(e){t.Wh.Qr(e)||ds(t,e)}))}function ds(t,e){var n=t.Qh.get(e);null!==n&&(so(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),gs(t))}function vs(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yo?(t.Wh.Do(o.key,e),ys(t,o)):o instanceof Jo?(p("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||ds(t,o.key)):g()}}function ys(t,e){var n=e.key;t.Qh.get(n)||(p("SyncEngine","New document in limbo: "+n),t.Uh.push(n),gs(t))}function gs(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new Zo(e)),t.Qh=t.Qh.Tt(e,n),oo(t.Oh,new J(En(vn(e.path)),n,2,rr.Ds))}}function ms(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a;return Object(e.d)(this,(function(u){switch(u.label){case 0:return i=b(t),o=[],s=[],a=[],i.Bh.W()?[3,3]:(i.Bh.forEach((function(t,e){a.push(i.Yh(e,n,r).then((function(t){if(t){i.Jh&&i.kh.Ja(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=nr.Vs(e.targetId,t);s.push(n)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.Lh.au(o),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,f;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=b(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Xn.forEach(n,(function(e){return Xn.forEach(e.gs,(function(n){return r.persistence.Vr.Do(t,e.targetId,n)})).next((function(){return Xn.forEach(e.ys,(function(n){return r.persistence.Vr.No(t,e.targetId,n)}))}))}))}))];case 2:return e.sent(),[3,4];case 3:if(!ur(i=e.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=n;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=r.Cc.get(u),h=c.ft,f=c.Et(h),r.Cc=r.Cc.Tt(u,f));return[2]}}))}))}(i.Cu,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function bs(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(r=b(t)).currentUser.isEqual(n)?[3,3]:(p("SyncEngine","User change. New user:",n.h()),[4,Vi(r.Cu,n)]);case 1:return i=e.sent(),r.currentUser=n,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new I(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(r),r.kh.Xa(n,i.$c,i.Lc),[4,ms(r,i.kc)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}function ws(t,e){var n=b(t),r=n.Kh.get(e);if(r&&r.Fh)return lt().add(r.key);var i=lt(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Bh.get(u);i=i.Gt(c.view.Ph)}return i}function Is(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Hi((r=b(t)).Cu,n.query,!0)];case 1:return i=e.sent(),o=n.view.Nh(i),[2,(r.Jh&&vs(r,n.targetId,o.Dh),o)]}}))}))}function Es(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){return[2,Xi((n=b(t)).Cu).then((function(t){return ms(n,t)}))]}))}))}function Ts(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,function(t,e){var n=b(t),r=b(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Nr(t,e).next((function(e){return e?n.Oc._s(t,e):Xn.resolve(null)}))}))}((o=b(t)).Cu,n)];case 1:return null===(s=e.sent())?[3,6]:"pending"!==r?[3,3]:[4,bo(o.Oh)];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(ls(o,n,i||null),fs(o,n),function(t,e){b(b(t).rs).Br(e)}(o.Cu,n)):g(),e.label=4;case 4:return[4,ms(o,s)];case 5:return e.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+n),e.label=7;case 7:return[2]}}))}))}function _s(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h;return Object(e.d)(this,(function(e){switch(e.label){case 0:return js(r=b(t)),xs(r),!0!==n||!0===r.Hh?[3,3]:(i=r.kh.$a(),[4,Os(r,i.H())]);case 1:return o=e.sent(),r.Hh=!0,[4,Ao(r.Oh,!0)];case 2:for(e.sent(),s=0,a=o;s<a.length;s++)u=a[s],oo(r.Oh,u);return[3,7];case 3:return!1!==n||!1===r.Hh?[3,7]:(c=[],h=Promise.resolve(),r.qh.forEach((function(t,e){r.kh.za(e)?c.push(e):h=h.then((function(){return ps(r,e),Ki(r.Cu,e,!0)})),so(r.Oh,e)})),[4,h]);case 4:return e.sent(),[4,Os(r,c)];case 5:return e.sent(),function(t){var e=b(t);e.Kh.forEach((function(t,n){so(e.Oh,n)})),e.Wh.wa(),e.Kh=new Map,e.Qh=new tt(U.$)}(r),r.Hh=!1,[4,Ao(r.Oh,!1)];case 6:e.sent(),e.label=7;case 7:return[2]}}))}))}function Os(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,f,l,p,d,v,y;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=b(t),i=[],o=[],s=0,a=n,e.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=r.qh.get(u))&&0!==h.length?[4,Gi(r.Cu,En(h[0]))]:[3,7]):[3,13];case 2:c=e.sent(),f=0,l=h,e.label=3;case 3:return f<l.length?(p=l[f],d=r.Bh.get(p),[4,Is(r,d)]):[3,6];case 4:(v=e.sent()).snapshot&&o.push(v.snapshot),e.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Wi(r.Cu,u)];case 8:return y=e.sent(),[4,Gi(r.Cu,y)];case 9:return c=e.sent(),[4,ns(r,As(y),u,!1)];case 10:e.sent(),e.label=11;case 11:i.push(c),e.label=12;case 12:return s++,[3,1];case 13:return[2,(r.Lh.au(o),i)]}}))}))}function As(t){return dn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ks(t){var e=b(t);return b(b(e.Cu).persistence).Ic()}function Ns(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(o=b(t)).Hh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.qh.has(n))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xi(o.Cu)];case 3:return s=e.sent(),a=mt.ae(n,"current"===r),[4,ms(o,s,a)];case 4:return e.sent(),[3,8];case 5:return[4,Ki(o.Cu,n,!0)];case 6:return e.sent(),ps(o,n,i),[3,8];case 7:g(),e.label=8;case 8:return[2]}}))}))}function Ss(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,f,l,d;return Object(e.d)(this,(function(v){switch(v.label){case 0:if(!(i=js(t)).Hh)return[3,10];o=0,s=n,v.label=1;case 1:return o<s.length?(a=s[o],i.qh.has(a)?(p("SyncEngine","Adding an already active target "+a),[3,5]):[4,Wi(i.Cu,a)]):[3,6];case 2:return u=v.sent(),[4,Gi(i.Cu,u)];case 3:return c=v.sent(),[4,ns(i,As(u),c.targetId,!1)];case 4:v.sent(),oo(i.Oh,c),v.label=5;case 5:return o++,[3,1];case 6:h=function(t){return Object(e.d)(this,(function(e){switch(e.label){case 0:return i.qh.has(t)?[4,Ki(i.Cu,t,!1).then((function(){so(i.Oh,t),ps(i,t)})).catch(Ji)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=r,v.label=7;case 7:return f<l.length?(d=l[f],[5,h(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function js(t){var e=b(t);return e.Oh.xu.Qu=os.bind(null,e),e.Oh.xu.Xe=ws.bind(null,e),e.Oh.xu.Uu=as.bind(null,e),e.Lh.au=Do.bind(null,e.Mh),e.Lh.Xh=Po.bind(null,e.Mh),e}function xs(t){var e=b(t);return e.Oh.xu.Ku=us.bind(null,e),e.Oh.xu.Wu=cs.bind(null,e),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(D.min())?this.tl(t,e):this.Zh._s(t,r).next((function(s){var a=o.el(e,s);return(yn(e)||gn(e))&&o.ph(e.limitType,a,r,n)?o.tl(t,e):(l()<=i.a.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),An(e)),o.Zh.ws(t,e,n).next((function(t){return a.forEach((function(e){t=t.Tt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new rt(Nn(t));return e.forEach((function(e,r){r instanceof hn&&kn(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return l()<=i.a.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",An(e)),this.Zh.ws(t,e,D.min())},t}(),Ds=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new rt(Uo.ua)}return t.prototype.br=function(t){return Xn.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++,this.rs.length>0&&this.rs[this.rs.length-1];var o=new Kn(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Uo(u.key,i)),this.os.Dr(t,u.key.path.q())}return Xn.resolve(o)},t.prototype.Cr=function(t,e){return Xn.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=e+1,r=this.rl(n),i=r<0?0:r;return Xn.resolve(this.rs.length>i?this.rs[i]:null)},t.prototype.Or=function(){return Xn.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return Xn.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Uo(e,0),i=new Uo(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],(function(t){var e=n.il(t.Ta);o.push(e)})),Xn.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new rt(S);return e.forEach((function(t){var e=new Uo(t,0),i=new Uo(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],(function(t){r=r.add(t.Ta)}))})),Xn.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;U.ot(i)||(i=i.child(""));var o=new Uo(new U(i),0),s=new rt(S);return this.sl.Wt((function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)}),o),Xn.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.$r=function(t,e){var n=this;m(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Xn.forEach(e.mutations,(function(i){var o=new Uo(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new Uo(e,0),r=this.sl.jt(n);return Xn.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return this.rs.length,Xn.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Ps=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new tt(U.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Xn.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=at();return e.forEach((function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)})),Xn.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=ct(),i=new U(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.key,u=s.value,c=u.zn,h=u.readTime;if(!e.path.j(a.path))break;h.F(n)<=0||c instanceof hn&&kn(e,c)&&(r=r.Tt(c.key,c))}return Xn.resolve(r)},t.prototype.al=function(t,e){return Xn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Xr=function(t){return new Rs(this)},t.prototype.eo=function(t){return Xn.resolve(this.size)},t}(),Rs=function(t){function n(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(e.c)(n,t),n.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach((function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)})),Xn.qn(n)},n.prototype.Yn=function(t,e){return this.no.Jn(t,e)},n.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},n}(Yn),Ls=function(){function t(t){this.persistence=t,this.hl=new Wn((function(t){return G(t)}),K),this.lastRemoteSnapshotVersion=D.min(),this.highestTargetId=0,this.ll=0,this._l=new Mo,this.targetCount=0,this.fl=_i.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Xn.resolve()},t.prototype.To=function(t){return Xn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return Xn.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),Xn.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Xn.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new _i(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,Xn.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),Xn.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,Xn.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.po(t,a.targetId)),i++)})),Xn.qn(o).next((function(){return i}))},t.prototype.vo=function(t){return Xn.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return Xn.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),Xn.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach((function(e){i.push(r.qr(t,e))})),Xn.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),Xn.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return Xn.resolve(n)},t.prototype.Qr=function(t,e){return Xn.resolve(this._l.Qr(e))},t}(),Ms=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return Xn.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:re(n.createTime)}),Xn.resolve()},t.prototype.co=function(t,e){return Xn.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:Vr(n.bundledQuery),readTime:re(n.readTime)}),Xn.resolve()},t}(),Us=function(){function t(t,e){var n=this;this.El={},this.ko=new rr(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new Ls(this),this.os=new Qr,this.ss=function(t,e){return new Ps(t,(function(t){return n.Vr.Tl(t)}))}(this.os),this.serializer=new Sr(e),this.Go=new Ms(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new Ds(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Vs(this.ko.next());return this.Vr.Il(),n(i).next((function(t){return r.Vr.ml(i).next((function(){return t}))})).Ln().then((function(t){return i.ns(),t}))},t.prototype.Al=function(t,e){return Xn.Un(Object.values(this.El).map((function(n){return function(){return n.Qr(t,e)}})))},t}(),Vs=function(t){function n(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(e.c)(n,t),n}(tr),Fs=function(){function t(t){this.persistence=t,this.Rl=new Mo,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw g()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),Xn.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),Xn.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),Xn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach((function(t){return n.yl.add(t.toString())}));var r=this.persistence.Ac();return r.xo(t,e.targetId).next((function(t){t.forEach((function(t){return n.yl.add(t.toString())}))})).next((function(){return r.Vo(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return Xn.forEach(this.yl,(function(r){var i=U.st(r);return e.Vl(t,i).next((function(t){t||n.Hn(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next((function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())}))},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Xn.Un([function(){return Xn.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),qs=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Bs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},zs=function(t){function n(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(e.c)(n,t),n.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var a=new s.f;a.listenOnce(s.c.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.a.NO_ERROR:var e=a.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.a.TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),o(new I(w.DEADLINE_EXCEEDED,"Request time out"));break;case s.a.HTTP_ERROR:var n=a.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(w).indexOf(e)>=0?e:w.UNKNOWN}(r.status);o(new I(u,r.message))}else o(new I(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new I(w.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);a.send(e,"POST",u,n,15)}))},n.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s.g)(),i=Object(s.h)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(a.initMessageHeaders,e),Object(o.l)()||Object(o.n)()||Object(o.j)()||Object(o.k)()||Object(o.o)()||Object(o.i)()||(a.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");p("Connection","Creating WebChannel: "+u,a);var c=r.createWebChannel(u,a),h=!1,f=!1,l=new qs({pl:function(t){f?p("Connection","Not sending because WebChannel is closed:",t):(h||(p("Connection","Opening WebChannel transport."),c.open(),h=!0),p("Connection","WebChannel sending:",t),c.send(t))},vl:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,s.e.EventType.OPEN,(function(){f||p("Connection","WebChannel transport opened.")})),d(c,s.e.EventType.CLOSE,(function(){f||(f=!0,p("Connection","WebChannel transport closed"),l.Nl())})),d(c,s.e.EventType.ERROR,(function(t){f||(f=!0,v("Connection","WebChannel transport errored:",t),l.Nl(new I(w.UNAVAILABLE,"The operation could not be completed")))})),d(c,s.e.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];m(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){p("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=X[t];if(void 0!==e)return Z(e)}(o),a=i.message;void 0===s&&(s=w.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),f=!0,l.Nl(new I(s,a)),c.close()}else p("Connection","WebChannel received:",n),l.xl(n)}})),d(i,s.b.STAT_EVENT,(function(t){t.stat===s.d.PROXY?p("Connection","Detected buffering proxy"):t.stat===s.d.NOPROXY&&p("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Cl()}),0),l},n}(function(){function t(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);p("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return p("RestConnection","Received: ",t),t}),(function(e){throw v("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){var n=Bs[t];return this.Ol+"/v1/"+e+":"+n},t}()),Gs=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ks=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),Hs=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.serializer=$n(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Ui(this.persistence,new Cs,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Us(Fs.gl,this.serializer)},t.prototype.jl=function(t){return new Xo},t.prototype.terminate=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}}))}))},t}(),Ws=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(e.c)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return e.sent(),[4,Yi(this.Cu)];case 2:return e.sent(),[4,this.Xl.initialize(this,n)];case 3:return e.sent(),[4,xs(this.Xl.ga)];case 4:return e.sent(),[4,bo(this.Xl.Oh)];case 5:return e.sent(),[2]}}))}))},n.prototype.Jl=function(t){return Ui(this.persistence,new Cs,t.Yl,this.serializer)},n.prototype.Hl=function(t){var e=this.persistence.Vr.cr;return new Tr(e,t.di)},n.prototype.Gl=function(t){var e=Li(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Er.er(this.cacheSizeBytes):Er.ir;return new xi(this.synchronizeTabs,e,t.clientId,n,t.di,dr(),vr(),this.serializer,this.kh,!!this.forceOwnership)},n.prototype.jl=function(t){return new Xo},n}(Hs),Xs=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(e.c)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){var r,i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Xl.ga,this.kh instanceof Wo?(this.kh.ga={_h:Ts.bind(null,r),fh:Ns.bind(null,r),dh:Ss.bind(null,r),Ic:ks.bind(null,r),lh:Es.bind(null,r)},[4,this.kh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Zo((function(t){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,_s(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},n.prototype.jl=function(t){var e=dr();if(!Wo.Gs(e))throw new I(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Li(t.Fl.t,t.Fl.persistenceKey);return new Wo(e,t.di,n,t.clientId,t.Yl)},n}(Ws),Ys=function(){function t(){}return t.prototype.initialize=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(n),this.Oh=this.t_(n),this.Mh=this.e_(n),this.ga=this.n_(n,!t.synchronizeTabs),this.kh.Pu=function(t){return ss(r.ga,t,1)},this.Oh.xu.s_=bs.bind(null,this.ga),[4,Ao(this.Oh,this.ga.Jh)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new jo},t.prototype.Zl=function(t){var e,n=$n(t.Fl.t),r=(e=t.Fl,new zs(e));return function(t,e,n){return new to(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return ss(s.ga,t,0)},o=Gs.Gs()?new Gs:new Ks,new no(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new ts(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=b(t),p("RemoteStore","RemoteStore shutting down."),n.Mu.add(5),[4,io(n)];case 1:return e.sent(),n.$u.fc(),n.Bu.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),Js=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),$s=function(t){this.o_=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e,n){if(!n)throw new I(w.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zs(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new I(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ta(t,e,n,r){if(!0===e&&!0===r)throw new I(w.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ea(t){if(!U.ot(t))throw new I(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function na(t){if(U.ot(t))throw new I(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ra(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function ia(t,e){if(t instanceof $s&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new I(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ra(t);throw new I(w.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function oa(t,e){if(e<=0)throw new I(w.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sa=function(t){this.c_=t},aa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.u_=function(t){if(2!==t.a_)throw 1===t.a_?t.h_(this.c_+"() can only appear at the top level of your update data"):t.h_(this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(sa);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t,e,n){return new fu({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var ca=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.u_=function(t){return new qe(t.path,new Ce)},n.prototype.isEqual=function(t){return t instanceof n},n}(sa),ha=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(e.c)(n,t),n.prototype.u_=function(t){var e=ua(this,t,!0),n=this.f_.map((function(t){return gu(t,e)})),r=new De(n);return new qe(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(sa),fa=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(e.c)(n,t),n.prototype.u_=function(t){var e=ua(this,t,!0),n=this.f_.map((function(t){return gu(t,e)})),r=new Re(n);return new qe(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(sa),la=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(e.c)(n,t),n.prototype.u_=function(t){var e=new Me(t.serializer,Zt(t.serializer,this.d_));return new qe(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(sa),pa=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new I(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new I(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return S(this.w_,t.w_)||S(this.E_,t.E_)},t}(),da=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t(W.fromBase64String(e))}catch(e){throw new I(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(W.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),va=new Map,ya=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new I(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new I(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ta("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ga=function(){function t(t,e){this.I_="(lite)",this.m_=new ya({}),this.A_=!1,t instanceof c?(this.R_=t,this.P_=new T):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new I(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c(t.options.projectId)}(t),this.P_=new _(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new I(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new I(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new ya(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new T;switch(t.type){case"gapi":var e=t.client;return m(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new A(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new I(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=va.get(t);e&&(p("ComponentProvider","Removing Datastore"),va.delete(t),e.terminate())}(this),Promise.resolve()},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(){if("undefined"==typeof Uint8Array)throw new I(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ba(){if("undefined"==typeof atob)throw new I(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.fromBase64String=function(t){return ba(),new n(da.fromBase64String(t))},n.fromUint8Array=function(t){return ma(),new n(da.fromUint8Array(t))},n.prototype.toBase64=function(){return ba(),this.o_.toBase64()},n.prototype.toUint8Array=function(){return ma(),this.o_.toUint8Array()},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}($s),Ia=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),Dt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(qt(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw g()}},t.prototype.L_=function(t,e){var n=this,r={};return Nt(t.fields||{},(function(t,i){r[t]=n.C_(i,e)})),r},t.prototype.M_=function(t){return new pa(Ft(t.latitude),Ft(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.C_(t,e)}))},t.prototype.x_=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return jt(n)?t(n):n}(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(xt(t));default:return null}},t.prototype.N_=function(t){var e=Vt(t);return new C(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=R.Y(t);m(ke(n));var r=new c(n.get(1),n.get(3)),i=new U(n.B(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Ea=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.F_=function(t){return new wa(new da(t))},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return Yu.q_(e,this.firestore,null)},n}(Ia),Ta=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fa(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new _a(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(Oa("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),_a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(){return t.prototype.data.call(this)},n}(Ta);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,e){return"string"==typeof e?Tu(t,e):e instanceof $s?e.o_.G_:e.G_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aa=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new I(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new M(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),ka=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new gr,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(e.c)(n,t),n.prototype.D_=function(){return this.H_||Hu(this),this.H_.terminate()},n}(ga);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t,n,r){var i=this,o=new Jn;return t.di.enqueue((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Su(t,r)];case 1:return e.sent(),[4,ju(t,n)];case 2:return e.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=e.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Sa(t){if(t.y_||t.V_)throw new I(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ja=function(t){function n(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).U_=e,a.J_=e,a.metadata=o,a}return Object(e.c)(n,t),n.prototype.exists=function(){return t.prototype.exists.call(this)},n.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new xa(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},n.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(Oa("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},n}(Ta),xa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},n}(ja),Ca=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new Zu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach((function(r){t.call(e,new xa(n.U_,n.Q_,r.key,r,new Zu(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new I(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map((function(e){var r=new xa(t.U_,t.Q_,e.doc.key,e.doc,new Zu(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.Y_.te;return t.Y_.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new xa(t.U_,t.Q_,e.doc.key,e.doc,new Zu(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Da(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Z_=e),this.X_},t}();function Da(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Pa(t,e){return t instanceof ja&&e instanceof ja?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof Ca&&e instanceof Ca&&t.U_===e.U_&&ou(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ra=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.F_=function(t){return new da(t)},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Fa(this.firestore,null,e)},n}(Ia);function La(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=ia(t.firestore,ka),s=su(o);return e instanceof $s&&(e=e.o_),Ua(o,("string"==typeof e||e instanceof Aa?vu(s,"updateDoc",t.K_,e,n,r):du(s,"updateDoc",t.K_,e)).ef(t.K_,ze.exists(!0)))}function Ma(t){for(var n,r,i,o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Qn(s[c])||(u=s[c],c++);var h,f,l,p={includeMetadataChanges:u.includeMetadataChanges};if(Qn(s[c])){var d=s[c];s[c]=null===(n=d.next)||void 0===n?void 0:n.bind(d),s[c+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),s[c+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}if(t instanceof Fa)f=ia(t.firestore,ka),l=vn(t.K_.path),h={next:function(e){s[c]&&s[c](Va(f,t,e))},error:s[c+1],complete:s[c+2]};else{f=ia(t.firestore,ka),l=t.tf;var v=new Ra(f);h={next:function(e){s[c]&&s[c](new Ca(f,v,t,e))},error:s[c+1],complete:s[c+2]},Za(t.tf)}var y=Ku(f),g=new Js(h),m=new Lo(l,g,p);return f.z_.Ri((function(){return Object(e.b)(o,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return t=xo,[4,Mu(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}}))}))})),function(){g.r_(),f.z_.Ri((function(){return Object(e.b)(o,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return t=Co,[4,Mu(y)];case 1:return[2,t.apply(void 0,[e.sent(),m])]}}))}))}))}}function Ua(t,n){return function(t,n){var r=this,i=new Jn;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=is,[4,Lu(t)];case 1:return[2,r.apply(void 0,[e.sent(),n,i])]}}))}))})),i.promise}(Ku(t),n)}function Va(t,e,n){var r=n.docs.get(e.K_),i=new Ra(t);return new ja(t,i,e.K_,r,new Zu(n.hasPendingWrites,n.fromCache),e.j_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fa=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tu(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),qa=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),Ba=function(){};function za(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var Ga=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(e.c)(n,t),n.prototype.sf=function(t){var e=su(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new I(w.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$a(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Ja(r,t,f))}a={arrayValue:{values:u}}}else a=Ja(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$a(s,o),a=yu(n,"where",s,"in"===o||"not-in"===o);var l=Sn.create(i,o,a);return function(t,e){if(e.An()){var n=bn(t);if(null!==n&&!n.isEqual(e.field))throw new I(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=mn(t);null!==r&&Qa(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new I(w.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new I(w.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new qa(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new pn(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},n}(Ba),Ka=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(e.c)(n,t),n.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new I(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new I(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bn(e,n);return function(t,e){if(null===mn(t)){var n=bn(t);null!==n&&Qa(t,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new qa(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new pn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},n}(Ba),Ha=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(e.c)(n,t),n.prototype.sf=function(t){return new qa(t.firestore,t.j_,Tn(t.tf,this.hf,this.lf))},n}(Ba),Wa=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(e.c)(n,t),n.prototype.sf=function(t){var e=Ya(t,this.type,this._f,this.ff);return new qa(t.firestore,t.j_,function(t,e){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},n}(Ba),Xa=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(e.c)(n,t),n.prototype.sf=function(t){var e=Ya(t,this.type,this._f,this.ff);return new qa(t.firestore,t.j_,function(t,e){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},n}(Ba);function Ya(t,e,n,r){if(n[0]instanceof $s&&(n[0]=n[0].o_),n[0]instanceof Ta)return function(t,e,n,r,i){if(!r)throw new I(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=In(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(Bt(e,r.key));else{var c=r.field(u.field);if(jt(c))throw new I(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.J();throw new I(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Un(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=su(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new I(w.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new I(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wn(t)&&-1!==c.indexOf("/"))throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(R.Y(c));if(!U.ot(h))throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new U(h);a.push(Bt(e,f))}else{var l=yu(n,r,c);a.push(l)}}return new Un(a,o)}(t.tf,t.firestore.R_,i,e,n,r)}function Ja(t,e,n){if(n instanceof $s&&(n=n.o_),"string"==typeof n){if(""===n)throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wn(e)&&-1!==n.indexOf("/"))throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(R.Y(n));if(!U.ot(r))throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Bt(t,new U(r))}if(n instanceof Fa)return Bt(t,n.K_);throw new I(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ra(n)+".")}function $a(t,e){if(!Array.isArray(t)||0===t.length)throw new I(w.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new I(w.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Qa(t,e,n){if(!n.isEqual(e))throw new I(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Za(t){if(gn(t)&&0===t.Tn.length)throw new I(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tu=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,vn(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new Fa(this.firestore,null,new U(t))},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this.nf)},n}(qa);function eu(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(Qs("collection","path",n),t instanceof ga){var o=R.Y.apply(R,Object(e.g)([n],r));return na(o),new tu(t,null,o)}if(!(t instanceof Fa||t instanceof tu))throw new I(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=R.Y.apply(R,Object(e.g)([t.path],r)).child(R.Y(n));return na(s),new tu(t.firestore,null,s)}function nu(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(1===arguments.length&&(n=N.D()),Qs("doc","path",n),t instanceof ga){var o=R.Y.apply(R,Object(e.g)([n],r));return ea(o),new Fa(t,null,new U(o))}if(!(t instanceof Fa||t instanceof tu))throw new I(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=t.nf.child(R.Y.apply(R,Object(e.g)([n],r)));return ea(s),new Fa(t.firestore,t instanceof tu?t.j_:null,new U(s))}var ru=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.F_=function(t){return new da(t)},n.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Fa(this.firestore,null,e)},n}(Ia);function iu(t,e){return(t instanceof Fa||t instanceof tu)&&(e instanceof Fa||e instanceof tu)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function ou(t,e){return t instanceof qa&&e instanceof qa&&t.firestore===e.firestore&&_n(t.tf,e.tf)&&t.j_===e.j_}function su(t){var e=t.S_(),n=$n(t.R_);return new lu(t.R_,!!e.ignoreUndefinedProperties,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var au=/^__.*__$/,uu=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return null!==this.en?n.push(new Qe(t,this.data,this.en,e)):n.push(new $e(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new tn(t,this.fieldTransforms)),n},t}(),cu=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new Qe(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new tn(t,this.fieldTransforms)),n},t}();function hu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var fu=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return _u(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find((function(e){return t.j(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.j(e.field)}))},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(hu(this.a_)&&au.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),lu=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||$n(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new fu({a_:t,methodName:e,l_:n,path:M.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function pu(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);wu("Data must be an object, but it was:",s,r);var a,u,c=mu(r,s);if(o.merge)a=new Fe(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Iu(e,l[f],n);if(!s.contains(p))throw new I(w.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Ou(h,p)||h.push(p)}a=new Fe(h),u=s.fieldTransforms.filter((function(t){return a.un(t.field)}))}else a=null,u=s.fieldTransforms;return new uu(new sn(c),a,u)}function du(t,e,n,r){var i=t.Rf(1,e,n);wu("Data must be an object, but it was:",i,r);var o=[],s=new an;Nt(r,(function(t,r){var a=Tu(e,t,n);r instanceof $s&&(r=r.o_);var u=i.If(a);if(r instanceof aa)o.push(a);else{var c=gu(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Fe(o);return new cu(s.hn(),a,i.fieldTransforms)}function vu(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[Iu(e,r,n)],u=[i];if(o.length%2!=0)throw new I(w.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Iu(e,o[c])),u.push(o[c+1]);for(var h=[],f=new an,l=a.length-1;l>=0;--l)if(!Ou(h,a[l])){var p=a[l],d=u[l];d instanceof $s&&(d=d.o_);var v=s.If(p);if(d instanceof aa)h.push(p);else{var y=gu(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Fe(h);return new cu(f.hn(),g,s.fieldTransforms)}function yu(t,e,n,r){return void 0===r&&(r=!1),gu(n,t.Rf(r?4:3,e))}function gu(t,e){if(t instanceof $s&&(t=t.o_),bu(t))return wu("Unsupported field value:",e,t),mu(t,e);if(t instanceof sa)return function(t,e){if(!hu(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=gu(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof $s&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=C.fromDate(t);return{timestampValue:te(e.serializer,n)}}if(t instanceof C){var r=new C(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:te(e.serializer,r)}}if(t instanceof pa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof da)return{bytesValue:ee(e.serializer,t.T_)};if(t instanceof Fa){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ie(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+ra(t))}(t,e)}function mu(t,e){var n={};return St(t)?e.path&&e.path.length>0&&e.en.push(e.path):Nt(t,(function(t,r){var i=gu(r,e.Ef(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function bu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof C||t instanceof pa||t instanceof da||t instanceof Fa||t instanceof sa)}function wu(t,e,n){if(!bu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ra(n);throw"an object"===r?e.h_(t+" a custom object"):e.h_(t+" "+r)}}function Iu(t,e,n){if(e instanceof $s&&(e=e.o_),e instanceof Aa)return e.G_;if("string"==typeof e)return Tu(t,e);throw _u("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Eu=new RegExp("[~\\*/\\[\\]]");function Tu(t,n,r){if(n.search(Eu)>=0)throw _u("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return(new(Aa.bind.apply(Aa,Object(e.g)([void 0],n.split("."))))).G_}catch(e){throw _u("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function _u(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new I(w.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ou(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Au=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.d)(this,(function(i){switch(i.label){case 0:if(this.vf(),this.mutations.length>0)throw new I(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=b(t),i=he(r.serializer)+"/documents",o={documents:n.map((function(t){return se(r.serializer,t)}))},[4,r.Ru("BatchGetDocuments",i,o)];case 1:return s=e.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){m(!!e.found),e.found.name,e.found.updateTime;var n=ae(t,e.found.name),r=re(e.found.updateTime),i=new sn({mapValue:{fields:e.found.fields}});return new hn(n,r,i,{})}(t,e):"missing"in e?function(t,e){m(!!e.missing),m(!!e.readTime);var n=ae(t,e.missing),r=re(e.readTime);return new fn(n,r)}(t,e):g()}(r.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(n.forEach((function(t){var e=a.get(t.toString());m(!!e),u.push(e)})),u)]}}))}))}(this.Nu,t)];case 1:return[2,((n=i.sent()).forEach((function(t){t instanceof fn||t instanceof hn?r.bf(t):g()})),n)]}}))}))},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new rn(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.d)(this,(function(r){switch(r.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,e){var r=U.st(e);n.mutations.push(new on(r,n.rn(r)))})),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=b(t),i=he(r.serializer)+"/documents",o={writes:n.map((function(t){return pe(r.serializer,t)}))},[4,r.Au("Commit",i,o)];case 1:return e.sent(),[2]}}))}))}(this.Nu,this.mutations)];case 1:return r.sent(),this.gf=!0,[2]}}))}))},t.prototype.bf=function(t){var e;if(t instanceof hn)e=t.version;else{if(!(t instanceof fn))throw g();e=D.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new I(w.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?ze.updateTime(e):ze.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(D.min()))throw new I(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(e)}return ze.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),ku=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new ir(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,n,r=this;return Object(e.d)(this,(function(e){return t=new Au(this.Nu),(n=this.Nf(t))&&n.then((function(e){r.di.Ri((function(){return t.commit().then((function(){r.Ti.resolve(e)})).catch((function(t){r.xf(t)}))}))})).catch((function(t){r.xf(t)})),[2]}))}))}))},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!V(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri((function(){return e.Cf(),Promise.resolve()}))):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Q(e)}return!1},t}(),Nu=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=h.UNAUTHENTICATED,this.clientId=N.D(),this.Of=function(){},this.g=new Jn,this.credentials.A((function(t){p("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()}))}return t.prototype.getConfiguration=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then((function(){return e.Of(e.user)}))},t.prototype.kf=function(){if(this.di.Ci)throw new I(w.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var n=new Jn;return this.di.Ni((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return t=e.sent(),r=mr(t,"Failed to shutdown persistence"),n.reject(r),[3,6];case 6:return[2]}}))}))})),n.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:return t.di.Li(),p("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return r=o.sent(),[4,n.initialize(r)];case 2:return o.sent(),t.Mf((function(r){return t.di.Mi((function(){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return[4,Vi(n.Cu,r)];case 1:return t.sent(),[2]}}))}))}))})),n.persistence.tc((function(){return t.terminate()})),t.Lf=n,[2]}}))}))}function ju(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(o){switch(o.label){case 0:return t.di.Li(),[4,xu(t)];case 1:return r=o.sent(),p("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,n.initialize(r,i)];case 3:return o.sent(),t.Mf((function(r){return t.di.Mi((function(){return function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(r=b(t)).di.Li(),p("RemoteStore","RemoteStore received new credentials"),i=fo(r),r.Mu.add(3),[4,io(r)];case 1:return e.sent(),i&&r.Bu.set("Unknown"),[4,r.xu.s_(n)];case 2:return e.sent(),r.Mu.delete(3),[4,ro(r)];case 3:return e.sent(),[2]}}))}))}(n.Oh,r)}))})),t.$f=n,[2]}}))}))}function xu(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return t.Lf?[3,2]:(p("FirestoreClient","Using default OfflineComponentProvider"),[4,Su(t,new Hs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}}))}))}function Cu(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return t.$f?[3,2]:(p("FirestoreClient","Using default OnlineComponentProvider"),[4,ju(t,new Ys)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}}))}))}function Du(t){return xu(t).then((function(t){return t.persistence}))}function Pu(t){return xu(t).then((function(t){return t.Cu}))}function Ru(t){return Cu(t).then((function(t){return t.Oh}))}function Lu(t){return Cu(t).then((function(t){return t.ga}))}function Mu(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Cu(t)];case 1:return n=e.sent(),[2,((r=n.Mh).Ju=es.bind(null,n.ga),r.Zu=rs.bind(null,n.ga),r)]}}))}))}function Uu(t,e,n,r,i){var o=new Js({next:function(o){e.Ri((function(){return Co(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new I(w.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new I(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Lo(vn(n.path),o,{includeMetadataChanges:!0,oa:!0});return xo(t,s)}function Vu(t,e,n,r,i){var o=new Js({next:function(n){e.Ri((function(){return Co(t,s)})),n.fromCache&&"server"===r.source?i.reject(new I(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Lo(n,o,{includeMetadataChanges:!0,oa:!0});return xo(t,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fu=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=su(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=qu(t,this.U_),i=ac(r.j_,e,n),o=pu(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,ze.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=qu(t,this.U_);return e instanceof $s&&(e=e.o_),o="string"==typeof e||e instanceof Aa?vu(this.Qf,"WriteBatch.update",s.K_,e,n,r):du(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,ze.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=qu(t,this.U_);return this.qf=this.qf.concat(new rn(e.K_,ze.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new I(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function qu(t,e){if(t instanceof $s&&(t=t.o_),t.firestore!==e)throw new I(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bu=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(e.c)(n,t),n.prototype.get=function(e){var n=this,r=qu(e,this.U_),i=new Ra(this.U_);return t.prototype.get.call(this,e).then((function(t){return new ja(n.U_,i,r.K_,t.W_,new Zu(!1,!1),r.j_)}))},n}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=su(t)}return t.prototype.get=function(t){var e=this,n=qu(t,this.U_),r=new ru(this.U_);return this.Wf.pf([n.K_]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i instanceof fn)return new Ta(e.U_,r,n.K_,null,n.j_);if(i instanceof hn)return new Ta(e.U_,r,i.key,i,n.j_);throw g()}))},t.prototype.set=function(t,e,n){var r=qu(t,this.U_),i=ac(r.j_,e,n),o=pu(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=qu(t,this.U_);return e instanceof $s&&(e=e.o_),o="string"==typeof e||e instanceof Aa?vu(this.Qf,"Transaction.update",s.K_,e,n,r):du(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=qu(t,this.U_);return this.Wf.delete(e.K_),this},t}()),zu=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Sa(t);var n=Ku(t),r=t.S_(),i=new Ys;return Na(n,i,new Ws(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Sa(t);var e=Ku(t),n=t.S_(),r=new Ys;return Na(e,r,new Xs(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var n=this;if(t.y_&&!t.V_)throw new I(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Jn;return t.z_.Ni((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return or.Gs()?(n=t+"main",[4,or.delete(n)]):[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Li(t.R_,t.I_))];case 1:return i.sent(),r.resolve(),[3,3];case 2:return n=i.sent(),r.reject(n),[3,3];case 3:return[2]}}))}))})),r.promise}(t.o_)},t}(),Gu=function(t){function n(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof c||(i.Gf=e),i}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},n.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&v("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},n.prototype.enableNetwork=function(){return function(t){var n=this;return t.di.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Du(t)];case 1:return n=e.sent(),[4,Ru(t)];case 2:return r=e.sent(),[2,(n.ec(!0),function(t){var e=b(t);return e.Mu.delete(0),ro(e)}(r))]}}))}))}))}(Ku(this.o_))},n.prototype.disableNetwork=function(){return function(t){var n=this;return t.di.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(i){switch(i.label){case 0:return[4,Du(t)];case 1:return n=i.sent(),[4,Ru(t)];case 2:return r=i.sent(),[2,(n.ec(!1),function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(n=b(t)).Mu.add(0),[4,io(n)];case 1:return e.sent(),n.Bu.set("Offline"),[2]}}))}))}(r))]}}))}))}))}(Ku(this.o_))},n.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ta("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},n.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},n.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new Jn;return t.di.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=hs,[4,Lu(t)];case 1:return[2,n.apply(void 0,[e.sent(),r])]}}))}))})),r.promise}(Ku(this.o_))},n.prototype.onSnapshotsInSync=function(t){return function(t,n){var r=this,i=Ku(t),o=Qn(n)?n:{next:n},s=new Js(o);return t.z_.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){b(t).Hu.add(e),e.next()},[4,Mu(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))})),function(){s.r_(),t.z_.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){b(t).Hu.delete(e)},[4,Mu(i)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.Gf)throw new I(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new oc(this,eu(this.o_,t))}catch(t){throw Ju(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new Yu(this,nu(this.o_,t))}catch(t){throw Ju(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new nc(this,function(t,e){if(Qs("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new I(w.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new qa(t,null,function(t){return new pn(R.X(),t)}(e))}(this.o_,t))}catch(t){throw Ju(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var n=this;return function(t,n){return function(t,n){var r=this,i=new Jn;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,function(t){return Cu(t).then((function(t){return t.Nu}))}(t)];case 1:return r=e.sent(),new ku(t.di,r,n,i).run(),[2]}}))}))})),i.promise}(Ku(t),(function(e){return n(new Bu(t,e))}))}(this.o_,(function(e){return t(new Wu(n,e))}))},n.prototype.batch=function(){var t=this;return Ku(this.o_),new Xu(new Fu(this.o_,(function(e){return Ua(t.o_,e)})))},n}($s);function Ku(t){return t.H_||Hu(t),t.H_.kf(),t.H_}function Hu(t){var e=t.S_(),n=function(t,e,n){return new u(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new Nu(t.P_,t.z_,n)}var Wu=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e.c)(n,t),n.prototype.get=function(t){var e=this,n=sc(t);return this.o_.get(n).then((function(t){return new tc(e.U_,t)}))},n.prototype.set=function(t,e,n){var r=sc(t);return n?(Zs("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=sc(t);return 2===arguments.length?this.o_.update(a,n):(i=this.o_).update.apply(i,Object(e.g)([a,n,r],o)),this},n.prototype.delete=function(t){var e=sc(t);return this.o_.delete(e),this},n}($s),Xu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.set=function(t,e,n){var r=sc(t);return n?(Zs("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=sc(t);return 2===arguments.length?this.o_.update(a,n):(i=this.o_).update.apply(i,Object(e.g)([a,n,r],o)),this},n.prototype.delete=function(t){var e=sc(t);return this.o_.delete(e),this},n.prototype.commit=function(){return this.o_.commit()},n}($s),Yu=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new Ea(e),r}return Object(e.c)(n,t),n.zf=function(t,e,r){if(t.length%2!=0)throw new I(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new n(e,new Fa(e.o_,r,new U(t)))},n.q_=function(t,e,r){return new n(e,new Fa(e.o_,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new oc(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new oc(this.firestore,eu(this.o_,t))}catch(t){throw Ju(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return t instanceof $s&&(t=t.o_),t instanceof Fa&&iu(this.o_,t)},n.prototype.set=function(t,e){e=Zs("DocumentReference.set",e);try{return function(t,e,n){var r=ia(t.firestore,ka),i=ac(t.j_,e,n);return Ua(r,pu(su(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,ze.on()))}(this.o_,t,e)}catch(t){throw Ju(t,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?La(this.o_,t):La.apply(void 0,Object(e.g)([this.o_,t,n],r))}catch(t){throw Ju(t,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return Ua(ia((t=this.o_).firestore,ka),[new rn(t.K_,ze.on())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=$u(e),i=Qu(e,(function(e){return new tc(t.firestore,new ja(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))}));return Ma(this.o_,r,i)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Ra(r),s=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(n){switch(n.label){case 0:return[4,Pu(i)];case 1:return[4,function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Oc.cs(t,e)}))}(t,n)];case 1:return(i=e.sent())instanceof hn?r.resolve(i):i instanceof fn?r.resolve(null):r.reject(new I(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=e.sent(),s=mr(o,"Failed to get document '"+n+" from cache"),r.reject(s),[3,3];case 3:return[2]}}))}))}(n.sent(),t.K_,s)];case 2:return n.sent(),[2]}}))}))})),s.promise.then((function(e){return new ja(r,o,t.K_,e,new Zu(e instanceof hn&&e.an,!0),t.j_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Mu(i)];case 1:return[4,Uu(e.sent(),r.z_,t.K_,{source:"server"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return Va(r,t,e)}))}(this.o_):function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Mu(i)];case 1:return[4,Uu(e.sent(),r.z_,t.K_,{source:"default"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return Va(r,t,e)}))}(this.o_)).then((function(t){return new tc(n.firestore,new ja(n.firestore.o_,n.Q_,t.K_,t.W_,t.metadata,n.o_.j_))}))},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}($s);function Ju(t,e,n){return t.message=t.message.replace(e,n),t}function $u(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Qn(r))return r}return{}}function Qu(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Qn(t[0])?t[0]:Qn(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Zu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"ref",{get:function(){return new Yu(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this.o_.data(t)},n.prototype.get=function(t,e){return this.o_.get(t,e)},n.prototype.isEqual=function(t){return Pa(this.o_,t.o_)},n}($s),ec=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(t){return this.o_.data(t)},n}(tc),nc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(e.c)(n,t),n.prototype.where=function(t,e,r){try{return new n(this.firestore,za(this.o_,function(t,e,n){var r=e,i=Oa("where",t);return new Ga(i,r,n)}(t,e,r)))}catch(t){throw Ju(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,za(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Oa("orderBy",t);return new Ka(r,n)}(t,e)))}catch(t){throw Ju(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,za(this.o_,function(t){return oa("limit",t),new Ha("limit",t,"F")}(t)))}catch(t){throw Ju(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(t){try{return new n(this.firestore,za(this.o_,function(t){return oa("limitToLast",t),new Ha("limitToLast",t,"L")}(t)))}catch(t){throw Ju(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,za(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wa("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Ju(t,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,za(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wa("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Ju(t,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,za(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xa("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Ju(t,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,za(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xa("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Ju(t,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return ou(this.o_,t.o_)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Ra(r),s=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(n){switch(n.label){case 0:return[4,Pu(i)];case 1:return[4,function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Hi(t,n,!0)];case 1:return i=e.sent(),o=new $o(n,i.Bc),s=o.gh(i.documents),a=o.Zn(s,!1),r.resolve(a.snapshot),[3,3];case 2:return u=e.sent(),c=mr(u,"Failed to execute query '"+n+" against cache"),r.reject(c),[3,3];case 3:return[2]}}))}))}(n.sent(),t.tf,s)];case 2:return n.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ca(r,o,t,e)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Ra(r),s=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Mu(i)];case 1:return[4,Vu(e.sent(),r.z_,t.tf,{source:"server"},s)];case 2:return e.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ca(r,o,t,e)}))}(this.o_):function(t){var n=this,r=ia(t.firestore,ka),i=Ku(r),o=new Ra(r);Za(t.tf);var s=new Jn;return r.z_.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Mu(i)];case 1:return[4,Vu(e.sent(),r.z_,t.tf,{source:"default"},s)];case 2:return e.sent(),[2]}}))}))})),s.promise.then((function(e){return new Ca(r,o,t,e)}))}(this.o_)).then((function(t){return new ic(n.firestore,t)}))},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=$u(e),i=Qu(e,(function(e){return new ic(t.firestore,e)}));return Ma(this.o_,r,i)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}($s),rc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new ec(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),n}($s),ic=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"query",{get:function(){return new nc(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new ec(t.U_,e)}))},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new rc(e.U_,t)}))},n.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new ec(n.U_,r))}))},n.prototype.isEqual=function(t){return Pa(this.o_,t.o_)},n}($s),oc=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new Yu(this.firestore,t):null},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){try{return new Yu(this.firestore,void 0===t?nu(this.o_):nu(this.o_,t))}catch(t){throw Ju(t,"doc()","CollectionReference.doc()")}},n.prototype.add=function(t){var e=this;return function(t,e){var n=ia(t.firestore,ka),r=nu(t),i=ac(t.j_,e);return Ua(n,pu(su(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,ze.exists(!1))).then((function(){return r}))}(this.o_,t).then((function(t){return new Yu(e.firestore,t)}))},n.prototype.isEqual=function(t){return iu(this.o_,t.o_)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(nc);function sc(t){return t instanceof $s&&(t=t.o_),ia(t,Fa)}function ac(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uc,cc=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.call(this,new(Aa.bind.apply(Aa,Object(e.g)([void 0],n))))||this}return Object(e.c)(n,t),n.documentId=function(){return new n(M.et().J())},n.prototype.isEqual=function(t){return t instanceof $s&&(t=t.o_),t instanceof Aa&&this.o_.G_.isEqual(t.G_)},n}($s),hc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.serverTimestamp=function(){var t=new ca("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new aa("deleteField");return t.c_="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ha("arrayUnion",t)}.apply(void 0,t);return r.c_="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fa("arrayRemove",t)}.apply(void 0,t);return r.c_="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=function(t){return new la("increment",t)}(t);return e.c_="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n}($s),fc={Firestore:Gu,GeoPoint:pa,Timestamp:C,Blob:wa,Transaction:Wu,WriteBatch:Xu,DocumentReference:Yu,DocumentSnapshot:tc,Query:nc,QueryDocumentSnapshot:ec,QuerySnapshot:ic,CollectionReference:oc,FieldPath:cc,FieldValue:hc,setLogLevel:function(t){var e;e=t,f.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t,e){t.INTERNAL.registerComponent(new a.a("firestore",(function(t){return function(t,e){return new Gu(t,new ka(t,e),new zu)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},fc)))})(uc=r.a),uc.registerVersion("@firebase/firestore","2.0.4")}).call(this,n(10))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,f=-1;function l(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!h){var t=a(l);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";(function(t){var e=n(1);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in n||(n[s]={}),n=n[s]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Pa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function l(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++b)}var m="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:I).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function O(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function k(t,e,n){this.code=j+t,this.message=e||x[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(j.length),t.message,t.serverResponse):null}O(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var S,j="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}S=D("__EID__")?"__EID__":void 0,O(R,Error),R.prototype.name="CustomError",O(L,R),L.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new U((function(){return new z}),(function(t){t.reset()}));function B(){var t=Ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function z(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=G(t,e)}function J(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var ft=u.navigator;if(ft){var lt=ft.userAgent;if(lt){tt=lt;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function yt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Tt}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,Tt={},_t={};function Ot(){if(void 0===Et){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(t){u.console&&u.console.error(t.message)}Et=t}else Et=t}return Et}function At(t,e){this.a=e===xt?t:""}function kt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=It(t);if(!jt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ot();return new At(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,jt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Ct(t,e){this.a=e===Vt?t:""}function Dt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Ct)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t))t=new Ct(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Ct(t,Vt):null}return t}function Ut(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Vt))}var Vt={},Ft=new Ct("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function zt(t,e,n,r){return t=t instanceof Ct?t:Ut(t),e=e||u,n=n instanceof wt?It(n):n||"",e.open(Dt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Kt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=l;var Wt,Xt,Yt=pt("Opera"),Jt=pt("Trident")||pt("MSIE"),$t=pt("Edge"),Qt=$t||Jt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Xt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Xt):$t?/Edge\/([\d\.]+)/.exec(Xt):Jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):te?/WebKit\/(\S+)/.exec(Xt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(re&&(ne=re?re[1]:""),Jt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&Jt){var ue=ee();oe=ue||(parseInt(Wt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Xt){}var he=!Jt||9<=Number(ce);function fe(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ye(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}K(s?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){u.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(Ee)}}else de=function(){var t=Ee;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(pe||(pe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),pe(t)):u.setImmediate(t)}}(),we||(de(),we=!0),Ie.add(t,e)}var we=!1,Ie=new F;function Ee(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){me(t)}V(q,t)}we=!1}function Te(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Le(n,Oe,t)}),(function(t){if(!(t instanceof ze))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Ae,t)}))}catch(t){Le(this,Ae,t)}}var _e=0,Oe=2,Ae=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new U((function(){return new ke}),(function(t){t.reset()}));function Se(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function je(t){if(t instanceof Te)return t;var e=new Te(l);return Le(e,Oe,t),e}function xe(t){return new Te((function(e,n){n(t)}))}function Ce(t,e,n){Me(t,e,n,null)||be(T(e,t))}function De(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Pe(t,e){t.b||t.a!=Oe&&t.a!=Ae||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ze?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Pe(t,i),i.a}function Le(t,e,n){t.a==_e&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=Ae||n instanceof ze||function(t,e){t.g=!0,be((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof Te)return Pe(t,Se(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,be(t.fc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}V(Ne,e)}function qe(t,e,n){e==Oe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Re(this,v(t)?t:null,v(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(n=Te.prototype).na=function(t,e){return(t=Se(t,t,e)).c=!0,Pe(this,t),this},n.s=function(t,e){return Re(this,null,t,e)},n.cancel=function(t){if(this.a==_e){var e=new ze(t);be((function(){!function t(e,n){if(e.a==_e)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==_e&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ve(r),Fe(r,o,Ae,n)))}e.c=null}else Le(e,Ae,n)}(this,e)}),this)}},n.Zc=function(t){this.a=_e,Le(this,Oe,t)},n.$c=function(t){this.a=_e,Le(this,Ae,t)},n.fc=function(){for(var t;t=Ve(this);)Fe(this,t,this.a,this.i);this.h=!1};var Be=me;function ze(t){R.call(this,t)}function Ge(){0!=Ke&&(He[g(this)]=this),this.xa=this.xa,this.oa=this.oa}O(ze,R),ze.prototype.name="cancel";var Ke=0,He={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ke)){var e=g(t);if(0!=Ke&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Xe=Object.freeze||function(t){return t},Ye=!Jt||9<=Number(ce),Je=Jt&&!ae("9"),$e=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",l,e),u.removeEventListener("test",l,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},O(Ze,Qe);var tn=Xe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++nn,this.va=this.Oa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&J(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new rn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=En(n),t&&t[en]?_n(t,e,n,y(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=bn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=En(n),t&&t[en]?On(t,e,n,y(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function yn(t){return t in hn?hn[t]:hn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return v(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function Tn(){Ge.call(this),this.v=new sn(this),this.$b=this,this.fb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function On(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(v(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Nn(t){var e=null;return new Te((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw u.clearTimeout(e),t}))}function Sn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function jn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Cn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}O(Tn,Ge),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;mt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.fb=null},(n=xn.prototype).V=function(){Cn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},n.Y=function(){return Cn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},n.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},n.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Ln(this,t.f),this.l=t.l,this.a=t.a,Mn(this,t.g),this.c=t.c,Un(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),Mn(this,n[4]),this.c=zn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Ln(t,e,n){t.f=n?zn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Yn)),t.b=new $n(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function qn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Bn(t,e,n,r){var i=new Rn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.c=r),i}function zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Gn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Xn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Jn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Ln(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Mn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Un(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,Wn=/[#\?:]/g,Xn=/[#\?]/g,Yn=/[#\?@]/g,Jn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=jn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Qn(t),e=ir(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Cn(t)))}function er(t,e){return Qn(t),e=ir(t,e),Dn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),cr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":cr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new sr,t,e),e.join("")}function sr(){}(n=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},n.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},n.V=function(t){Qn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=Q(e,this.a.get(ir(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},n.set=function(t,e){return Qn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},n.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ar={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ur=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(t,e){e.push('"',t.replace(ur,(function(t){var e=ar[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ar[t]=e),e})),'"')}function hr(){var t=Sr();return Jt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||u.window;var n="about:blank";t&&(n=Dt(Mt(t)||Ft)),e.location.href=n}function pr(t){return!!((t=(t||Sr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||u.window;try{t.close()}catch(t){}}function vr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Sr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Ar(Sr())==_r&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Mt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Ut(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=zt("",r,n,s),t=Dt(e),s&&(Qt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Kt(t)+'">',t=new qt(t=(r=Ot())?r.createHTML(t):t,null,Bt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(s=zt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).s((function(e){throw dn(window,"load",t),e}))}function br(t){return t=t||Sr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function wr(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ir(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Er(){return e.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.a.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function Tr(){var t=Er();return"ReactNative"===t||"Node"===t}var _r="Firefox",Or="Chrome";function Ar(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?_r:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Or:"Safari"}var kr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ar(i=Sr()):"Worker"===r&&(r=Ar(i=Sr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Sr(){return u.navigator&&u.navigator.userAgent||""}function jr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=u.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!u.indexedDB}catch(t){return Ir()&&!!u.indexedDB}return!1}function Cr(){return(Dr()||"chrome-extension:"===Pr()||br())&&!Tr()&&xr()&&!Ir()}function Dr(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return u.location&&u.location.protocol||null}function Rr(t){return!pr(t=t||Sr())&&Ar(t)!=_r}function Lr(t){return void 0===t?null:or(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Fr(t){return"Safari"!=Ar(t=t||Sr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Sr(),e=Er(),this.b=pr(t)||"ReactNative"===e}function zr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Gr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Hr(){return!(!jr("fireauth.oauthhelper",u)&&!jr("fireauth.iframe",u))}Br.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,Gr(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Jr.abcd}catch(Xt){Wr=!1}function $r(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Zr(t){var e={};return Qr(e,t),e}function ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,ti(t[n]));return e}function ei(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[oi]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[oi]),$r(this,"displayName",t[ri]||null);var n=null;t[ii]&&(n=new Date(t[ii]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ni(t){try{var e=new ai(t)}catch(t){e=null}return e}ei.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",si="phoneInfo";function ai(t){ei.call(this,t),$r(this,"phoneNumber",t[si])}function ui(t){var e={},n=t[li],r=t[di],i=t[vi];if(t=ni(t[pi]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[gi]=n||null,e[bi]=n||null,e[yi]=r):(e[gi]=r||null,e[bi]=r||null,e[yi]=n||null),e[mi]=t||null,$r(this,Ii,i),$r(this,wi,ti(e))}O(ai,ei),ai.prototype.w=function(){var t=ai.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",li="email",pi="mfaInfo",di="newEmail",vi="requestType",yi="email",gi="fromEmail",mi="multiFactorInfo",bi="previousEmail",wi="data",Ii="operation";function Ei(t){var e=Fn(t=qn(t),Ti)||null,n=Fn(t,_i)||null,r=Fn(t,ki)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new k("argument-error",Ti+", "+_i+"and "+ki+" are required in a valid action code URL.");Qr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Oi)||null,languageCode:Fn(t,Ai)||null,tenantId:Fn(t,Ni)||null})}var Ti="apiKey",_i="oobCode",Oi="continueUrl",Ai="languageCode",ki="mode",Ni="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function ji(t){try{return new Ei(t)}catch(t){return null}}function xi(t){var e=t[Li];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ci];if(n&&"object"==typeof n){e=n[Vi];var r=n[Mi];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",Vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Ci+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new k("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Di])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Di+" property must be a non empty string when specified.");this.i=t||null}var Ci="android",Di="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",Li="url",Mi="installApp",Ui="minimumVersion",Vi="packageName",Fi="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Bi=null;function zi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Gi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,_(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ki(t){try{return new Gi(t)}catch(t){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(zi(t))}catch(t){}return null}Gi.prototype.S=function(){return this.f},Gi.prototype.i=function(){return this.b},Gi.prototype.toString=function(){return this.g};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Yi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Xi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Xi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Xi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Wi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Ji(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Qi])return new to(t)}catch(t){}return null}var Qi="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Qi]){var n=Ki(t[Qi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function eo(t){to.call(this,t),$r(this,"profile",ti((t=Ur(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function so(t){var e=qn(t),n=Fn(e,"link"),r=Fn(qn(n),"link");return e=Fn(e,"deep_link_id"),Fn(qn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}O(eo,to),O(no,eo),O(ro,eo),O(io,eo),O(oo,eo);var uo="enroll",co="signin";function ho(){}function fo(t,e){return t.then((function(t){if(t[Zs]){var n=Ki(t[Zs]);if(!n||e!=n.h)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==j+"user-not-found"?new k("user-mismatch"):t}))}function lo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function yo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new yo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Pc=e||[],Qr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Ji(t)||{}).Ja||null,this.nb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,Xi),this.a=[]}function Eo(){Io.call(this,"facebook.com")}function To(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function _o(){Io.call(this,"github.com")}function Oo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Ao(){Io.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function No(){bo.call(this,"twitter.com",Wi)}function So(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n,"twitter.com")}function jo(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new jo(t.email,t.password,t.signInMethod):null}function Co(){Qr(this,{providerId:"password",isOAuthProvider:!1})}function Do(t,e){if(!(e=Po(e)))throw new k("argument-error","Invalid email link!");return new jo(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=ji(t=so(t)))&&t.operation===hi?t:null}function Ro(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new k("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Lo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Uo(t){try{this.a=t||e.a.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Ro({cb:t,bb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return To(n);case"github.com":return Oo(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new yo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?je(this.a):je(this.b)},ao.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ja=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},lo.prototype.ja=function(t){return Ia(t,po(this))},lo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,Ea(t,n)},lo.prototype.c=function(t,e){return fo(Ta(t,po(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},yo.prototype.ja=function(t){return Ia(t,go(this))},yo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,Ea(t,n)},yo.prototype.c=function(t,e){return fo(Ta(t,go(this)),e)},yo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Hb=yt(t),this},O(wo,bo),O(Io,bo),Io.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},Io.prototype.Pb=function(){return Z(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,n,this.providerId)},O(Eo,Io),$r(Eo,"PROVIDER_ID","facebook.com"),$r(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),O(_o,Io),$r(_o,"PROVIDER_ID","github.com"),$r(_o,"GITHUB_SIGN_IN_METHOD","github.com"),O(Ao,Io),$r(Ao,"PROVIDER_ID","google.com"),$r(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),O(No,bo),$r(No,"PROVIDER_ID","twitter.com"),$r(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),jo.prototype.ja=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?iu(t,xa,{email:this.a,oobCode:this.f}):iu(t,Za,{email:this.a,password:this.f})},jo.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?iu(t,Ca,{idToken:e,email:this.a,oobCode:this.f}):iu(t,Ka,{idToken:e,email:this.a,password:this.f})},jo.prototype.c=function(t,e){return fo(this.ja(t),e)},jo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Qr(Co,{PROVIDER_ID:"password"}),Qr(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qr(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ja=function(t){return t.eb(Mo(this))},Ro.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,iu(t,eu,n)},Ro.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",fo(t=iu(t,nu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.eb=function(t,e){var n=this.a.a;return je(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=y(t)?t.session:null,o=y(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return iu(t,Wa,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return iu(t,Xa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return iu(t,za,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qr(Uo,{PROVIDER_ID:"phone"}),Qr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.S=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Ho=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Xo(t,e,n){k.call(this,t,n),(t=e||{}).Ib&&$r(this,"email",t.Ib),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Yb&&$r(this,"tenantId",t.Yb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(j)&&(e=e.substring(j.length));var n={credential:Fo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Xo(e,n,t.message)}return null}function Jo(){}function $o(t){return t.c||(t.c=t.b())}function Qo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ts(){}function es(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.pc,this),this.a.onerror=E(this.Rb,this),this.a.onprogress=E(this.qc,this),this.a.ontimeout=E(this.uc,this)}function ns(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function rs(t,e,n){this.reset(t,e,n,void 0,void 0)}O(Wo,k),O(Xo,k),Xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Xo.prototype.toJSON=function(){return this.w()},Jo.prototype.c=null,O(Qo,Jo),Qo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Qo,O(ts,Jo),ts.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new es;throw Error("Unsupported browser")},ts.prototype.b=function(){return{}},(n=es.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},n.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},n.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ns(this,4)},n.Rb=function(){this.status=500,this.response=this.responseText="",ns(this,4)},n.uc=function(){this.Rb()},n.qc=function(){this.status=200,ns(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},rs.prototype.a=null;function is(t){this.f=t,this.b=this.c=this.a=null}function os(t,e){this.name=t,this.value=e}rs.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||_(),delete this.a},os.prototype.toString=function(){return this.name};var ss=new os("SEVERE",1e3),as=new os("WARNING",900),us=new os("CONFIG",700),cs=new os("FINE",500);is.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new rs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var hs={},fs=null;function ls(t){var e;if(fs||(fs=new is(""),hs[""]=fs,fs.c=us),!(e=hs[t])){e=new is(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,hs[t]=e}return e}function ps(t,e){t&&t.log(cs,e,void 0)}function ds(t){this.f=t}function vs(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}O(ds,Jo),ds.prototype.a=function(){return new vs(this.f)},ds.prototype.b=function(t){return function(){return t}}({}),O(vs,Tn);var ys=0;function gs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,bs(t)}function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ws(t){Tn.call(this),this.headers=new xn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=Is,this.u=this.R=!1}(n=vs.prototype).open=function(t,e){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,bs(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ys},n.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,bs(this)),this.a&&(this.readyState=3,bs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},n.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):bs(this),3==this.readyState&&gs(this)}},n.sc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},n.rc=function(t){this.a&&(this.response=t,ms(this))},n.Ta=function(t){var e=this.i;e&&e.log(as,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},n.setRequestHeader=function(t,e){this.l.append(t,e)},n.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(as,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(as,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),O(ws,Tn);var Is="";ws.prototype.b=ls("goog.net.XhrIo");var Es=/^https?$/i,Ts=["POST","PUT"];function _s(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Ko.a(),t.A=t.O?$o(t.O):$o(Ko),t.a.onreadystatechange=E(t.Ub,t);try{ps(t.b,Ds(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ps(t.b,Ds(t,"Error opening Xhr: "+e.message)),void As(t,e)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)K(t,e,void 0);else for(var n=jn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Os,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{js(t),0<t.g&&(t.u=function(t){return Jt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ps(t.b,Ds(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ma,t)):t.o=kn(t.Ma,t.g,t)),ps(t.b,Ds(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ps(t.b,Ds(t,"Send error: "+e.message)),As(t,e)}}function Os(t){return"content-type"==t.toLowerCase()}function As(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ks(t),Ss(t)}function ks(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==a)if(t.A[1]&&4==xs(t)&&2==Cs(t))ps(t.b,Ds(t,"Local request error detected and ignored"));else if(t.i&&4==xs(t))kn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==xs(t)){ps(t.b,Ds(t,"Request complete")),t.c=!1;try{var e,n=Cs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Es.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xs(t)?t.a.statusText:""}catch(e){ps(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Cs(t)+"]",ks(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){js(t);var n=t.a,r=t.A[0]?l:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ss,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function js(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(u.clearTimeout(t.o),t.o=null)}function xs(t){return t.a?t.a.readyState:0}function Cs(t){try{return 2<xs(t)?t.a.status:-1}catch(t){return-1}}function Ds(t,e){return e+" ["+t.P+" "+t.l+" "+Cs(t)+"]"}function Ps(t){var e=Ks;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Ls(t){if(t.a){if(!t.m)throw new Fs(t);t.m=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function Us(t){return X(t.g,(function(t){return v(t[1])}))}function Vs(t){if(t.h&&t.a&&Us(t)){var e=t.h,n=zs[e];n&&(u.clearTimeout(n.a),delete zs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(P(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Us(t)||(n=!0)}}t.c=e,r&&(a=E(t.v,t,!0),r=E(t.v,t,!1),e instanceof Ps?(Ms(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Bs(e),zs[e.a]=e,t.h=e.a)}function Fs(){R.call(this)}function qs(){R.call(this)}function Bs(t){this.a=u.setTimeout(E(this.c,this),0),this.b=t}(n=ws.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ps(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(ps(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),ws.$a.Da.call(this)},n.Ub=function(){this.xa||(this.N||this.i||this.f?Ns(this):this.Ic())},n.Ic=function(){Ns(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Is:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ss,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ps(this.b,"Can not get response: "+t.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new qs(this),Ls(this),Rs(this,!1,t))}},Ps.prototype.v=function(t,e){this.i=!1,Rs(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,O(Fs,R),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",O(qs,R),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Bs.prototype.c=function(){throw delete zs[this.a],this.b};var zs={};function Gs(t){var e={},n=e.document||document,r=kt(t).toString(),i=ge(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ps(o),a=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(a=window.setTimeout((function(){Hs(i,!0);var t=new Ys(Xs,"Timeout reached for loading script "+r);Ls(s),Rs(s,!1,t)}),c),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.wd||!1,a),Ls(s),Rs(s,!0,null))},i.onerror=function(){Hs(i,!0,a);var t=new Ys(Ws,"Error while loading script "+r);Ls(s),Rs(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=f(e.document):(null===h&&(h=f(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ks(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ws=0,Xs=1;function Ys(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Js(t){this.f=t}function $s(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||ta,this.g=yt(t.secureTokenHeaders||ea),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||na,this.a=yt(t.firebaseHeaders||ra),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Er(),!(r=u.XMLHttpRequest||r&&e.a.INTERNAL.node&&e.a.INTERNAL.node.XMLHttpRequest)&&!Ir())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new ds(self):Tr()?this.f=new Js(r):this.f=new ts,this.b=null}O(Ys,R),O(Js,Jo),Js.prototype.a=function(){return new this.f},Js.prototype.b=function(){return{}};var Qs,Zs="idToken",ta=new Br(3e4,6e4),ea={"Content-Type":"application/x-www-form-urlencoded"},na=new Br(3e4,6e4),ra={"Content-Type":"application/json"};function ia(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function oa(t,e){e&&(t.l=sa("https://securetoken.googleapis.com/v1/token",e),t.h=sa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=sa("https://identitytoolkit.googleapis.com/v2/",e))}function sa(t,e){return t=qn(t),e=qn(e.url),t.c=t.a+t.c,Ln(t,e.f),t.a=e.a,Mn(t,e.g),t.toString()}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ua(t,e,n,r,i,o,s){(function(){var t=Sr();return!((t=Ar(t)!=Or?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Jt||!ce||9<ce)})()||Ir()?t=E(t.u,t):(Qs||(Qs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Gs(Nt(ca,{onload:ha})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=E(t.o,t)),t(e,n,r,i,o,s)}$s.prototype.S=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(Ir()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ws(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ps(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),On(s,"ready",(function(){a&&clearTimeout(a),We(this)})),On(s,"timeout",(function(){a&&clearTimeout(a),We(this),e&&e(null)})),_s(s,t,n,r,i)};var ca=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ha="__fcb"+Math.floor(1e6*Math.random()).toString();function fa(t,e,n,r,i,o,s){var a=qn(e+n);Vn(a,"key",t.c),s&&Vn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(a,c,i[c]);return new Te((function(e,n){ua(t,a.toString(),(function(t){t?t.error?n(su(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:or(Mr(i)),t.a,t.m.get())}))}function la(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new k("invalid-email")}function pa(t){"email"in t&&la(t)}function da(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,yt(t));throw new k("internal-error")}}function va(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}$s.prototype.o=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.yb=function(){return iu(this,Ha,{})},$s.prototype.Ab=function(t,e){return iu(this,Ga,{idToken:t,email:e})},$s.prototype.Bb=function(t,e){return iu(this,Ka,{idToken:t,password:e})};var ya={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ba(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function wa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=ou(t.errorMessage)),e)throw e;da(t)}function Ia(t,e){return e.returnIdpCredential=!0,iu(t,Ya,e)}function Ea(t,e){return e.returnIdpCredential=!0,iu(t,$a,e)}function Ta(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,iu(t,Ja,e)}function _a(t){if(!t.oobCode)throw new k("invalid-action-code")}(n=$s.prototype).Cb=function(t,e){var n={idToken:t},r=[];return dt(ya,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),iu(this,Ga,n)},n.ub=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),iu(this,Va,t)},n.vb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),iu(this,La,t)},n.tb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),iu(this,Ma,t)},n.Db=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),iu(this,Ua,t)},n.eb=function(t){return iu(this,tu,t)},n.mb=function(t,e){return iu(this,Ba,{oobCode:t,newPassword:e})},n.Qa=function(t){return iu(this,Aa,{oobCode:t})},n.ib=function(t){return iu(this,Oa,{oobCode:t})};var Oa={endpoint:"setAccountInfo",B:_a,Z:"email",C:!0},Aa={endpoint:"resetPassword",B:_a,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},C:!0},ka={endpoint:"signupNewUser",B:function(t){if(la(t),!t.password)throw new k("weak-password")},F:da,U:!0,C:!0},Na={endpoint:"createAuthUri",C:!0},Sa={endpoint:"deleteAccount",M:["idToken"]},ja={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},xa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:la,F:da,U:!0,C:!0},Ca={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:la,F:da,U:!0},Da={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ga,F:da,C:!0,Na:!0},Pa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ga,F:da,C:!0,Na:!0},Ra={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");la(t)},Z:"email",C:!0},Ma={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",C:!0},Ua={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",C:!0},Va={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");la(t)},Z:"email",C:!0},Fa={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},qa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Ba={endpoint:"resetPassword",B:_a,Z:"email",C:!0},za={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ga={endpoint:"setAccountInfo",M:["idToken"],B:pa,U:!0},Ka={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(pa(t),!t.password)throw new k("weak-password")},F:da,U:!0},Ha={endpoint:"signupNewUser",F:da,U:!0,C:!0},Wa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},C:!0,Na:!0},Xa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},C:!0,Na:!0},Ya={endpoint:"verifyAssertion",B:ma,Xa:ba,F:wa,U:!0,C:!0},Ja={endpoint:"verifyAssertion",B:ma,Xa:ba,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw ou(t.errorMessage);da(t)},U:!0,C:!0},$a={endpoint:"verifyAssertion",B:function(t){if(ma(t),!t.idToken)throw new k("internal-error")},Xa:ba,F:wa,U:!0},Qa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new k("invalid-custom-token")},F:da,U:!0,C:!0},Za={endpoint:"verifyPassword",B:function(t){if(la(t),!t.password)throw new k("wrong-password")},F:da,U:!0,C:!0},tu={endpoint:"verifyPhoneNumber",B:va,F:da,C:!0},eu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new k("internal-error");va(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);da(t)}},nu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:va,F:da,C:!0},ru={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Zs]^!!t.refreshToken)throw new k("internal-error")},C:!0,Na:!0};function iu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return xe(new k("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return je(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),fa(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function ou(t){return su({error:{errors:[{message:t}],code:400,message:t}})}function su(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Lr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.qb=function(t){return(fu||(fu=new Te((function(t,e){function n(){qr(),jr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:cu.get()})}if(jr("gapi.iframes.Iframe"))t();else if(jr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){jr("gapi.load")?n():e(Error("Network Error"))},je(Gs(r=Nt(uu,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw fu=null,t})))).then((function(){return new Te((function(e,n){jr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),hu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var uu=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),cu=new Br(3e4,6e4),hu=new Br(5e3,15e3),fu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Bn((t=qn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):t=Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function pu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return e.a.app(t).auth().Ga()}catch(t){return[]}}function vu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function yu(t){var e=fr();return function(t){return iu(t,Fa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:yr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function gu(t){return t.v||(t.v=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new lu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.m=new au(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",je(n)}return n.status="ERROR",je(n)}))}(t)}))),t.v}function mu(t){return t.l||(t.A=t.c?Nr(t.c,du(t.b)):null,t.l=new $s(t.g,D(t.i),t.A),t.f&&oa(t.l,t.f)),t.l}function bu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new pu(t,e,n,r,i,f)).l=o,t.g=s,t.i=a,t.b=yt(u||null),t.f=c,t.xb(h).toString()}function wu(t){if(this.a=t||e.a.INTERNAL.reactNative&&e.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Iu(t){this.b=t,this.a={},this.f=E(this.c,this)}lu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},pu.prototype.xb=function(t){return this.h=t,this},pu.prototype.toString=function(){if(this.m){var t=qn(this.m.url);t=Bn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.o),Vn(t,"appName",this.c),Vn(t,"authType",this.v),this.a.isOAuthProvider){var n=this.a;try{var r=e.a.app(this.c).auth().ka()}catch(t){r=null}for(var i in n.nb=r,Vn(t,"providerId",this.a.providerId),n=Mr((r=this.a).Hb))n[i]=n[i].toString();i=r.Pc,n=yt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),vt(n)||Vn(t,"customParameters",Lr(n))}if("function"==typeof this.a.Pb&&((r=this.a.Pb()).length&&Vn(t,"scopes",r.join(","))),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Vn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(a=du(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(n=vu.prototype).Nb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.qb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,jr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&dr(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new Te((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Nn(n).then((function(){e(r)}))}))},n.Wb=function(){var t=Sr();return!Rr(t)&&!Fr(t)},n.Sb=function(){return!1},n.Lb=function(t,e,n,r,i,o,s,a){if(!t)return xe(new k("popup-blocked"));if(s&&!Rr())return this.la().s((function(e){dr(t),i(e)})),r(),je();this.a||(this.a=yu(mu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw dr(t),i(e),e}));return r(),e})).then((function(){(qo(n),s)||lr(bu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},n.Mb=function(t,e,n,r){this.a||(this.a=yu(mu(this)));var i=this;return this.a.then((function(){qo(e),lr(bu(i.o,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},n.la=function(){var t=this;return gu(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new k("network-request-failed")}))},n.Zb=function(){return!0},n.Ea=function(t){this.h.push(t)},n.Ra=function(t){$(this.h,(function(e){return e==t}))},(n=wu.prototype).get=function(t){return je(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},n.set=function(t,e){return je(this.a.setItem(t,Lr(e)))},n.T=function(t){return je(this.a.removeItem(t))},n.ca=function(){},n.ia=function(){};var Eu,Tu=[];function _u(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ou(t){this.a=t}function Au(t){this.c=t,this.b=!1,this.a=[]}function ku(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return xe(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).s((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function Su(){if(!Du())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=u.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t=this;Ir()&&self?(this.m=function(){var t=Ir()?self:null;if(K(Tu,(function(n){n.b==t&&(e=n)})),!e){var e=new Iu(t);Tu.push(e)}return e}(),_u(this.m,"keyChanged",(function(e,n){return Uu(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),_u(this.m,"ping",(function(){return je(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?je().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):je(null)}().then((function(e){(t.h=e)&&(t.g=new Au(new Ou(e)),ku(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function ju(t){return new Te((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ju(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function xu(t){return t.i||(t.i=ju(t)),t.i}function Cu(t,e){var n=0;return new Te((function r(i,o){xu(t).then(e).then(i).s((function(e){if(!(3<++n))return xu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)}));o(e)}))}))}function Du(){try{return!!u.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function Ru(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?ku(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):je()}function Uu(t){return xu(t).then((function(t){var e=Pu(Ru(t,!1));return e.getAll?Lu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Fu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=je().then((function(){if(Du()){var t=Vr(),r="__sak"+t;return Eu||(Eu=new Su),(n=Eu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Bu(){if(!function(){var t="Node"==Er();if(!(t=zu()||t&&e.a.INTERNAL.node&&e.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=zu()||e.a.INTERNAL.node.localStorage,this.type="localStorage"}function zu(){try{var t=u.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==Er();if(!(t=Hu()||t&&e.a.INTERNAL.node&&e.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Hu()||e.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=u.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){var t={};t.Browser=Ju,t.Node=$u,t.ReactNative=Qu,t.Worker=Zu,this.a=t[Er()]}Iu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(je().then((function(){return e(t.origin,t.data.data)})))})),De(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ou.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Au.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(n=Su.prototype).set=function(t,e){var n=this,r=!1;return Cu(this,(function(e){return Lu((e=Pu(Ru(e,!0))).get(t))})).then((function(i){return Cu(n,(function(o){if(o=Pu(Ru(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).na((function(){r&&n.b--}))},n.get=function(t){return Cu(this,(function(e){return Lu(Pu(Ru(e,!1)).get(t))})).then((function(t){return t&&t.value}))},n.T=function(t){var e=this,n=!1;return Cu(this,(function(r){return n=!0,e.b++,Lu(Pu(Ru(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).na((function(){n&&e.b--}))},n.ca=function(t){0==this.a.length&&function(t){Vu(t),function e(){t.f=setTimeout((function(){t.l=Uu(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},n.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(n=Fu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},n.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},n.T=function(t){return this.b.then((function(e){return e.T(t)}))},n.ca=function(t){this.a.push(t)},n.ia=function(t){$(this.a,(function(e){return e==t}))},(n=qu.prototype).get=function(t){return je(this.a[t])},n.set=function(t,e){return this.a[t]=e,je()},n.T=function(t){return delete this.a[t],je()},n.ca=function(){},n.ia=function(){},(n=Bu.prototype).get=function(t){var e=this;return je().then((function(){return Ur(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return je().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},n.T=function(t){var e=this;return je().then((function(){e.a.removeItem(t)}))},n.ca=function(t){u.window&&fn(u.window,"storage",t)},n.ia=function(t){u.window&&dn(u.window,"storage",t)},(n=Gu.prototype).get=function(){return je(null)},n.set=function(){return je()},n.T=function(){return je()},n.ca=function(){},n.ia=function(){},(n=Ku.prototype).get=function(t){var e=this;return je().then((function(){return Ur(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return je().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},n.T=function(t){var e=this;return je().then((function(){e.a.removeItem(t)}))},n.ca=function(){},n.ia=function(){};var Xu,Yu,Ju={D:Bu,ab:Ku},$u={D:Bu,ab:Ku},Qu={D:wu,ab:Gu},Zu={D:Bu,ab:Gu},tc={qd:"local",NONE:"none",sd:"session"};function ec(){var t=!(Fr(Sr())||!wr()),e=Rr(),n=xr();this.v=t,this.h=e,this.l=n,this.a={},Xu||(Xu=new Wu),t=Xu;try{this.g=!hr()&&Hr()||!u.indexedDB?new t.a.D:new Fu(Ir()?new qu:new t.a.D)}catch(t){this.g=new qu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new qu}this.m=new qu,this.f=E(this.Xb,this),this.b={}}function nc(){return Yu||(Yu=new ec),Yu}function rc(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function ic(t,e){return"firebase:"+t.name+(e?":"+e:"")}function oc(t,e,n){return n=ic(e,n),"local"==e.D&&(t.b[n]=null),rc(t,e.D).T(n)}function sc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=nc()}(n=ec.prototype).get=function(t,e){return rc(this,t.D).get(ic(t,e))},n.set=function(t,e,n){var r=ic(t,n),i=this,o=rc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},n.addListener=function(t,e,n){t=ic(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(rc(this,"local").ca(this.f),this.h||(hr()||!Hr())&&u.indexedDB||!this.l||function(t){sc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},n.removeListener=function(t,e,n){t=ic(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(rc(this,"local").ia(this.f),sc(this))},n.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?rc(this,"local").ia(this.f):sc(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Jt&&ce&&10==ce&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,E(this.lb,this))},n.lb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var uc,cc={name:"authEvent",D:"local"};function hc(){this.a=nc()}function fc(t,e){this.b=lc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===uc&&(uc=u.Int32Array?new Int32Array(bc):bc),this.reset()}O(fc,(function(){this.b=-1}));for(var lc=64,pc=lc-1,dc=[],vc=0;vc<pc;vc++)dc[vc]=0;var yc=Q(128,dc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|uc[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}fc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var bc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wc(){fc.call(this,8,Ic)}O(wc,fc);var Ic=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ec(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new hc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tc(t){return new k("invalid-cordova-configuration",t)}function _c(t){var e=new wc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,yc,56-e.c):mc(e,yc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Oc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ac(t){return t.f||(t.f=t.la().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),kc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Fn(o=qn(i),"firebaseError")||null))?N(o):null)?new Bo(r.c,r.b,null,null,o,null,r.S()):new Bo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Oc(t,i)}))}var n=new Bo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Nn(500).then((function(){return kc(t).then((function(){r||Oc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(jr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ho||(Ho=new Go),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=jr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function kc(t){var e=null;return function(t){return t.b.get(cc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,oc((n=t.g).b,cc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=nc()}(n=Ec.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(br(void 0)?mr().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):xe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof jr("universalLinks.subscribe",u))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===jr("BuildInfo.packageName",u))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof jr("cordova.plugins.browsertab.openUrl",u))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof jr("cordova.InAppBrowser.open",u))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},n.Nb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),je()},n.Lb=function(){return xe(new k("operation-not-supported-in-this-environment"))},n.Zb=function(){return!1},n.Wb=function(){return!0},n.Sb=function(){return!0},n.Mb=function(t,e,n,r){if(this.c)return xe(new k("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=je().then((function(){return qo(e),Ac(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Bo(e,r,null,o,new k("no-auth-event"),null,i),a=jr("BuildInfo.packageName",u);if("string"!=typeof a)throw new k("invalid-cordova-configuration");var c=jr("BuildInfo.displayName",u),h={};if(Sr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!Sr().toLowerCase().match(/android/))return xe(new k("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=_c(o),h.sessionId=o;var f=bu(t.m,t.i,t.l,e,n,null,r,t.v,h,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(cc,s.w(),e)})).then((function(){var e=jr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=jr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=jr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=Sr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){a=function(){var e=jr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=Nn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},h=function(){zr()&&c()},o.addEventListener("resume",c,!1),Sr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).s((function(t){return kc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null}))},n.Ea=function(t){this.b.push(t),Ac(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},n.Ra=function(t){$(this.b,(function(e){return e==t}))};var Sc={name:"pendingRedirect",D:"session"};function jc(t){return oc(t.b,Sc,t.a)}function xc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new Hc,this.A=new $c,this.g=new Nc(Gc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Cc(this.O,this.m,this.v,S,this.G)}function Cc(t,n,r,i,o){var s=e.a.SDK_VERSION||null;return br()?new Ec(t,n,r,s,i,o):new vu(t,n,r,s,i,o)}function Dc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Pc(t){t.a.Wb()&&Dc(t).s((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.o(n)})),t.a.Sb()||Wc(t.b)}function Rc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Sc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?jc(t.g).then((function(){Dc(t).s((function(e){var n=new Bo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.o(n)}))})):Pc(t)})).s((function(){Pc(t)}))}function Lc(t,e){$(t.h,(function(t){return t==e}))}xc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Cc(this.O,this.m,this.v,null,this.G),this.i={}},xc.prototype.o=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=_()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=_())),e=!0;break}}return Wc(this.b),e};var Mc=new Br(2e3,1e4),Uc=new Br(3e4,6e4);function Vc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Fc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Sc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(Fc(e))throw new k("operation-not-supported-in-this-environment");return o=e,jc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new Te((function(){})):jc(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function Bc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Mc.get())}xc.prototype.qa=function(){return this.b.qa()};var zc={};function Gc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Gc(e,n,r);return zc[i]||(zc[i]=new xc(t,e,n,r)),zc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Wc(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function Xc(t){t.g&&!t.i&&Jc(t,!1,null,null)}function Yc(t,e){if(t.b=function(){return je(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return xe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Yc(t,n):Yc(t,{user:null}),t.f=[],t.c=[]}function $c(){}function Qc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Zc(t,e){this.a=e,$r(this,"verificationId",t)}function th(t,e,n,r){return new Uo(t).eb(e,n).then((function(t){return new Zc(t,r)}))}function eh(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function nh(t,e,n){var r=e&&e[ih];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=yt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;K(e[rh]||[],(function(t){(t=ni(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),je()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Jc(t,a,e,null)})).s((function(e){Jc(t,a,null,e)}))}(this,t,e):xe(new k("invalid-auth-event")):(Jc(this,!1,null,null),je())}else xe(new k("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Nn(Uc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},$c.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),je()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):xe(new k("invalid-auth-event"))}else xe(new k("invalid-auth-event"))},Zc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var rh="mfaInfo",ih="mfaPendingCredential";function oh(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new nh(t,e,n),$r(this,"resolver",this.b)}function sh(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new oh(e,t.serverResponse,n,t.message)}catch(t){}return null}function ah(){}function uh(t){$r(this,"factorId",t.fa),this.a=t}function ch(t){if(uh.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function hh(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function fh(t,e){this.a=t,this.b=[],this.c=E(this.xc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[oi]=t.uid),t.displayName&&(r[ri]=t.displayName),t.enrollmentTime&&(r[ii]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ai(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function ph(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function dh(t){this.c=t,this.b=this.a=null}function vh(t){return t.b&&1e3*t.b.c||0}function yh(t,e){var n=e.refreshToken;t.b=Ki(e[Zs]||""),t.a=n}function gh(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ua(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(su(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.v.get()):r(new k("internal-error"))}))}(t.c,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Qr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function bh(t,e,n,r,i,o){Qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,n,r){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=e.a.SDK_VERSION?Nr(e.a.SDK_VERSION):null;this.a=new $s(this.l,D(S),i),t.emulatorConfig&&oa(this.a,t.emulatorConfig),this.b=new dh(this.a),Nh(this,n[Zs]),yh(this.b,n),$r(this,"refreshToken",this.b.a),xh(this,r||{}),Tn.call(this),this.P=!1,this.o&&Cr()&&(this.i=Kc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new ph((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=vh(t.b)-_()-3e5;return 0<e?e:0}))}(this),this.$=E(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){oa(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Th(o,t.f)},this.aa=null,this.N=new fh(this,r),$r(this,"multiFactor",this.N)}function Ih(t,e){t.ba&&dn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&fn(e,"languageCodeChanged",t.Ba)}function Eh(t,e){t.W&&dn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&fn(e,"emulatorConfigChanged",t.za)}function Th(t,n){t.X=n,aa(t.a,e.a.SDK_VERSION?Nr(e.a.SDK_VERSION,t.X):null)}function _h(t,e){t.aa&&dn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&fn(e,"frameworkChanged",t.Aa)}function Oh(t){try{return e.a.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ah(t){t.A||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.$),fn(t,"tokenChanged",t.$))}function kh(t){dn(t,"tokenChanged",t.$),t.u.stop()}function Nh(t,e){t.ya=e,$r(t,"_lat",e)}function Sh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return De(e).then((function(){return t}))}function jh(t){t.i&&!t.P&&(t.P=!0,Rc(t.i,t))}function xh(t,e){Qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ch(){}function Dh(t){return je().then((function(){if(t.A)throw new k("app-deleted")}))}function Ph(t){return W(t.providerData,(function(t){return t.providerId}))}function Rh(t,e){e&&(Lh(t,e.providerId),t.providerData.push(e))}function Lh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Uh(t,e){t!=e&&(Qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new mh),K(e.providerData,(function(e){Rh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),$r(t,"refreshToken",t.b.a),lh(t.N,e.N.b))}function Vh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return iu(t.a,Ra,{idToken:e}).then(E(t.Jc,t))}(t,e).then((function(){return n||Mh(t,"isAnonymous",!1),e}))}))}function Fh(t,e){e[Zs]&&t.ya!=e[Zs]&&(yh(t.b,e),t.dispatchEvent(new hh("tokenChanged")),Nh(t,e[Zs]),Mh(t,"refreshToken",t.b.a))}function qh(t,e){return Vh(t).then((function(){if(Y(Ph(t),e))return Sh(t).then((function(){throw new k("provider-already-linked")}))}))}function Bh(t,e,n){return Zr({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function zh(t,e){return Fh(t,e),t.reload().then((function(){return t}))}function Gh(t,n,r,i,o){if(!Cr())return xe(new k("operation-not-supported-in-this-environment"));if(t.f&&!o)return xe(t.f);var s=Ji(r.providerId),a=Vr(t.uid+":::"),u=null;(!Rr()||wr())&&t.o&&r.isOAuthProvider&&(u=bu(t.o,t.l,t.m,n,r,null,a,e.a.SDK_VERSION||null,null,null,t.tenantId));var c=vr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Hh(t),!o)return t.I().then((function(){}))})).then((function(){return Vc(t.i,c,n,r,a,!!u,t.tenantId)})).then((function(){return new Te((function(e,r){t.ma(n,null,new k("cancelled-popup-request"),t.h||null),t.g=e,t.O=r,t.h=a,t.c=Bc(t.i,t,n,c,a)}))})).then((function(t){return c&&dr(c),t?Zr(t):null})).s((function(t){throw c&&dr(c),t})),Wh(t,i,o)}function Kh(t,e,n,r,i){if(!Cr())return xe(new k("operation-not-supported-in-this-environment"));if(t.f&&!i)return xe(t.f);var o=null,s=Vr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Sh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Jh,t.w(),e.a)),e})).then((function(){return qc(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.ha)return $h(t.ha);throw o})).then((function(){if(o)throw o})),Wh(t,r,i)}function Hh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Wh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),xe(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new hh("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){J(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=sh(e.w(),Oh(t),E(t.ic,t))),n||e}))}function Xh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new wh(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&Rh(r,Zr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Yh(t){this.a=t,this.b=nc()}nh.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=yt(e.f);return delete n[rh],delete n[ih],mt(n,t),e.g(n)}))},O(oh,k),ah.prototype.rb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Mo(t.a)}),iu(e,Da,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),iu(e,Pa,n)}))}(this,t,e)},O(uh,ah),O(ch,uh),O(hh,Qe),(n=fh.prototype).xc=function(t){lh(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=ni(t))&&e.push(t)})),e}(t.gd))},n.Qb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},n.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return Fh(n.a,t),n.a.reload()}))},n.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return iu(r,ru,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return lh(e,r),Fh(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},n.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},ph.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=u.document,e=null;return zr()||!t?je():new Te((function(n){e=function(){zr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},ph.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:vh(this)}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?xe(new k("user-token-expired")):t||!this.b||_()>vh(this)-3e4?this.a?gh(this,{grant_type:"refresh_token",refresh_token:this.a}):je(null):je({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},O(wh,Tn),wh.prototype.wa=function(t){this.pa=t,ia(this.a,t)},wh.prototype.ka=function(){return this.pa},wh.prototype.Ga=function(){return Z(this.X)},wh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(wh.prototype,"providerId","firebase"),(n=wh.prototype).reload=function(){var t=this;return Wh(this,Dh(this).then((function(){return Vh(t).then((function(){return Sh(t)})).then(Ch)})))},n.nc=function(t){return this.I(t).then((function(t){return new eh(t)}))},n.I=function(t){var e=this;return Wh(this,Dh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.ya&&(Nh(e,t.accessToken),e.dispatchEvent(new hh("tokenChanged"))),Mh(e,"refreshToken",t.refreshToken),t.accessToken})))},n.Jc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");xh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Rh(this,e[n]);Mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new hh("userReloaded",{gd:t}))},n.Kc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},n.sb=function(t){var e=this,n=null;return Wh(this,t.c(this.a,this.uid).then((function(t){return Fh(e,t),n=Bh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},n.Bc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},n.pb=function(t){var e=this,n=null;return Wh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),zh(e,t)})).then((function(){return n})))},n.Cc=function(t,e){var n=this;return Wh(this,qh(this,"phone").then((function(){return th(Oh(n),t,e,E(n.pb,n))})))},n.Lc=function(t,e){var n=this;return Wh(this,je().then((function(){return th(Oh(n),t,e,E(n.sb,n))})),!0)},n.Ab=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},n.dd=function(t){var e=this;return Wh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Fh(e,t),e.reload()})))},n.Bb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},n.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return Wh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Fh(e,t),Mh(e,"displayName",t.displayName||null),Mh(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Sh(e)})).then(Ch))},n.bd=function(t){var e=this;return Wh(this,Vh(this).then((function(n){return Y(Ph(e),t)?function(t,e,n){return iu(t,ja,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(Ph(e),(function(t){n[t]||Lh(e,t)})),n[Uo.PROVIDER_ID]||$r(e,"phoneNumber",null),Sh(e)})):Sh(e).then((function(){throw new k("no-such-provider")}))})))},n.delete=function(){var t=this;return Wh(this,this.I().then((function(e){return iu(t.a,Sa,{idToken:e})})).then((function(){t.dispatchEvent(new hh("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Ih(t,null),Eh(t,null),_h(t,null),t.G=[],t.A=!0,kh(t),$r(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},n.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},n.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},n.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?E(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?E(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?E(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?E(this.Kb,this):null},n.Dc=function(t){var e=this;return Gh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Sh(e)}))}),!1)},n.Mc=function(t){return Gh(this,"reauthViaPopup",t,(function(){return je()}),!0)},n.Ec=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},n.Nc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return je()}),!0)},n.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,this.I().then((function(n){return Ea(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),zh(i,t)})).then((function(){return o})))},n.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,je().then((function(){return fo(Ta(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Fh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},n.tb=function(t){var e=this,n=null;return Wh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:qi(new xi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},n.Db=function(t,e){var n=this,r=null;return Wh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:qi(new xi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},n.ic=function(t){var e=null,n=this;return Wh(this,t=fo(je(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Fh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.N.w()),t};var Jh={name:"redirectUser",D:"session"};function $h(t){return oc(t.b,Jh,t.a)}function Qh(t){this.a=t,this.b=nc(),this.c=null,this.f=function(t){var e=ef("local"),n=ef("session"),r=ef("none");return function(t,e,n){var r=ic(e,n),i=rc(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Ur(u.localStorage.getItem(r))}catch(t){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tf,t.a).then((function(t){return t?ef(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ef("local"),this.a,E(this.g,this))}function Zh(t,e){var n,r=[];for(n in tc)tc[n]!==e&&r.push(oc(t.b,ef(tc[n]),t.a));return r.push(oc(t.b,tf,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ce(t[a],T(o,a),s);else e(i)}))}(r)}Qh.prototype.g=function(){var t=this,e=ef("local");sf(this,(function(){return je().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tf={name:"persistence",D:"session"};function ef(t){return{name:"authUser",D:t}}function nf(t,e){return sf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rf(t){return sf(t,(function(){return oc(t.b,t.c,t.a)}))}function of(t,e,n){return sf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Xh(t||{})}))}))}function sf(t,e){return t.f=t.f.then(e,e),t.f}function af(t){if(this.m=!1,$r(this,"settings",new Qc),$r(this,"app",t),!yf(this).options||!yf(this).options.apiKey)throw new k("invalid-api-key");t=e.a.SDK_VERSION?Nr(e.a.SDK_VERSION):null,this.a=new $s(yf(this).options&&yf(this).options.apiKey,D(S),t),this.R=[],this.u=[],this.P=[],this.ac=e.a.INTERNAL.createSubscribe(E(this.yc,this)),this.X=void 0,this.bc=e.a.INTERNAL.createSubscribe(E(this.zc,this)),df(this,null),this.l=new Qh(yf(this).options.apiKey+":"+yf(this).name),this.G=new Yh(yf(this).options.apiKey+":"+yf(this).name),this.$=wf(this,function(t){var e=yf(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Jh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Xh(t||{})}))}(t.G,yf(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),$h(t.G)}));return wf(t,e)}(t).then((function(){return of(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nf(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:rf(t.l)}))):null})).then((function(e){df(t,e||null)}));return wf(t,n)}(this)),this.i=wf(this,function(t){return t.$.then((function(){return lf(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(ef("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=E(this.Yc,this),this.Ba=E(this.da,this),this.ya=E(this.kc,this),this.za=E(this.vc,this),this.Aa=E(this.wc,this),this.b=null,function(t){var e=yf(t).options.authDomain,n=yf(t).options.apiKey;e&&Cr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Kc(e,n,yf(t).name,t.f),Rc(t.b,t),gf(t)&&jh(gf(t)),t.o){jh(t.o);var r=t.o;r.wa(t.ka()),Ih(r,t),Th(r=t.o,t.N),_h(r,t),oa((r=t.o).a,t.f),Eh(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.Fc,this),this.A=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function uf(t){Qe.call(this,"languageCodeChanged"),this.h=t}function cf(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function hf(t){Qe.call(this,"frameworkChanged"),this.f=t}function ff(t){return t.gb||xe(new k("auth-domain-config-required"))}function lf(t){if(!Cr())return xe(new k("operation-not-supported-in-this-environment"));var e=ff(t).then((function(){return t.b.qa()})).then((function(t){return t?Zr(t):null}));return wf(t,e)}function pf(t,e){var n={};return n.apiKey=yf(t).options.apiKey,n.authDomain=yf(t).options.authDomain,n.appName=yf(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&Th(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return gf(t)&&e.uid==gf(t).uid?(Uh(gf(t),e),t.da(e)):(df(t,e),jh(e),t.da(e))})).then((function(){bf(t)}))}function df(t,e){gf(t)&&(function(t,e){$(t.R,(function(t){return t==e}))}(gf(t),t.Ba),dn(gf(t),"tokenChanged",t.ya),dn(gf(t),"userDeleted",t.za),dn(gf(t),"userInvalidated",t.Aa),kh(gf(t))),e&&(e.R.push(t.Ba),fn(e,"tokenChanged",t.ya),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.A&&Ah(e)),$r(t,"currentUser",e),e&&(e.wa(t.ka()),Ih(e,t),Th(e,t.N),_h(e,t),oa(e.a,t.f),Eh(e,t))}function vf(t,e){var n=null,r=null;return wf(t,e.then((function(e){return n=Fo(e),r=$i(e),pf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=sh(e.w(),t,E(t.jc,t))),n||e})).then((function(){return Zr({user:gf(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function yf(t){return t.app}function gf(t){return t.currentUser}function mf(t){return gf(t)&&gf(t)._lat||null}function bf(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](mf(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](mf(t))}}function wf(t,e){return t.R.push(e),e.na((function(){J(t.R,e)})),e}function If(){}function Ef(){this.a={},this.b=1e12}Qh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in tc)if(tc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Du()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),sf(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=ef(t),e)return n.b.set(n.c,e,n.a)})):je()}))},O(af,Tn),O(uf,Qe),O(cf,Qe),O(hf,Qe),(n=af.prototype).wb=function(t){return wf(this,t=this.l.wb(t))},n.wa=function(t){this.aa===t||this.m||(this.aa=t,ia(this.a,this.aa),this.dispatchEvent(new uf(this.ka())))},n.ka=function(){return this.aa},n.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},n.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Gr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&mr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,oa(this.a,this.f),this.dispatchEvent(new cf(this.f))}},n.Fc=function(t){this.N.push(t),aa(this.a,e.a.SDK_VERSION?Nr(e.a.SDK_VERSION,this.N):null),this.dispatchEvent(new hf(this.N))},n.Ga=function(){return Z(this.N)},n.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},n.S=function(){return this.W},n.toJSON=function(){return{apiKey:yf(this).options.apiKey,authDomain:yf(this).options.authDomain,appName:yf(this).name,currentUser:gf(this)&&gf(this).w()}},n.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},n.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},n.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?E(this.hc,this):null},n.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vf(i,Ia(i.a,o))}))},n.Wc=function(t){if(!Cr())return xe(new k("operation-not-supported-in-this-environment"));var n=this,r=Ji(t.providerId),i=Vr(),o=null;(!Rr()||wr())&&yf(this).options.authDomain&&t.isOAuthProvider&&(o=bu(yf(this).options.authDomain,yf(this).options.apiKey,yf(this).name,"signInViaPopup",t,null,i,e.a.SDK_VERSION||null,null,null,this.S(),this.f));var s=vr(o,r&&r.ua,r&&r.ta);return wf(this,r=ff(this).then((function(e){return Vc(e,s,"signInViaPopup",t,i,!!o,n.S())})).then((function(){return new Te((function(t,e){n.ma("signInViaPopup",null,new k("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=i,n.c=Bc(n.b,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&dr(s),t?Zr(t):null})).s((function(t){throw s&&dr(s),t})))},n.Xc=function(t){if(!Cr())return xe(new k("operation-not-supported-in-this-environment"));var e=this;return wf(this,ff(this).then((function(){return function(t){return sf(t,(function(){return t.b.set(tf,t.c.D,t.a)}))}(e.l)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.S())})))},n.qa=function(){var t=this;return lf(this).then((function(e){return t.b&&Xc(t.b.b),e})).s((function(e){throw t.b&&Xc(t.b.b),e}))},n.cd=function(t){if(!t)return xe(new k("null-user"));if(this.W!=t.tenantId)return xe(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=yf(this).options.apiKey,n.authDomain=yf(this).options.authDomain,n.appName=yf(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&Th(e,r),Uh(e,t),e}(t,n,e.G,e.Ga());return wf(this,this.i.then((function(){if(yf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return gf(e)&&t.uid==gf(e).uid?(Uh(gf(e),t),e.da(t)):(df(e,r),jh(r),e.da(r))})).then((function(){bf(e)})))},n.zb=function(){var t=this;return wf(this,this.i.then((function(){return t.b&&Xc(t.b.b),gf(t)?(df(t,null),rf(t.l).then((function(){bf(t)}))):je()})))},n.Yc=function(){var t=this;return of(this.l,yf(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=gf(t)&&e){n=gf(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(gf(t),e),gf(t).I();(gf(t)||e)&&(df(t,e),e&&(jh(e),e.ha=t.G),t.b&&Rc(t.b,t),bf(t))}}))},n.da=function(t){return nf(this.l,t)},n.kc=function(){bf(this),this.da(gf(this))},n.vc=function(){this.zb()},n.wc=function(){this.zb()},n.jc=function(t){var e=this;return this.i.then((function(){return vf(e,je(t))}))},n.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(gf(e))}))},n.zc=function(t){var e=this;!function(t,e){t.P.push(e),wf(t,t.i.then((function(){!t.m&&Y(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(mf(t)))})))}(this,(function(){t.next(gf(e))}))},n.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(gf(r)):"function"==typeof t.next&&t.next(gf(r))})),this.ac(t,e,n)},n.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(gf(r)):"function"==typeof t.next&&t.next(gf(r))})),this.bc(t,e,n)},n.mc=function(t){var e=this;return wf(this,this.i.then((function(){return gf(e)?gf(e).I(t).then((function(t){return{accessToken:t}})):null})))},n.Sc=function(t){var e=this;return this.i.then((function(){return vf(e,iu(e.a,Qa,{token:t}))})).then((function(t){var n=t.user;return Mh(n,"isAnonymous",!1),e.da(n),t}))},n.Tc=function(t,e){var n=this;return this.i.then((function(){return vf(n,iu(n.a,Za,{email:t,password:e}))}))},n.dc=function(t,e){var n=this;return this.i.then((function(){return vf(n,iu(n.a,ka,{email:t,password:e}))}))},n.Za=function(t){var e=this;return this.i.then((function(){return vf(e,t.ja(e.a))}))},n.Rc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},n.yb=function(){var t=this;return this.i.then((function(){var e=gf(t);if(e&&e.isAnonymous){var n=Zr({providerId:null,isNewUser:!1});return Zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vf(t,t.a.yb()).then((function(e){var n=e.user;return Mh(n,"isAnonymous",!0),t.da(n),e}))}))},n.getUid=function(){return gf(this)&&gf(this).uid||null},n.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&gf(this)&&Ah(gf(this))},n.Oc=function(t){var e=this;K(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&gf(this)&&kh(gf(this)),this.removeAuthTokenListener(t)},n.addAuthTokenListener=function(t){var e=this;this.u.push(t),wf(this,this.i.then((function(){e.m||Y(e.u,t)&&t(mf(e))})))},n.removeAuthTokenListener=function(t){$(this.u,(function(e){return e==t}))},n.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(ef("local"),t.a,this.pa),this.b&&(Lc(this.b,this),Xc(this.b.b)),Promise.resolve()},n.gc=function(t){return wf(this,function(t,e){return iu(t,Na,{identifier:e,continueUri:Dr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},n.Ac=function(t){return!!Po(t)},n.vb=function(t,e){var n=this;return wf(this,je().then((function(){var t=new xi(e);if(!t.c)throw new k("argument-error",Pi+" must be true when sending sign in link to email");return qi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},n.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},n.mb=function(t,e){return wf(this,this.a.mb(t,e).then((function(){})))},n.Qa=function(t){return wf(this,this.a.Qa(t).then((function(t){return new ui(t)})))},n.ib=function(t){return wf(this,this.a.ib(t).then((function(){})))},n.ub=function(t,e){var n=this;return wf(this,je().then((function(){return void 0===e||vt(e)?{}:qi(new xi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},n.Vc=function(t,e){return wf(this,th(this,t,e,E(this.Za,this)))},n.Uc=function(t,e){var n=this;return wf(this,je().then((function(){var r=e||fr(),i=Do(t,r);if(!(r=Po(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new k("tenant-id-mismatch");return n.Za(i)})))},If.prototype.render=function(){},If.prototype.reset=function(){},If.prototype.getResponse=function(){},If.prototype.execute=function(){};var Tf=null;function _f(t,e){return(e=Of(e))&&t.a[e]||null}function Of(t){return(t=void 0===t?1e12:t)?t.toString():null}function Af(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=fe(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function kf(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nf(){}function Sf(){}Ef.prototype.render=function(t,e){return this.a[this.b.toString()]=new Af(t,e),this.b++},Ef.prototype.reset=function(t){var e=_f(this,t);t=Of(t),e&&t&&(e.delete(),delete this.a[t])},Ef.prototype.getResponse=function(t){return(t=_f(this,t))?t.getResponse():null},Ef.prototype.execute=function(t){(t=_f(this,t))&&t.execute()},Af.prototype.getResponse=function(){return kf(this),this.b},Af.prototype.execute=function(){kf(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Af.prototype.delete=function(){kf(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},$r(Nf,"FACTOR_ID","phone"),Sf.prototype.g=function(){return Tf||(Tf=new Ef),je(Tf)},Sf.prototype.c=function(){};var jf=null;function xf(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Cf=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Df=new Br(3e4,6e4);xf.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Df.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},je(Gs(Nt(Cf,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},xf.prototype.c=function(){this.b--};var Pf=null;function Rf(t,e,n,r,i,o,s){if($r(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(jf||(jf=new Sf),s=jf):(Pf||(Pf=new xf),s=Pf),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uf])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vf],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!fe(e)||!this.i&&fe(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new $s(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[Lf];this.a[Lf]=function(t){if(Ff(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=jr(c,u);"function"==typeof e&&e(t)}};var h=this.a[Mf];this.a[Mf]=function(){if(Ff(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=jr(h,u);"function"==typeof t&&t()}}}var Lf="callback",Mf="expired-callback",Uf="sitekey",Vf="size";function Ff(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function qf(t,e){return t.h.push(e),e.na((function(){J(t.h,e)})),e}function Bf(t){if(t.A)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function zf(t,n,r){var i=!1;try{this.b=r||e.a.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=e.a.SDK_VERSION?Nr(e.a.SDK_VERSION,s):null,Rf.call(this,r,t,n,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),s,D(S),i)}function Gf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Kf.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Kf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(n=Rf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=qf(this,je().then((function(){if(Dr()&&!Ir())return mr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,iu(t.o,qa,{})})).then((function(e){t.a[Uf]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},n.render=function(){Bf(this);var t=this;return qf(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=fe(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!he&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Kt(s.name),'"'),s.type){o.push(' type="',Kt(s.type),'"');var a={};mt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ge(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):le(o,s)),2<r.length&&ye(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},n.verify=function(){Bf(this);var t=this;return qf(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},n.reset=function(){Bf(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Bf(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=fe(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},O(zf,Rf);var Kf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hf(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Wf(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Xf(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Yf(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Jf(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function $f(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Qf(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zf(t){return y(t)&&"string"==typeof t.uid}function tl(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function el(t,e){for(var n in e){var r=e[n].name;t[r]=il(r,t[n],e[n].j)}}function nl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Gf(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function rl(t,e,n,r){t[e]=il(e,n,r)}function il(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Gf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}el(af.prototype,{ib:{name:"applyActionCode",j:[Hf("code")]},Qa:{name:"checkActionCode",j:[Hf("code")]},mb:{name:"confirmPasswordReset",j:[Hf("code"),Hf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Hf("email"),Hf("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Hf("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Hf("emailLink")]},Gc:{name:"onAuthStateChanged",j:[tl(Xf(),Yf(),"nextOrObserver"),Yf("opt_error",!0),Yf("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[tl(Xf(),Yf(),"nextOrObserver"),Yf("opt_error",!0),Yf("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Hf("email"),tl(Xf("opt_actionCodeSettings",!0),Jf(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Hf("email"),Xf("actionCodeSettings")]},wb:{name:"setPersistence",j:[Hf("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[$f()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[$f()]},Sc:{name:"signInWithCustomToken",j:[Hf("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Hf("email"),Hf("password")]},Uc:{name:"signInWithEmailLink",j:[Hf("email"),Hf("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[tl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof wh)}},Jf(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hf(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Hf("url")]},hd:{name:"verifyPasswordResetCode",j:[Hf("code")]}}),nl(af.prototype,{lc:{name:"languageCode",jb:tl(Hf(),Jf(),"languageCode")},ti:{name:"tenantId",jb:tl(Hf(),Jf(),"tenantId")}}),af.Persistence=tc,af.Persistence.LOCAL="local",af.Persistence.SESSION="session",af.Persistence.NONE="none",el(wh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Wf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Wf("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[$f()]},pb:{name:"linkWithCredential",j:[$f()]},Cc:{name:"linkWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$f()]},sb:{name:"reauthenticateWithCredential",j:[$f()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[tl(Xf("opt_actionCodeSettings",!0),Jf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hf(null,!0)]},bd:{name:"unlink",j:[Hf("provider")]},Ab:{name:"updateEmail",j:[Hf("email")]},Bb:{name:"updatePassword",j:[Hf("password")]},dd:{name:"updatePhoneNumber",j:[$f("phone")]},Cb:{name:"updateProfile",j:[Xf("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Hf("email"),tl(Xf("opt_actionCodeSettings",!0),Jf(null,!0),"opt_actionCodeSettings",!0)]}}),el(Ef.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),el(If.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),el(Te.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),nl(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Wf("appVerificationDisabledForTesting")}}),el(Zc.prototype,{confirm:{name:"confirm",j:[Hf("verificationCode")]}}),rl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,xo,Lo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tl(Hf(),Xf(),"json")]),rl(Co,"credential",(function(t,e){return new jo(t,e)}),[Hf("email"),Hf("password")]),el(jo.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(Eo.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Xf("customOAuthParameters")]}}),rl(Eo,"credential",To,[tl(Hf(),Xf(),"token")]),rl(Co,"credentialWithLink",Do,[Hf("email"),Hf("emailLink")]),el(_o.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Xf("customOAuthParameters")]}}),rl(_o,"credential",Oo,[tl(Hf(),Xf(),"token")]),el(Ao.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Xf("customOAuthParameters")]}}),rl(Ao,"credential",ko,[tl(Hf(),tl(Xf(),Jf()),"idToken"),tl(Hf(),Jf(),"accessToken",!0)]),el(No.prototype,{Ka:{name:"setCustomParameters",j:[Xf("customOAuthParameters")]}}),rl(No,"credential",So,[tl(Hf(),Xf(),"token"),Hf("secret",!0)]),el(Io.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},credential:{name:"credential",j:[tl(Hf(),tl(Xf(),Jf()),"optionsOrIdToken"),tl(Hf(),Jf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Xf("customOAuthParameters")]}}),el(yo.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(lo.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),rl(Uo,"credential",Vo,[Hf("verificationId"),Hf("verificationCode")]),el(Uo.prototype,{eb:{name:"verifyPhoneNumber",j:[tl(Hf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Qf(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Qf(t.session,co)&&Zf(t.multiFactorHint):t.session&&t.multiFactorUid?Qf(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),el(Ro.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(k.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(Xo.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(Wo.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(oh.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(nh.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),el(fh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Hf("displayName",!0)]},ad:{name:"unenroll",j:[tl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Zf},Hf(),"multiFactorInfoIdentifier")]}}),el(zf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rl(Ei,"parseLink",ji,[Hf("link")]),rl(Nf,"assertion",(function(t){return new ch(t)}),[$f("phone")]),function(){if(void 0===e.a||!e.a.INTERNAL||!e.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:af,AuthCredential:ho,Error:k};rl(t,"EmailAuthProvider",Co,[]),rl(t,"FacebookAuthProvider",Eo,[]),rl(t,"GithubAuthProvider",_o,[]),rl(t,"GoogleAuthProvider",Ao,[]),rl(t,"TwitterAuthProvider",No,[]),rl(t,"OAuthProvider",Io,[Hf("providerId")]),rl(t,"SAMLAuthProvider",wo,[Hf("providerId")]),rl(t,"PhoneAuthProvider",Uo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof af)}}]),rl(t,"RecaptchaVerifier",zf,[tl(Hf(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Xf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof e.a.app.App)}}]),rl(t,"ActionCodeURL",Ei,[]),rl(t,"PhoneMultiFactorGenerator",Nf,[]),e.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new af(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.mc,t),addAuthTokenListener:E(t.cc,t),removeAuthTokenListener:E(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.a.registerVersion("@firebase/auth","0.15.2"),e.a.INTERNAL.extendNamespace({User:wh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(6))},function(t,e,n){"use strict";n.r(e);n(7);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(8),o=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=n,this.word=i(),this.speed=r,this.rendered=!0,this.shipImg=new Image,this.shipImg.src="./src/assets/tie_fighter.png",this.sprites=new Image,this.sprites.src="./src/assets/spritesheet.png",this.explosion=new Image,this.explosion.src="./src/assets/enemy_sheet.png",this.shipPos=o,this.dz=.1,this.dx=this.shipPos[0]/256,this.attacking=!1,this.atf=0,this.exploding=!1,this.explodingFrames=[479,511,545,583,626,667,402,440],this.exf=0,this.flyingNoise=new Audio("./src/assets/soundFX/tie_fighter_noise.wav"),this.flyingNoiseOn=!1,this.flyingNoise.volume=.1,this.laserNoise=new Audio("./src/assets/soundFX/blaster.wav"),this.laserNoiseOn=!1,this.laserNoise.volume=.2,this.explosionNoise=new Audio("src/assets/soundFX/explosion1.wav"),this.explosionNoiseOn=!1,this.explosionNoise.volume=.05,this.draw=this.draw.bind(this),this.attack=this.attack.bind(this)}var e,n,o;return e=t,(n=[{key:"draw",value:function(){this.exploding?(this.explosionNoiseOn||(this.explosionNoiseOn=!0,this.explosionNoise.play()),this.ctx.drawImage(this.explosion,this.explodingFrames[this.exf],136,32,48,this.dx*this.canvas.width,this.shipPos[1]/222*this.canvas.height,this.dz*(this.canvas.width*(40/256)),this.dz*(this.canvas.height*(40/222)))):(this.ctx.drawImage(this.shipImg,this.dx*this.canvas.width,this.shipPos[1]/222*this.canvas.height,this.dz*(this.canvas.width*(40/256)),this.dz*(this.canvas.height*(40/222))),this.ctx.fillStyle="#FFFFFF",this.ctx.font="20px Red Rose",this.ctx.textAlign="center",this.ctx.fillText(this.word,this.dx*this.canvas.width+this.dz*(20*this.canvas.width/256),this.shipPos[1]/222*this.canvas.height),this.flyingNoiseOn||(this.flyingNoiseOn=!0,this.flyingNoise.play()),this.attack())}},{key:"animate",value:function(){this.rendered&&(this.dz<1&&!this.exploding&&(this.dz+=this.speed,this.dx-=.001),this.dz>1&&this.flyingNoise.pause(),this.draw(),this.exploding&&(this.exf+=1),this.exf>=7&&(this.rendered=!1))}},{key:"attack",value:function(){this.dz>=1&&this.attacking&&(this.laserNoiseOn||(this.laserNoiseOn=!0,this.laserNoise.play()),this.ctx.drawImage(this.sprites,771,450,245,68,(this.shipPos[0]-125)/256*this.canvas.width,(this.shipPos[1]+25)/222*this.canvas.height,245*this.canvas.width/256,this.canvas.height*((222-(this.shipPos[1]+25))/222)),this.atf+=1,this.atf>20&&(this.attacking=!1,this.atf=0,this.laserNoiseOn=!1))}}])&&r(e.prototype,n),o&&r(e,o),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=n,this.bImage=new Image,this.bImage.src="./src/assets/spritesheet.png",this.height=this.canvas.height,this.width=this.canvas.width,this.bTFrames=[2,260,518,776,1034],this.bBFrames=[2,260,518,776,1034,1292],this.tFrame=0,this.bFrame=0}var e,n,r;return e=t,(n=[{key:"animate",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.bImage,this.bBFrames[this.bFrame],226,256,222,0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.bImage,this.bTFrames[this.tFrame],2,256,222,0,0,this.canvas.width,this.canvas.height),this.bFrame+=1,this.tFrame+=1,this.bFrame>5&&(this.bFrame=0),this.tFrame>4&&(this.tFrame=0)}}])&&s(e.prototype,n),r&&s(e,r),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=n,this.pImg=new Image,this.pImg.src="./src/assets/spritesheet.png",this.navScreenFrames=[260,316],this.nSF=0,this.health=10,this.scoreFrames=[337,328,270,277,285,292,299,306,313,320],this.score=0,this.shipNoise=new Audio("./src/assets/soundFX/xwingloop.wav"),this.shipNoiseOn=!1,this.shipNoise.volume=.02,this.playShipNoise=this.playShipNoise.bind(this)}var e,n,r;return e=t,(n=[{key:"animate",value:function(){this.ctx.drawImage(this.pImg,2,450,256,163,0,59/222*this.canvas.height,this.canvas.width,163/222*this.canvas.height),this.ctx.drawImage(this.pImg,this.navScreenFrames[this.nSF],580,54,33,101/256*this.canvas.width,176/222*this.canvas.height,54/256*this.canvas.width,33/222*this.canvas.height),this.nSF+=1,this.nSF>1&&(this.nSF=0),this.health<=9&&this.ctx.drawImage(this.pImg,268,561,6,3,161/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=8&&this.ctx.drawImage(this.pImg,268,561,6,3,153/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=7&&this.ctx.drawImage(this.pImg,268,561,6,3,145/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=6&&this.ctx.drawImage(this.pImg,268,561,6,3,137/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=5&&this.ctx.drawImage(this.pImg,268,561,6,3,129/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=4&&this.ctx.drawImage(this.pImg,268,561,6,3,121/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=3&&this.ctx.drawImage(this.pImg,268,561,6,3,113/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=2&&this.ctx.drawImage(this.pImg,268,561,6,3,105/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=1&&this.ctx.drawImage(this.pImg,268,561,6,3,97/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height),this.health<=0&&this.ctx.drawImage(this.pImg,268,561,6,3,89/256*this.canvas.width,153/222*this.canvas.height,6/256*this.canvas.width,3/222*this.canvas.height);var t=Math.floor(this.score/10),e=this.score%10;this.ctx.drawImage(this.pImg,this.scoreFrames[t],571,6,7,169/256*this.canvas.width,200/222*this.canvas.height,6/256*this.canvas.width,7/222*this.canvas.height),this.ctx.drawImage(this.pImg,this.scoreFrames[e],571,6,7,177/256*this.canvas.width,200/222*this.canvas.height,6/256*this.canvas.width,7/222*this.canvas.height)}},{key:"playShipNoise",value:function(){this.shipNoise.play(),this.shipNoise.currentTime>this.shipNoise.duration-.6&&(this.shipNoise.currentTime=0,this.shipNoise.play())}}])&&u(e.prototype,n),r&&u(e,r),t}(),h=n(1);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
h.a.registerVersion("firebase","8.1.1","app");n(9),n(11);h.a.initializeApp({apiKey:"AIzaSyCwgZPZIAN-oBIcYnxU8cdoB07zheYEkek",authDomain:"the-empire-types-back.firebaseapp.com",projectId:"the-empire-types-back"});var f=h.a.firestore(),l=[];function p(){l=[],h.a.auth().currentUser||h.a.auth().signInAnonymously();var t=f.collection("hiscores").orderBy("score","desc").limit(10).get();return t.then((function(t){t.docs.forEach((function(t){l.push(t.data().score)}))})),t}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=n,this.bgCtx=r,this.pCtx=i,this.background=new a(e,r,1),this.focused=!0,this.startGame=!1,this.gameOver=!1,this.ships=[],this.player=new c(e,i),this.words=[],this.startPositions=[[96,80],[172,70],[63,30],[120,25],[197,20]],this.usedStartPos=[],this.animate=this.animate.bind(this),this.animateBackground=this.animateBackground.bind(this),this.start=this.start.bind(this),this.createEnemy=this.createEnemy.bind(this),this.generateEnemies=this.generateEnemies.bind(this),this.generateAttacks=this.generateAttacks.bind(this),this.enemyAttack=this.enemyAttack.bind(this),this.losingScreen=this.losingScreen.bind(this),this.newHighScoreModal=this.newHighScoreModal.bind(this),this.updateLeaderBoard=this.updateLeaderBoard.bind(this),this.bgrunning=setInterval(this.animateBackground,125),this.updateLeaderBoard()}var e,n,r;return e=t,(n=[{key:"animateBackground",value:function(){this.bgCtx.canvas.width=window.innerWidth,this.bgCtx.canvas.height=window.innerHeight,this.pCtx.canvas.width=window.innerWidth,this.pCtx.canvas.height=window.innerHeight,this.background.animate(),this.player.animate()}},{key:"animate",value:function(){this.ctx.canvas.width=window.innerWidth,this.ctx.canvas.height=window.innerHeight;for(var t=0;t<this.ships.length;t++){var e=this.ships[t];e.rendered?e.animate():(this.startPositions.push(this.ships[t].shipPos),this.ships.splice(t,1))}}},{key:"start",value:function(){var t=this;this.startGame||(this.generateEnemies(),this.generateAttacks(),this.startGame=!0,document.getElementById("player-word").autofocus=!0);var e=requestAnimationFrame(this.start);window.onblur=function(){return t.focused=!1},window.onfocus=function(){t.focused=!0,t.generateEnemies(),t.generateAttacks()};var n=document.getElementById("player-word");n.autofocus=!0,this.canvas.addEventListener("click",(function(){return n.focus()})),document.getElementById("bg-canvas").addEventListener("click",(function(){return n.focus()})),document.getElementById("player-screen").addEventListener("click",(function(){return n.focus()})),this.player.health>0?(this.animate(),this.player.playShipNoise()):(this.player.shipNoise.pause(),this.gameOver=!0,cancelAnimationFrame(e),clearInterval(this.bgrunning),this.losingScreen())}},{key:"createEnemy",value:function(t,e){if(this.startPositions.length){var n=new o(t,e,.01,this.startPositions[0]);this.ships.push(n),this.words.push(n.word);var r=this.startPositions.shift();this.usedStartPos.push(r)}}},{key:"generateEnemies",value:function(){var t=this,e=Math.floor(5e3*Math.random());this.focused&&setTimeout((function(){t.createEnemy(t.canvas,t.ctx),t.generateEnemies()}),e-.2)}},{key:"generateAttacks",value:function(){var t=this,e=Math.floor(5e3*Math.random());this.focused&&setTimeout((function(){t.ships.length&&t.enemyAttack(),t.generateAttacks()}),e-.2)}},{key:"enemyAttack",value:function(){var t=this.ships[Math.floor(Math.random()*this.ships.length)];!t.attacking&&!t.exploding&&t.dz>=1&&(t.attacking=!0,this.player.health-=1)}},{key:"checkWord",value:function(t){var e=this.words.indexOf(t);-1!=e&&(this.words.splice(e,1),this.ships[e].exploding=!0,this.player.score+=1)}},{key:"losingScreen",value:function(){var t,e,n=(t=this.player.score,e=!1,l.forEach((function(n){t>n&&(e=!0)})),e);document.getElementById("input-section").style.display="none",this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bgCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.pCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#FFFFFF",this.ctx.font="30px Red Rose",this.ctx.textAlign="center",document.getElementById("leaderboard-container").style.display="flex",n?this.newHighScoreModal():this.ctx.fillText("Game Over",this.canvas.width/2,100),this.ctx.font="25px Red Rose",this.ctx.fillText("Your Score:",this.canvas.width/2,150),this.ctx.fillText(this.player.score,this.canvas.width/2,190),this.ctx.font="20px Red Rose",this.ctx.fillText("Press Ctrl+Space to Play Again",this.canvas.width/2,this.canvas.height-100)}},{key:"newHighScoreModal",value:function(){var t=this;this.ctx.fillStyle="#FFFFFF",this.ctx.font="30px Red Rose",this.ctx.textAlign="center",this.ctx.fillText("New High Score",this.canvas.width/2,90),this.ctx.font="20px Red Rose";var e=document.getElementById("leaderboard-entry"),n=document.createElement("form"),r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("value",""),r.setAttribute("maxlength","3"),r.autoFocus=!0,n.appendChild(r),e.appendChild(n);var i=this.player.score;r.focus(),n.addEventListener("submit",(function(n){n.preventDefault(),function(t,e){var n=(new Date).toDateString();return f.collection("hiscores").add({name:t,score:e,date:n}).then((function(){return!0})).catch((function(){return!1}))}(r.value.toUpperCase(),i).then((function(){for(;e.firstChild;)e.removeChild(e.firstChild);t.updateLeaderBoard()}))}))}},{key:"updateLeaderBoard",value:function(){for(var t=document.getElementById("leaderboard");t.firstChild;)t.removeChild(t.firstChild);p().then((function(e){var n=e.docs,r=1;n.forEach((function(e){var n=e.data(),i=n.name,o=n.score,s=document.createElement("li"),a=document.createElement("h3"),u=document.createElement("h3"),c=document.createElement("h3");a.innerHTML=r,u.innerHTML=i.slice(0,3),c.innerHTML=o,s.appendChild(a),s.appendChild(u),s.appendChild(c),s.setAttribute("class","lb-stat"),t.appendChild(s),r+=1}))}))}}])&&d(e.prototype,n),r&&d(e,r),t}();document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("ship-game"),e=t.getContext("2d"),n=document.getElementById("bg-canvas").getContext("2d"),r=document.getElementById("player-screen").getContext("2d"),i=document.getElementById("input-section"),o=document.getElementById("player-word");o.autofocus=!0,i.addEventListener("submit",(function(t){t.preventDefault(),s.checkWord(o.value.toLowerCase().trim()),i.reset()}));var s=new v(t,e,n,r);document.addEventListener("keypress",u);var a=document.getElementById("start");function u(t){if("Enter"===t.key||"click"===t.type){var e=document.getElementById("splash");document.getElementById("leaderboard-container").style.display="none",e.style.display="none",document.removeEventListener("keypress",u),a.removeEventListener("click",u),s.start(),o.focus()}}a.addEventListener("click",u),document.addEventListener("keydown",(function(i){if(s.gameOver&&i.ctrlKey&&(" "===i.key||"Spacebar"===i.key)){document.getElementById("leaderboard-container").style.display="none",s=null,s=new v(t,e,n,r);var o=document.getElementById("player-word");o.autoFocus=!0;var a=document.getElementById("input-section");a.style.display="block",a.reset(),s.start(),o.focus()}}))}))}]);
//# sourceMappingURL=main.js.map